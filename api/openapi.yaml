openapi: 3.1.0
info:
  contact:
    email: contact@factpulse.fr
    name: FactPulse
    url: https://factpulse.fr/
  description: "\nREST API for electronic invoicing in France: Factur-X, AFNOR PDP/PA,\
    \ electronic signatures.\n\n## üéØ Main Features\n\n### üìÑ Factur-X Invoice Generation\n\
    - **Formats**: XML only or PDF/A-3 with embedded XML\n- **Profiles**: MINIMUM,\
    \ BASIC, EN16931, EXTENDED\n- **Standards**: EN 16931 (EU directive 2014/55),\
    \ ISO 19005-3 (PDF/A-3), CII (UN/CEFACT)\n- **üÜï Simplified Format**: Generation\
    \ from SIRET + auto-enrichment (Chorus Pro API + Business Search)\n\n### ‚úÖ Validation\
    \ and Compliance\n- **XML Validation**: Schematron (45 to 210+ rules depending\
    \ on profile)\n- **PDF Validation**: PDF/A-3, Factur-X XMP metadata, electronic\
    \ signatures\n- **VeraPDF**: Strict PDF/A validation (146+ ISO 19005-3 rules)\n\
    - **Asynchronous Processing**: Celery support for heavy validations (VeraPDF)\n\
    \n### üì° AFNOR PDP/PA Integration (XP Z12-013)\n- **Flow Submission**: Send invoices\
    \ to Partner Dematerialization Platforms\n- **Flow Search**: View submitted invoices\n\
    - **Download**: Retrieve PDF/A-3 with XML\n- **Directory Service**: Company search\
    \ (SIREN/SIRET)\n- **Multi-client**: Support for multiple PDP configs per user\
    \ (stored credentials or zero-storage)\n\n### ‚úçÔ∏è PDF Electronic Signature\n- **Standards**:\
    \ PAdES-B-B, PAdES-B-T (RFC 3161 timestamping), PAdES-B-LT (long-term archival)\n\
    - **eIDAS Levels**: SES (self-signed), AdES (commercial CA), QES (QTSP)\n- **Validation**:\
    \ Cryptographic integrity and certificate verification\n- **Certificate Generation**:\
    \ Self-signed X.509 certificates for testing\n\n### üîÑ Asynchronous Processing\n\
    - **Celery**: Asynchronous generation, validation and signing\n- **Polling**:\
    \ Status tracking via `/tasks/{task_id}/status`\n- **No timeout**: Ideal for large\
    \ files or heavy validations\n\n## üîí Authentication\n\nAll requests require a\
    \ **JWT token** in the Authorization header:\n```\nAuthorization: Bearer YOUR_JWT_TOKEN\n\
    ```\n\n### How to obtain a JWT token?\n\n#### üîë Method 1: `/api/token/` API (Recommended)\n\
    \n**URL:** `https://factpulse.fr/api/token/`\n\nThis method is **recommended**\
    \ for integration in your applications and CI/CD workflows.\n\n**Prerequisites:**\
    \ Having set a password on your account\n\n**For users registered via email/password:**\n\
    - You already have a password, use it directly\n\n**For users registered via OAuth\
    \ (Google/GitHub):**\n- You must first set a password at: https://factpulse.fr/accounts/password/set/\n\
    - Once the password is created, you can use the API\n\n**Request example:**\n\
    ```bash\ncurl -X POST https://factpulse.fr/api/token/ \\\n  -H \"Content-Type:\
    \ application/json\" \\\n  -d '{\n    \"username\": \"your_email@example.com\"\
    ,\n    \"password\": \"your_password\"\n  }'\n```\n\n**Optional `client_uid` parameter:**\n\
    \nTo select credentials for a specific client (PA/PDP, Chorus Pro, signing certificates),\
    \ add `client_uid`:\n\n```bash\ncurl -X POST https://factpulse.fr/api/token/ \\\
    \n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"your_email@example.com\"\
    ,\n    \"password\": \"your_password\",\n    \"client_uid\": \"550e8400-e29b-41d4-a716-446655440000\"\
    \n  }'\n```\n\nThe `client_uid` will be included in the JWT and allow the API\
    \ to automatically use:\n- AFNOR/PDP credentials configured for this client\n\
    - Chorus Pro credentials configured for this client\n- Electronic signature certificates\
    \ configured for this client\n\n**Response:**\n```json\n{\n  \"access\": \"eyJ0eXAiOiJKV1QiLCJhbGc...\"\
    ,  // Access token (validity: 30 min)\n  \"refresh\": \"eyJ0eXAiOiJKV1QiLCJhbGc...\"\
    \  // Refresh token (validity: 7 days)\n}\n```\n\n**Advantages:**\n- ‚úÖ Full automation\
    \ (CI/CD, scripts)\n- ‚úÖ Programmatic token management\n- ‚úÖ Refresh token support\
    \ for automatic access renewal\n- ‚úÖ Easy integration in any language/tool\n\n\
    #### üñ•Ô∏è Method 2: Dashboard Generation (Alternative)\n\n**URL:** https://factpulse.fr/api/dashboard/\n\
    \nThis method is suitable for quick tests or occasional use via the graphical\
    \ interface.\n\n**How it works:**\n- Log in to the dashboard\n- Use the \"Generate\
    \ Test Token\" or \"Generate Production Token\" buttons\n- Works for **all** users\
    \ (OAuth and email/password), without requiring a password\n\n**Token types:**\n\
    - **Test Token**: 24h validity, 1000 calls/day quota (free)\n- **Production Token**:\
    \ 7 days validity, quota based on your plan\n\n**Advantages:**\n- ‚úÖ Quick for\
    \ API testing\n- ‚úÖ No password required\n- ‚úÖ Simple visual interface\n\n**Disadvantages:**\n\
    - ‚ùå Requires manual action\n- ‚ùå No refresh token\n- ‚ùå Less suited for automation\n\
    \n### üìö Full Documentation\n\nFor more information on authentication and API\
    \ usage:\nhttps://factpulse.fr/documentation-api/\n    "
  license:
    name: Proprietary
    url: https://factpulse.fr/mentions-legales/
  termsOfService: https://factpulse.fr/cgu/
  title: FactPulse REST API
  version: 1.0.0
  x-logo:
    url: https://factpulse.fr/static/images/logo_new.5d7ae8746125.png
    altText: FactPulse Logo
servers:
- description: Production
  url: https://factpulse.fr
- description: Local development
  url: http://localhost:8001
tags:
- description: "\n## üìÑ Electronic invoice generation and validation\n\n**Main API\
    \ for generating Factur-X invoices compliant with European standards.**\n\n###\
    \ Features\n\n- **Factur-X Generation**: MINIMUM, BASIC, EN16931, EXTENDED profiles\n\
    - **Validation**: Schematron (45 to 210+ rules), VeraPDF (146+ PDF/A-3 rules)\n\
    - **Electronic Signature**: PAdES-B-B, PAdES-B-T, PAdES-B-LT (eIDAS levels)\n\
    - **Asynchronous Processing**: Celery support for large files\n- **Auto-enrichment**:\
    \ Data from Chorus Pro + Business API\n        "
  name: Invoice Processing
- description: "\n## üîë OAuth2 Authentication for AFNOR PDP\n\n**Endpoint to obtain\
    \ an OAuth2 token for authentication with Partner Dematerialization Platforms.**\n\
    \n### Usage\n\nThis endpoint allows you to obtain an OAuth2 access token required\
    \ to call Flow Service and Directory Service APIs.\n\n**Request Type**: `application/x-www-form-urlencoded`\n\
    \n**Parameters**:\n- `grant_type`: `client_credentials` (required)\n- `client_id`:\
    \ Client ID provided by the PDP (required)\n- `client_secret`: Client secret provided\
    \ by the PDP (required)\n\n**Response**:\n```json\n{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\
    ,\n  \"token_type\": \"Bearer\",\n  \"expires_in\": 3600\n}\n```\n\n**Note**:\
    \ This token must be used in the `Authorization: Bearer {access_token}` header\
    \ for AFNOR API calls.\n        "
  name: AFNOR PDP/PA
- description: "\n## üîê AFNOR PDP Authentication Modes\n\n**All AFNOR Flow Service\
    \ endpoints support 2 authentication modes:**\n\n### Mode 1: Stored (Stored Credentials)\n\
    - PDP credentials are stored encrypted in Django\n- Automatically retrieved via\
    \ JWT `client_uid`\n- **Django decides** the environment (test/production via\
    \ configured URLs)\n- Convenient for production\n\n**Example**:\n```json\n{\n\
    \  \"name\": \"Invoice INV-2025-001\",\n  \"flowSyntax\": \"CII\",\n  \"flowProfile\"\
    : \"EN16931\"\n}\n```\n\n**JWT must contain**: `client_uid` claim pointing to\
    \ a registered PDP config\n\n---\n\n### Mode 2: Zero-Trust (Zero-Storage)\n- PDP\
    \ credentials are passed in the `pdp_credentials` field of each request\n- Never\
    \ stored in database\n- **Client decides** the environment via URLs in credentials\n\
    - Maximum security, GDPR compliant\n\n**Example**:\n```json\n{\n  \"name\": \"\
    Invoice INV-2025-001\",\n  \"flowSyntax\": \"CII\",\n  \"flowProfile\": \"EN16931\"\
    ,\n  \"pdp_credentials\": {\n    \"flow_service_url\": \"https://pdp-production.example.fr/flow/v1\"\
    ,\n    \"token_url\": \"https://auth.example.fr/oauth/token\",\n    \"client_id\"\
    : \"client_prod_123\",\n    \"client_secret\": \"secret_prod_456\",\n    \"directory_service_url\"\
    : \"https://pdp-production.example.fr/directory/v1\"\n  }\n}\n```\n\n---\n\n**PDPCredentials\
    \ Schema**:\n- `flow_service_url`: Flow Service API URL (invoice submission/search)\n\
    - `token_url`: OAuth2 URL to obtain token\n- `client_id`: OAuth2 Client ID provided\
    \ by PDP\n- `client_secret`: OAuth2 Client Secret provided by PDP\n- `directory_service_url`:\
    \ (Optional) Directory Service API URL\n\n**Note**: All endpoints below support\
    \ these 2 modes. The `pdp_credentials` field is optional in each request.\n\nüìñ\
    \ **Full documentation**: See `OPENAPI_AUTHENTICATION_MODES.md`\n        "
  name: AFNOR PDP/PA - Flow Service
- description: "\n## üîê AFNOR Directory Service Authentication Modes\n\nSupports the\
    \ **same 2 authentication modes** as Flow Service.\n\n### Mode 1: Stored\nJWT\
    \ with `client_uid` ‚Üí Credentials retrieved from Django\n\n### Mode 2: Zero-Trust\n\
    PDP credentials passed in `pdp_credentials` (see Flow Service)\n\nüìñ **Full documentation**:\
    \ See \"AFNOR PDP/PA - Flow Service\" tag above\n        "
  name: AFNOR PDP/PA - Directory Service
- description: "\n## üîê Chorus Pro Authentication Modes\n\n**All Chorus Pro endpoints\
    \ support 2 authentication modes:**\n\n### Mode 1: Stored (Stored Credentials)\n\
    - Credentials are stored encrypted in Django\n- Automatically retrieved via JWT\
    \ `client_uid`\n- **Django decides** the environment (sandbox/production)\n- Convenient\
    \ for production\n\n**Example**:\n```json\n{\n  \"structure_identifier\": \"12345678901234\"\
    ,\n  \"structure_identifier_type\": \"SIRET\"\n}\n```\n\n**JWT must contain**:\
    \ `client_uid` claim pointing to a registered Chorus Pro config\n\n---\n\n###\
    \ Mode 2: Zero-Trust\n- Credentials are passed in the `credentials` field of each\
    \ request\n- Never stored in database\n- **Client decides** the environment via\
    \ `\"sandbox\": true/false`\n- Maximum security, GDPR compliant\n\n**Example**:\n\
    ```json\n{\n  \"credentials\": {\n    \"piste_client_id\": \"my_client_id\",\n\
    \    \"piste_client_secret\": \"my_secret\",\n    \"chorus_pro_login\": \"login@company.fr\"\
    ,\n    \"chorus_pro_password\": \"password\",\n    \"sandbox\": true\n  },\n \
    \ \"structure_identifier\": \"12345678901234\",\n  \"structure_identifier_type\"\
    : \"SIRET\"\n}\n```\n\n---\n\n**ChorusProCredentials Schema**:\n- `piste_client_id`:\
    \ PISTE Client ID (government OAuth2 portal)\n- `piste_client_secret`: PISTE Client\
    \ Secret\n- `chorus_pro_login`: Chorus Pro login\n- `chorus_pro_password`: Chorus\
    \ Pro password\n- `sandbox`: `true` = test environment, `false` = production\n\
    \n**Note**: All endpoints below support these 2 modes. The `credentials` field\
    \ is optional in each request.\n\nüìñ **Full documentation**: See `OPENAPI_AUTHENTICATION_MODES.md`\n\
    \        "
  name: Chorus Pro
- description: "\n## üîç PDF/XML Factur-X Consistency Verification\n\n**Verifies that\
    \ visible data in the PDF matches the embedded Factur-X XML.**\n\n### Features\n\
    \n- **Native PDF Extraction**: Fast, uses pdfplumber to extract text\n- **OCR\
    \ Extraction**: DocTR service for image PDFs (asynchronous)\n- **Comparison**:\
    \ Compares extracted PDF data with Factur-X XML\n- **Discrepancy Report**: List\
    \ of differences with severity level (CRITICAL, WARNING, INFO)\n\n### Verified\
    \ Fields\n\n**Identification**: BT-1 (invoice #), BT-2 (date), BT-3 (type), BT-5\
    \ (currency)\n\n**Parties**:\n- Seller: BT-27 (name), BT-29 (SIRET), BT-30 (SIREN),\
    \ BT-31 (VAT)\n- Buyer: BT-44 (name), BT-46 (SIRET), BT-47 (SIREN), BT-48 (VAT)\n\
    \n**Amounts**: BT-109 (excl. tax), BT-110 (VAT), BT-112 (incl. tax), BT-115 (amount\
    \ due)\n\n**Mandatory Notes**: PMT (recovery fees), PMD (late payment penalties),\
    \ AAB (discount)\n\n### Endpoints\n\n- **POST /verify**: Synchronous verification\
    \ (native PDF only)\n- **POST /verify-async**: Asynchronous verification (with\
    \ OCR if needed)\n- **GET /verify-async/{id}/status**: Async verification status\n\
    - **POST /extract**: Extraction only (without XML comparison)\n        "
  name: PDF/XML Verification
- description: "\n## üìä E-Reporting (Flux 10) for PPF\n\n**Submit transaction and\
    \ payment data to the French tax administration via PA (Plateformes Agr√©√©es).**\n\
    \n### What is E-Reporting?\n\nE-Reporting is the obligation to transmit transaction\
    \ data to the tax administration\nfor operations that are outside the scope of\
    \ e-invoicing (B2B domestic invoices).\n\n### Applicable Cases\n\n- **B2B International**:\
    \ Sales/purchases with foreign companies\n- **B2C**: Sales to individuals (consumers)\n\
    - **Payments**: When VAT is due on payment (not on invoice)\n\n### Supported Flux\
    \ Types\n\n| Code | Name | Data Field | Description |\n|------|------|------------|-------------|\n\
    | **10.1** | B2B Int. Transactions | `invoices` | Unitary B2B international invoices\
    \ |\n| **10.2** | B2B Int. Payments | `invoicePayments` | Payments for B2B int.\
    \ invoices |\n| **10.3** | B2C Transactions | `transactions` | Aggregated B2C\
    \ sales (daily/periodic) |\n| **10.4** | B2C Payments | `aggregatedPayments` |\
    \ Aggregated B2C payments |\n\n### Workflow\n\n1. **Generate**: Create FRR XML\
    \ from structured data\n2. **Validate**: Check data consistency and business rules\n\
    3. **Submit**: Send to PA via AFNOR Flow Service API\n\n### Example (Flux 10.3\
    \ - B2C Aggregated)\n\n```json\n{\n  \"reportId\": \"EREPORT-2025-001\",\n  \"\
    flowType\": \"10.3\",\n  \"sender\": {\"siren\": \"123456789\", \"name\": \"Ma\
    \ Soci√©t√©\"},\n  \"period\": {\"startDate\": \"2025-01-01\", \"endDate\": \"2025-01-31\"\
    },\n  \"transactions\": [{\n    \"date\": \"2025-01-15\",\n    \"category\": \"\
    B2C\",\n    \"taxExclusiveAmount\": \"10000.00\",\n    \"taxAmount\": \"2000.00\"\
    ,\n    \"taxBreakdown\": [{\"rate\": \"20.00\", \"taxableAmount\": \"10000.00\"\
    , \"taxAmount\": \"2000.00\"}],\n    \"transactionCount\": 150\n  }]\n}\n```\n\
    \        "
  name: E-Reporting
- description: "\n## üîÑ Convert any document to Factur-X\n\n**Transform any document\
    \ (PDF, DOCX, XLSX, images) into a compliant Factur-X invoice.**\n\n### How it\
    \ works\n\n1. **Upload**: Send your document (PDF, Word, Excel, image scan)\n\
    2. **Automatic extraction**: Invoice data is automatically extracted\n3. **Smart\
    \ detection**: Document type automatically identified (invoice, credit note, etc.)\n\
    4. **Data enrichment**: Missing company info completed from official registries\n\
    5. **Validation**: Compliance verified against European standards (EN16931)\n\
    6. **Output**: PDF/A-3 with embedded XML, ready for submission\n\n### Supported\
    \ Document Types (UNTDID 1001)\n\n| Code | Type | Description |\n|------|------|-------------|\n\
    | 380 | Invoice | Standard commercial invoice |\n| 381 | Credit note | Refund,\
    \ correction of previous invoice |\n| 384 | Corrective invoice | Replaces an erroneous\
    \ invoice |\n| 386 | Prepayment invoice | Deposit or advance payment |\n\n###\
    \ Automatic Detection\n\n- **Profile**: EN16931 (standard) or EXTENDED (complex\
    \ cases: factoring, subcontracting, B2G)\n- **Transaction type**: B2B, B2C, or\
    \ B2G\n- **Special cases**: Subcontracting, factoring, self-invoicing\n\n### Your\
    \ PDF is preserved when possible\n\n| Your document | What happens |\n|---------------|--------------|\n\
    | PDF with complete data | ‚úÖ Your PDF is kept, XML embedded |\n| PDF with missing\
    \ data | ‚ö†Ô∏è New PDF generated, you're notified |\n| Excel / Word / Image | üìÑ\
    \ PDF generated from a standard template |\n\n### Iterative workflow (if data\
    \ is incomplete)\n\n1. Upload your document\n2. API returns extracted data + missing\
    \ fields (status `202`)\n3. Complete or correct the data via JSON\n4. Call `/resume`\
    \ endpoint (no re-upload needed)\n5. Validation replayed ‚Üí PDF/A-3 generated\n\
    \n### Endpoints\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n\
    | `POST` | `/convert/async` | Asynchronous conversion (webhook callback) |\n|\
    \ `POST` | `/convert/{id}/resume` | Resume with corrections |\n| `GET` | `/convert/{id}/status`\
    \ | Check conversion status |\n| `GET` | `/convert/{id}/download/{file}` | Download\
    \ PDF or XML |\n        "
  name: Document Conversion
- description: "\n## Endpoints de sant√©\n\nV√©rification de la disponibilit√© et du\
    \ bon fonctionnement des services.\n\n### Endpoints\n\n- `GET /` : V√©rification\
    \ rapide du statut API\n- `GET /healthcheck` : Healthcheck Docker/Kubernetes\n\
    \        "
  name: Health
- description: "\n## Gestion utilisateur\n\nEndpoints pour la gestion du compte utilisateur\
    \ et des informations de session.\n\n### Endpoints\n\n- `GET /api/v1/me` : Informations\
    \ sur l'utilisateur connect√© et son quota\n        "
  name: User
- description: "\n## Temporary file downloads\n\nDownload files generated by asynchronous\
    \ tasks when using `webhook_mode: \"download_url\"`.\n\n### How it works\n\n1.\
    \ When submitting an async task, set `webhook_mode: \"download_url\"`\n2. The\
    \ webhook notification will contain a `download_url` instead of base64 content\n\
    3. Use this URL to download the file (requires JWT authentication)\n4. Files expire\
    \ after 1 hour\n\n### Security\n\n- JWT authentication required\n- Only the user\
    \ who initiated the task can download the file\n        "
  name: Downloads
paths:
  /api/v1/processing/generate-invoice:
    post:
      description: |-
        Generates an electronic invoice in Factur-X format compliant with European standards.

        ## Applied Standards

        - **Factur-X** (France): FNFE-MPE standard (Forum National de la Facture √âlectronique)
        - **ZUGFeRD** (Germany): German format compatible with Factur-X
        - **EN 16931**: European semantic standard for electronic invoicing
        - **ISO 19005-3** (PDF/A-3): Long-term electronic archiving
        - **Cross Industry Invoice (CII)**: UN/CEFACT XML syntax

        ## üÜï New: Simplified format with auto-enrichment (P0.1)

        You can now create an invoice by providing only:
        - An invoice number
        - A supplier SIRET + **IBAN** (required)
        - A recipient SIRET
        - Invoice lines (description, quantity, net price)

        **Simplified format example**:
        ```json
        {
          "number": "FACT-2025-001",
          "supplier": {
            "siret": "92019522900017",
            "iban": "FR7630001007941234567890185"
          },
          "recipient": {"siret": "35600000000048"},
          "lines": [
            {"description": "Service", "quantity": 10, "unitPrice": 100.00, "vatRate": 20.0}
          ]
        }
        ```

        **‚ö†Ô∏è Required fields (simplified format)**:
        - `number`: Unique invoice number
        - `supplier.siret`: Supplier's SIRET (14 digits)
        - `supplier.iban`: Bank account IBAN (no public API to retrieve it)
        - `recipient.siret`: Recipient's SIRET
        - `lines[]`: At least one invoice line

        **What happens automatically with `auto_enrich=True`**:
        - ‚úÖ Name enrichment from Chorus Pro API
        - ‚úÖ Address enrichment from Business Search API (free, public)
        - ‚úÖ Automatic intra-EU VAT calculation (FR + key + SIREN)
        - ‚úÖ Chorus Pro ID retrieval for electronic invoicing
        - ‚úÖ Net/VAT/Gross totals calculation
        - ‚úÖ Date generation (today + 30-day due date)
        - ‚úÖ Multi-rate VAT handling

        **Supported identifiers**:
        - SIRET (14 digits): Specific establishment ‚≠ê Recommended
        - SIREN (9 digits): Company (auto-selection of headquarters)
        - Special types: UE_HORS_FRANCE, RIDET, TAHITI, etc.

        ## Checks performed during generation

        ### 1. Data validation (Pydantic)
        - Data types (amounts as Decimal, ISO 8601 dates)
        - Formats (14-digit SIRET, 9-digit SIREN, IBAN)
        - Required fields per profile
        - Amount consistency (Net + VAT = Gross)

        ### 2. CII-compliant XML generation
        - Serialization according to Cross Industry Invoice XSD schema
        - Correct UN/CEFACT namespaces
        - Hierarchical structure respected
        - UTF-8 encoding without BOM

        ### 3. Schematron validation
        - Business rules for selected profile (MINIMUM, BASIC, EN16931, EXTENDED)
        - Element cardinality (required, optional, repeatable)
        - Calculation rules (totals, VAT, discounts)
        - European EN 16931 compliance

        ### 4. PDF/A-3 conversion (if output_format='pdf')
        - Source PDF conversion to PDF/A-3 via Ghostscript
        - Factur-X XML embedding in PDF
        - Compliant XMP metadata
        - ICC sRGB color profile
        - Removal of forbidden elements (JavaScript, forms)

        ## How it works

        1. **Submission**: Invoice is queued in Celery for asynchronous processing
        2. **Immediate return**: You receive a `task_id` (HTTP 202 Accepted)
        3. **Tracking**: Use the `/tasks/{task_id}/status` endpoint to track progress

        ## Webhook notification (recommended)

        Instead of polling, you can receive a webhook notification when the task completes:

        ```
        callback_url=https://your-server.com/webhook
        ```

        The webhook will POST a JSON payload with:
        - `event_type`: `generation.completed` or `generation.failed`
        - `data.task_id`: The Celery task ID
        - `data.content_b64` or `data.xml_content`: The generated content
        - `X-Webhook-Signature` header for HMAC verification

        See `/docs/WEBHOOKS.md` for full documentation.

        ## Output formats

        - **xml**: Generates only Factur-X XML (recommended for testing)
        - **pdf**: Generates PDF/A-3 with embedded XML (requires `source_pdf`)

        ## Factur-X profiles

        - **MINIMUM**: Minimal data (simplified invoice)
        - **BASIC**: Basic information (SMEs)
        - **EN16931**: European standard (recommended, compliant with directive 2014/55/EU)
        - **EXTENDED**: All available data (large accounts)

        ## What you get

        After successful processing (status `completed`):
        - **XML only**: Base64-encoded Factur-X compliant XML file
        - **PDF/A-3**: PDF with embedded XML, ready for sending/archiving
        - **Metadata**: Profile, Factur-X version, file size
        - **Validation**: Schematron compliance confirmation

        ## Validation

        Data is automatically validated according to detected format.
        On error, a 422 status is returned with invalid field details.
      operationId: generate_invoice_api_v1_processing_generate_invoice_post
      requestBody:
        content:
          multipart/form-data:
            examples:
              xml_output:
                summary: Generate XML only
                value:
                  invoice_data: "{\"invoiceNumber\":\"FACT-2025-001\",\"invoiceDate\"\
                    :\"2025-10-27\",\"paymentDueDate\":\"2025-11-27\",\"submissionMode\"\
                    :\"DEPOT_PDF_API\",\"recipient\":{\"name\":\"Client Test SAS\"\
                    ,\"electronicAddress\":{\"identifier\":\"12345678901234\",\"schemeId\"\
                    :\"0225\"},\"postalAddress\":{\"lineOne\":\"456 Avenue des Champs\"\
                    ,\"postalCode\":\"69001\",\"city\":\"Lyon\",\"countryCode\":\"\
                    FR\"},\"executingServiceCode\":\"SERVICE01\"},\"supplier\":{\"\
                    name\":\"Ma Soci\\u00e9t\\u00e9 SAS\",\"supplierId\":12345,\"\
                    siret\":\"12345678900001\",\"vatNumber\":\"FR12345678900\",\"\
                    iban\":\"FR7630006000011234567890189\",\"electronicAddress\":{\"\
                    identifier\":\"12345678900001\",\"schemeId\":\"0225\"},\"postalAddress\"\
                    :{\"lineOne\":\"123 Rue de la R\\u00e9publique\",\"lineTwo\":\"\
                    B\\u00e2timent A\",\"postalCode\":\"75001\",\"city\":\"Paris\"\
                    ,\"countryCode\":\"FR\"}},\"invoicingFramework\":{\"invoicingFrameworkCode\"\
                    :\"A1_FACTURE_FOURNISSEUR\"},\"references\":{\"invoiceType\":\"\
                    FACTURE\",\"vatAccountingCode\":\"TVA_SUR_DEBIT\",\"paymentMeans\"\
                    :\"VIREMENT\",\"invoiceCurrency\":\"EUR\",\"purchaseOrderReference\"\
                    :\"CMD-2025-042\"},\"invoiceLines\":[{\"lineNumber\":1,\"itemName\"\
                    :\"Prestation de conseil\",\"quantity\":\"5.00\",\"unit\":\"HEURE\"\
                    ,\"unitNetPrice\":\"200.00\",\"lineNetAmount\":\"1000.00\",\"\
                    manualVatRate\":\"20.00\",\"vatCategory\":\"S\",\"reference\"\
                    :\"REF-CONSEIL-001\"},{\"lineNumber\":2,\"itemName\":\"Formation\
                    \ d\\u00e9veloppeurs\",\"quantity\":\"3.00\",\"unit\":\"JOUR\"\
                    ,\"unitNetPrice\":\"500.00\",\"lineNetAmount\":\"1500.00\",\"\
                    vatCategory\":\"S\",\"manualVatRate\":\"20.00\",\"reference\"\
                    :\"REF-FORM-002\"}],\"vatLines\":[{\"taxableAmount\":\"2500.00\"\
                    ,\"vatAmount\":\"500.00\",\"manualRate\":\"20.00\",\"category\"\
                    :\"S\"}],\"totals\":{\"totalNetAmount\":\"2500.00\",\"vatAmount\"\
                    :\"500.00\",\"totalGrossAmount\":\"3000.00\",\"amountDue\":\"\
                    3000.00\"},\"comment\":\"Invoice for October 2025 services\"}"
                  profile: EXTENDED
                  output_format: xml
              pdf_output:
                summary: Generate PDF (requires source_pdf)
                value:
                  invoice_data: "{\"invoiceNumber\":\"FACT-2025-001\",\"invoiceDate\"\
                    :\"2025-10-27\",\"paymentDueDate\":\"2025-11-27\",\"submissionMode\"\
                    :\"DEPOT_PDF_API\",\"recipient\":{\"name\":\"Client Test SAS\"\
                    ,\"electronicAddress\":{\"identifier\":\"12345678901234\",\"schemeId\"\
                    :\"0225\"},\"postalAddress\":{\"lineOne\":\"456 Avenue des Champs\"\
                    ,\"postalCode\":\"69001\",\"city\":\"Lyon\",\"countryCode\":\"\
                    FR\"},\"executingServiceCode\":\"SERVICE01\"},\"supplier\":{\"\
                    name\":\"Ma Soci\\u00e9t\\u00e9 SAS\",\"supplierId\":12345,\"\
                    siret\":\"12345678900001\",\"vatNumber\":\"FR12345678900\",\"\
                    iban\":\"FR7630006000011234567890189\",\"electronicAddress\":{\"\
                    identifier\":\"12345678900001\",\"schemeId\":\"0225\"},\"postalAddress\"\
                    :{\"lineOne\":\"123 Rue de la R\\u00e9publique\",\"lineTwo\":\"\
                    B\\u00e2timent A\",\"postalCode\":\"75001\",\"city\":\"Paris\"\
                    ,\"countryCode\":\"FR\"}},\"invoicingFramework\":{\"invoicingFrameworkCode\"\
                    :\"A1_FACTURE_FOURNISSEUR\"},\"references\":{\"invoiceType\":\"\
                    FACTURE\",\"vatAccountingCode\":\"TVA_SUR_DEBIT\",\"paymentMeans\"\
                    :\"VIREMENT\",\"invoiceCurrency\":\"EUR\",\"purchaseOrderReference\"\
                    :\"CMD-2025-042\"},\"invoiceLines\":[{\"lineNumber\":1,\"itemName\"\
                    :\"Prestation de conseil\",\"quantity\":\"5.00\",\"unit\":\"HEURE\"\
                    ,\"unitNetPrice\":\"200.00\",\"lineNetAmount\":\"1000.00\",\"\
                    manualVatRate\":\"20.00\",\"vatCategory\":\"S\",\"reference\"\
                    :\"REF-CONSEIL-001\"},{\"lineNumber\":2,\"itemName\":\"Formation\
                    \ d\\u00e9veloppeurs\",\"quantity\":\"3.00\",\"unit\":\"JOUR\"\
                    ,\"unitNetPrice\":\"500.00\",\"lineNetAmount\":\"1500.00\",\"\
                    vatCategory\":\"S\",\"manualVatRate\":\"20.00\",\"reference\"\
                    :\"REF-FORM-002\"}],\"vatLines\":[{\"taxableAmount\":\"2500.00\"\
                    ,\"vatAmount\":\"500.00\",\"manualRate\":\"20.00\",\"category\"\
                    :\"S\"}],\"totals\":{\"totalNetAmount\":\"2500.00\",\"vatAmount\"\
                    :\"500.00\",\"totalGrossAmount\":\"3000.00\",\"amountDue\":\"\
                    3000.00\"},\"comment\":\"Invoice for October 2025 services\"}"
                  profile: EXTENDED
                  output_format: pdf
                  source_pdf: (binary)
            schema:
              $ref: "#/components/schemas/Body_generate_invoice_api_v1_processing_generate_invoice_post"
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskResponse"
          description: Successful Response
        "400":
          description: Invalid invoice data or missing PDF file
        "422":
          description: Invoice data validation error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Generate a Factur-X invoice
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/tasks/{task_id}/status:
    get:
      description: |-
        Retrieves the progress status of an invoice generation task.

        ## Possible states

        The `status` field uses the `CeleryStatus` enum with values:
        - **PENDING, STARTED, SUCCESS, FAILURE, RETRY**

        See the `CeleryStatus` schema documentation for details.

        ## Business result

        When `status="SUCCESS"`, the `result` field contains:
        - `status`: "SUCCESS" or "ERROR" (business result)
        - `content_b64`: Base64 encoded content (if success)
        - `errorCode`, `errorMessage`, `details`: AFNOR format (if business error)

        ## Usage

        Poll this endpoint every 2-3 seconds until
        `status` is `SUCCESS` or `FAILURE`.
      operationId: get_task_status_api_v1_processing_tasks__task_id__status_get
      parameters:
      - description: Celery task ID returned by async endpoints (UUID format)
        explode: false
        in: path
        name: task_id
        required: true
        schema:
          description: Celery task ID returned by async endpoints (UUID format)
          title: Task Id
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AsyncTaskStatus"
          description: Current task state
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Get task generation status
      tags:
      - Invoice Processing
      x-accepts:
      - application/json
  /api/v1/processing/validate-xml:
    post:
      description: |-
        Validates a Factur-X XML file against Schematron business rules according to EN 16931 standard.

        ## Applied Standard

        **Schematron ISO/IEC 19757-3**: Business rules validation language for XML
        - Semantic validation (beyond XSD syntax)
        - European EN 16931 business rules
        - French-specific Factur-X rules
        - Arithmetic calculations and data consistency

        ## Profiles and validated rules

        ### MINIMUM (45 rules)
        - Unique invoice identifier
        - Dates (issue, due date)
        - Party identifiers (SIRET/SIREN)
        - Total gross amount

        ### BASIC (102 rules)
        - All MINIMUM rules
        - Detailed invoice lines
        - Basic VAT calculations
        - Payment methods
        - References (order, contract)

        ### EN16931 (178 rules)
        - All BASIC rules
        - **European rules (BR-xx)**: 81 business rules
        - **French rules (FR-xx)**: 12 France-specific rules
        - **Advanced calculations (CR-xx)**: 32 calculation rules
        - **Standardized codes (CL-xx)**: 52 code lists

        ### EXTENDED (210+ rules)
        - All EN16931 rules
        - Logistics information
        - Advanced accounting data
        - Multiple external references

        ## Checks performed

        ### 1. Syntax validation
        - Correct XML parsing (UTF-8, well-formed)
        - UN/CEFACT namespaces present
        - Hierarchical structure respected

        ### 2. Business rules (BR-xx)
        Examples:
        - `BR-1`: Invoice total must equal sum of line totals + document-level amounts
        - `BR-CO-10`: Sum of VAT base amounts must equal invoice net total
        - `BR-16`: Invoice currency code must be in ISO 4217 list

        ### 3. French rules (FR-xx)
        Examples:
        - `FR-1`: Supplier SIRET must have 14 digits
        - `FR-2`: Customer SIRET must have 14 digits (if present)
        - `FR-5`: Intra-EU VAT number must be in format FRxx999999999

        ### 4. Calculation rules (CR-xx)
        - Net + VAT = Gross amounts
        - Sum of lines = Document total
        - Discounts and surcharges correctly applied
        - Compliant rounding (2 decimals for amounts)

        ### 5. Standardized codes (CL-xx)
        - ISO 3166-1 alpha-2 country codes
        - ISO 4217 currency codes
        - UN/ECE Rec 20 measurement units
        - VAT codes (types, categories, exemptions)
        - SchemeID for identifiers (0002=SIREN, 0009=SIRET, etc.)

        ## Validation process

        1. **XSLT loading**: Schematron file converted to XSLT (Saxon-HE)
        2. **Transformation**: Rules applied to XML
        3. **Results analysis**: Extraction of errors (`failed-assert`) and warnings (`successful-report`)
        4. **Report**: Structured list of non-conformities

        ## Responses

        **200 OK**: Compliant XML
        ```json
        {
          "message": "XML is compliant with EN16931 profile"
        }
        ```

        **400 Bad Request**: Non-compliant XML
        ```json
        {
          "detail": [
            "[BR-1] Invoice total (120.00) does not match calculated sum (100.00 + 20.00)",
            "[FR-1] Supplier SIRET must contain exactly 14 digits"
          ]
        }
        ```

        ## Use cases

        - **Pre-validation**: Verify XML before PDF/A integration
        - **Debugging**: Precisely identify generation errors
        - **Testing**: Validate test or example XMLs
        - **Compliance**: Ensure European and French rules are met
        - **Development**: Quick testing without PDF generation

        ## Processing time

        - MINIMUM profile: ~0.5 second
        - EN16931 profile: ~1-2 seconds
        - EXTENDED profile: ~2-3 seconds
      operationId: validate_xml_api_v1_processing_validate_xml_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_validate_xml_api_v1_processing_validate_xml_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationSuccessResponse"
          description: Successful Response
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/facture_electronique__rest_api__schemas__validation__ValidationErrorResponse"
          description: XML does not comply with Factur-X profile rules
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate an existing Factur-X XML
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/validate-facturx-pdf:
    post:
      description: |-
        Validates a complete Factur-X PDF according to European and French standards.

        ## Applied validation standards

        - **EN 16931**: European semantic standard (directive 2014/55/EU)
        - **ISO 19005-3** (PDF/A-3): Long-term electronic archiving
        - **Factur-X / ZUGFeRD**: Franco-German specification
        - **Schematron**: XML business rules validation
        - **eIDAS**: European regulation on electronic identification (signatures)

        ## Checks performed

        ### 1. Factur-X XML extraction and validation
        **Checks performed:**
        - Presence of embedded XML file (`factur-x.xml` or `zugferd-invoice.xml`)
        - Automatic profile detection (MINIMUM, BASIC, EN16931, EXTENDED)
        - XML parsing with UTF-8 validation
        - GuidelineSpecifiedDocumentContextParameter/ID extraction

        **Schematron validation:**
        - Business rules for detected profile (MINIMUM: 45 rules, EN16931: 178 rules)
        - Cardinality of required elements
        - Calculation consistency (net, VAT, gross amounts, discounts)
        - Identifier formats (SIRET, intra-EU VAT, IBAN)
        - Standardized codes (ISO country codes, UN/ECE units, VAT codes)

        **What is verified:**
        - ‚úÖ XML structure conforming to Cross Industry Invoice XSD
        - ‚úÖ Correct UN/CEFACT namespace
        - ‚úÖ European business rules (BR-xx)
        - ‚úÖ French-specific rules (FR-xx)

        ### 2. PDF/A-3 compliance
        **Basic validation (metadata):**
        - Presence of `/Type` field set to `Catalog`
        - Metadata `pdfaid:part` = 3 (PDF/A-3)
        - Metadata `pdfaid:conformance` = B or U
        - PDF version >= 1.4

        **Strict VeraPDF validation (if use_verapdf=True):**
        - 146+ ISO 19005-3 rules (PDF/A-3B)
        - Absence of forbidden content (JavaScript, multimedia, dynamic forms)
        - Correctly embedded fonts and subsets
        - Compliant color spaces (sRGB, DeviceGray)
        - Valid file structure (cross-reference table)
        - XMP metadata conforming to ISO 16684-1

        **What is verified:**
        - ‚úÖ Long-term archivable file (20+ years)
        - ‚úÖ Guaranteed readability (embedded fonts)
        - ‚úÖ Legal compliance (France, Germany, EU)

        ### 3. XMP metadata (eXtensible Metadata Platform)
        **Checks performed:**
        - Presence of `<?xpacket>` block with XMP metadata
        - `fx:` namespace for Factur-X: `urn:factur-x:pdfa:CrossIndustryDocument:invoice:1p0#`
        - Required Factur-X fields:
          - `fx:ConformanceLevel`: Profile (MINIMUM, BASIC, EN16931, EXTENDED)
          - `fx:DocumentFileName`: Embedded XML name
          - `fx:DocumentType`: "INVOICE"
          - `fx:Version`: Factur-X version (1.0.07)

        **What is verified:**
        - ‚úÖ Metadata conforming to ISO 16684-1
        - ‚úÖ Correct declared Factur-X profile
        - ‚úÖ Supported Factur-X version

        ### 4. Electronic signatures
        **Detection and analysis:**
        - Presence of `/Sig` dictionaries in PDF
        - Signature type: PAdES (PDF Advanced Electronic Signature)
        - Information extraction:
          - Signer name (`/Name`)
          - Signing date (`/M`)
          - Signature reason (`/Reason`)
          - Signature location (`/Location`)
          - Signature type (approval, certification)

        **What is verified:**
        - ‚úÖ Presence of signatures or seals
        - ‚úÖ Number of signatures (single or multi-signature)
        - ‚ÑπÔ∏è No cryptographic verification (requires certificates)

        ## Parameters

        - **pdf_file** (required): The Factur-X PDF file to validate
        - **profile** (optional): Expected profile. If absent, auto-detected from XML
        - **use_verapdf** (optional, default=false): Enable strict PDF/A validation with VeraPDF
          - `false`: Fast metadata validation (2-3 seconds)
          - `true`: Complete ISO 19005-3 validation (15-30 seconds, **recommended for production**)

        ## Detailed response

        ```json
        {
          "isCompliant": true,
          "xml": {
            "present": true,
            "compliant": true,
            "profile": "EN16931",
            "errors": []
          },
          "pdfa": {
            "compliant": true,
            "version": "PDF/A-3B",
            "method": "verapdf",
            "errors": []
          },
          "xmp": {
            "present": true,
            "compliant": true,
            "metadata": {...}
          },
          "signatures": {
            "present": true,
            "count": 1,
            "details": [...]
          }
        }
        ```

        ## Use cases

        - **Before sending**: Validate generated invoice before transmission to client
        - **On reception**: Verify compliance of invoice received from supplier
        - **Audit**: Check quality of invoice batches
        - **Legal compliance**: Ensure B2B/B2G obligations are met in France
        - **Debugging**: Identify issues in generation process
        - **Archiving**: Guarantee long-term validity (PDF/A-3)

        ## Processing time

        - Basic validation: 2-3 seconds
        - VeraPDF validation: 15-30 seconds (depends on PDF size)
      operationId: validate_facturx_pdf_api_v1_processing_validate_facturx_pdf_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_validate_facturx_pdf_api_v1_processing_validate_facturx_pdf_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PDFValidationResultAPI"
          description: Validation completed successfully (check is_compliant field
            for result)
        "400":
          description: Invalid or unreadable PDF file
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate a complete Factur-X PDF
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/validate-facturx-async:
    post:
      description: |-
        Validates a Factur-X PDF asynchronously with polling system.

        ## How it works

        1. **Submission**: PDF is queued for asynchronous validation
        2. **Immediate return**: You receive a `task_id` (HTTP 202)
        3. **Tracking**: Use the `/tasks/{task_id}/status` endpoint to track progress

        ## Advantages of asynchronous mode

        - **No timeout**: Ideal for large PDFs or VeraPDF validation (which can take several seconds)
        - **Scalability**: Validations are processed by dedicated Celery workers
        - **Status tracking**: Allows you to monitor validation progress
        - **Non-blocking**: Your client doesn't wait during validation

        ## Webhook notification (recommended)

        Instead of polling, you can receive a webhook notification when validation completes:

        ```
        callback_url=https://your-server.com/webhook
        webhook_mode=download_url  # Optional: get download URL instead of base64
        ```

        The webhook will POST a JSON payload with:
        - `event_type`: `validation.completed` or `validation.failed`
        - `data.is_compliant`: Whether the PDF is Factur-X compliant
        - `data.detected_profile`: The detected Factur-X profile
        - `X-Webhook-Signature` header for HMAC verification

        ## When to use this mode?

        - **VeraPDF validation enabled** (`use_verapdf=True`): Strict validation can take 2-10 seconds
        - **Large PDF files**: PDFs > 1 MB
        - **Batch processing**: Validating multiple invoices in parallel
        - **Asynchronous integration**: Your system supports polling

        ## Checks performed

        ### 1. Factur-X XML extraction and validation
        - Verifies presence of Factur-X compliant embedded XML file
        - Automatically detects profile used (MINIMUM, BASIC, EN16931, EXTENDED)
        - Validates XML against detected profile's Schematron rules

        ### 2. PDF/A compliance
        - **Without VeraPDF**: Basic metadata validation (fast, ~100ms)
        - **With VeraPDF**: Strict ISO 19005 validation (146+ rules, 2-10s)
          - Detects PDF/A version (PDF/A-1, PDF/A-3, etc.)
          - Detailed non-compliance reports

        ### 3. XMP metadata
        - Verifies presence of XMP metadata in PDF
        - Validates Factur-X metadata compliance (profile, version)
        - Extracts all available XMP metadata

        ### 4. Electronic signatures
        - Detects presence of electronic signatures or seals
        - Extracts information about each signature (signer, date, reason)
        - Counts number of signatures present

        ## Parameters

        - **pdf_file**: The Factur-X PDF file to validate
        - **profile**: Expected Factur-X profile (optional). If not specified, profile
          will be auto-detected from embedded XML file.
        - **use_verapdf**: Enable strict PDF/A validation with VeraPDF.
          ‚ö†Ô∏è **Warning**: VeraPDF can take 2-10 seconds depending on PDF size.
          Recommended only in asynchronous mode to avoid timeouts.

        ## Retrieving results

        After submission, use `GET /tasks/{task_id}/status` endpoint to retrieve the result.

        **Polling example**:
        ```python
        import requests
        import time

        # 1. Submit task
        response = requests.post("/validate-facturx-async", files={"pdf_file": pdf_file})
        task_id = response.json()["taskId"]

        # 2. Poll every 2 seconds
        while True:
            status_response = requests.get(f"/tasks/{task_id}/status")
            status = status_response.json()

            if status["status"] == "SUCCESS":
                result = status["result"]["validation_result"]
                print(f"Compliant: {result['is_compliant']}")
                break
            elif status["status"] == "FAILURE":
                print(f"Error: {status['result']['errorMessage']}")
                break

            time.sleep(2)  # Wait 2 seconds before next check
        ```

        ## Use cases

        - Validate invoices before sending with VeraPDF (strict validation)
        - Process invoice batches in parallel
        - Integrate validation into an asynchronous pipeline
        - Validate large PDFs without timeout risk
      operationId: validate_facturx_pdf_async_api_v1_processing_validate_facturx_async_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_validate_facturx_pdf_async_api_v1_processing_validate_facturx_async_post"
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskResponse"
          description: Successful Response
        "400":
          description: Invalid or unreadable PDF file
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate a Factur-X PDF (asynchronous with polling)
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/sign-pdf:
    post:
      description: |-
        Signs an uploaded PDF with the electronic certificate configured for the client (via client_uid from JWT).

            **Supported standards**: PAdES-B-B, PAdES-B-T (timestamping), PAdES-B-LT (long-term archiving).

            **eIDAS levels**: SES (self-signed), AdES (commercial CA), QES (PSCO - out of scope).

            **Security**: Double authentication X-Internal-Secret + JWT Bearer to retrieve the certificate.

            **‚ö†Ô∏è Legal disclaimer**: Generated signatures are electronic seals as defined by
            the eIDAS regulation. The level of legal validity depends on the certificate used (SES/AdES/QES).
            FactPulse does not provide QES qualified certificates - you must obtain a certificate from
            a PSCO (qualified Trust Service Provider) for maximum legal validity.
      operationId: sign_pdf_api_v1_processing_sign_pdf_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_sign_pdf_api_v1_processing_sign_pdf_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                status: success
                signed_pdf_base64: JVBERi0xLjQKJeLjz9MKNSAwIG9iago8PC...
                filename: facture_signed.pdf
                size_bytes: 156789
                is_signed: true
                signer_cn: ACME Corporation - Server Seal
                signature_date: 2025-01-15T14:30:00+00:00
                certificate_expiration: 2026-12-31T23:59:59+00:00
              schema: {}
          description: PDF signed successfully
        "400":
          content:
            application/json:
              example:
                error: invalid_certificate
                message: Invalid or expired certificate
                help: Please update your certificate in your FactPulse dashboard
          description: Invalid or expired certificate
        "404":
          content:
            application/json:
              example:
                error: no_certificate
                message: No signing certificate configured for this client
                help: Please add a certificate in your FactPulse dashboard (Settings
                  > Signing Certificate)
                client_uid: 550e8400-e29b-41d4-a716-446655440000
          description: No certificate configured for this client
        "401":
          description: Not authenticated - Missing or invalid JWT token
        "503":
          description: Django service unavailable
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
      - HTTPBearer: []
      summary: Sign a PDF with client's certificate (PAdES-B-LT)
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/sign-pdf-async:
    post:
      description: |-
        Signs an uploaded PDF asynchronously via a Celery task.

            **Difference with /sign-pdf**:
            - `/sign-pdf`: Synchronous signature (blocking until completion)
            - `/sign-pdf-async`: Asynchronous signature (returns immediately with task_id)

            **Async advantages**:
            - No timeout for large files
            - No blocking of FastAPI worker
            - Progress tracking via task_id
            - Ideal for batch processing

            **Supported standards**: PAdES-B-B, PAdES-B-T (timestamping), PAdES-B-LT (long-term archiving).

            **‚ö†Ô∏è Legal disclaimer**: Same as /sign-pdf (see that endpoint's documentation).
      operationId: sign_pdf_async_api_v1_processing_sign_pdf_async_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_sign_pdf_async_api_v1_processing_sign_pdf_async_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "202":
          content:
            application/json:
              example:
                task_id: 550e8400-e29b-41d4-a716-446655440000
                status: PENDING
                message: Signature is being processed
          description: Signature task created successfully
        "400":
          description: Invalid parameters
        "401":
          description: Not authenticated - Missing or invalid JWT token
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
      - HTTPBearer: []
      summary: Sign a PDF asynchronously (Celery)
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/validate-pdf-signature:
    post:
      description: |-
        Validates electronic signatures present in an uploaded PDF.

            **Verifications performed**:
            - Presence of signatures
            - Document integrity (not modified since signing)
            - Certificate validity
            - Chain of trust (if available)
            - Presence of timestamp (PAdES-B-T)
            - Validation data (PAdES-B-LT)

            **Supported standards**: PAdES-B-B, PAdES-B-T, PAdES-B-LT, ISO 32000-2.

            **‚ö†Ô∏è Note**: This validation is technical (cryptographic integrity). Legal validity
            depends on the eIDAS level of the certificate (SES/AdES/QES) and the context of use.
      operationId: validate_pdf_signature_endpoint_api_v1_processing_validate_pdf_signature_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_validate_pdf_signature_endpoint_api_v1_processing_validate_pdf_signature_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                is_signed: true
                signature_count: 1
                signatures:
                - field_name: FactPulseSignature
                  signer: ACME Corporation - Server Seal
                  signature_date: 2025-01-15T14:30:00+00:00
                  reason: Factur-X compliance
                  location: "Paris, France"
                  is_valid: true
                  pades_level: PAdES-B-LT
                  timestamped: true
                  validation_data: true
                errors: []
              schema: {}
          description: Validation successful
        "400":
          description: Invalid or unreadable file
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate electronic signatures of a PDF
      tags:
      - Invoice Processing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/processing/generate-test-certificate:
    post:
      description: |-
        Generates a self-signed X.509 certificate for PDF electronic signature testing.

            **‚ö†Ô∏è WARNING: TEST certificate only!**

            This certificate is:
            - ‚úÖ Suitable for testing and development
            - ‚úÖ Compatible with PDF signing (PAdES)
            - ‚úÖ Compliant with eIDAS **SES** level (Simple Electronic Signature)
            - ‚ùå **NEVER usable in production**
            - ‚ùå **Not recognized** by browsers and PDF readers
            - ‚ùå **No legal value**

            ## eIDAS levels

            - **SES** (Simple): Self-signed certificate ‚Üê Generated by this endpoint
            - **AdES** (Advanced): Commercial CA certificate (Let's Encrypt, etc.)
            - **QES** (Qualified): Qualified certificate from QTSP (CertEurope, Universign, etc.)

            ## Usage

            Once generated, the certificate can be:

            1. **Saved in Django** (recommended):
               - Django Admin > Signing Certificates
               - Upload `certificate_pem` and `private_key_pem`

            2. **Used directly**:
               - Sign a PDF with `/sign-pdf`
               - The certificate will be automatically used

            ## Example call

            ```bash
            curl -X POST "https://factpulse.fr/api/v1/processing/generate-test-certificate" \
              -H "Authorization: Bearer eyJ0eXAi..." \
              -H "Content-Type: application/json" \
              -d '{
                "cn": "Test Client XYZ",
                "organization": "Client XYZ Ltd",
                "email": "contact@xyz.com",
                "validity_days": 365
              }'
            ```

            ## Use cases

            - PDF signature testing in development
            - Electronic signature POC
            - Training and demos
            - Automated integration tests

            ## Technical compliance

            Certificate generated with:
            - RSA key 2048 or 4096 bits
            - SHA-256 algorithm
            - Key Usage extensions: `digitalSignature`, `contentCommitment` (non-repudiation)
            - Extended Key Usage extensions: `codeSigning`, `emailProtection`
            - Validity: 1 day to 10 years (configurable)
            - Format: PEM (certificate and key)
            - Optional: PKCS#12 (.p12)
      operationId: generate_test_certificate_api_v1_processing_generate_test_certificate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateCertificateRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenerateCertificateResponse"
          description: Certificate generated successfully
        "400":
          content:
            application/json:
              example:
                detail: Key size must be 2048 or 4096
          description: Invalid request (incorrect parameters)
        "500":
          content:
            application/json:
              example:
                detail: "Error generating certificate: ..."
          description: Server error during generation
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Generate a self-signed X.509 test certificate
      tags:
      - Invoice Processing
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/processing/invoices/submit-complete:
    post:
      description: |-
        Unified endpoint to submit a complete invoice to different destinations.

            **Automated workflow:**
            1. **Auto-enrichment** (optional): retrieves data via public APIs and Chorus Pro/AFNOR
            2. **Factur-X PDF generation**: creates a PDF/A-3 with embedded XML
            3. **Electronic signature** (optional): signs the PDF with a certificate
            4. **Submission**: sends to the chosen destination (Chorus Pro or AFNOR PDP)

            **Supported destinations:**
            - **Chorus Pro**: French B2G platform (invoices to public sector)
            - **AFNOR PDP**: Partner Dematerialization Platforms

            **Destination credentials - 2 modes available:**

            **Mode 1 - Retrieval via JWT (recommended):**
            - Credentials are retrieved automatically via the JWT `client_uid`
            - Do not provide the `credentials` field in `destination`
            - Zero-trust architecture: no secrets in the payload
            - Example: `"destination": {"type": "chorus_pro"}`

            **Mode 2 - Credentials in the payload:**
            - Provide credentials directly in the payload
            - Useful for tests or third-party integrations
            - Example: `"destination": {"type": "chorus_pro", "credentials": {...}}`


            **Electronic signature (optional) - 2 modes available:**

            **Mode 1 - Stored certificate (recommended):**
            - Certificate is retrieved automatically via the JWT `client_uid`
            - No key to provide in the payload
            - PAdES-B-LT signature with timestamp (eIDAS compliant)
            - Example: `"signature": {"reason": "Factur-X compliance"}`

            **Mode 2 - Keys in the payload (for tests):**
            - Provide `key_pem` and `cert_pem` directly
            - PEM format accepted: raw or base64
            - Useful for tests or special cases without stored certificate
            - Example: `"signature": {"key_pem": "-----BEGIN...", "cert_pem": "-----BEGIN..."}`

            If `key_pem` and `cert_pem` are provided ‚Üí Mode 2
            Otherwise ‚Üí Mode 1 (certificate retrieved via `client_uid`)
      operationId: submit_complete_invoice_api_v1_processing_invoices_submit_complete_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitCompleteInvoiceRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitCompleteInvoiceResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit a complete invoice (generation + signature + submission)
      tags:
      - Invoice Processing
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/processing/invoices/submit-complete-async:
    post:
      description: |-
        Asynchronous version of the `/invoices/submit-complete` endpoint using Celery for background processing.

            **Automated workflow (same as synchronous version):**
            1. **Auto-enrichment** (optional): retrieves data via public APIs and Chorus Pro/AFNOR
            2. **Factur-X PDF generation**: creates a PDF/A-3 with embedded XML
            3. **Electronic signature** (optional): signs the PDF with a certificate
            4. **Submission**: sends to the chosen destination (Chorus Pro or AFNOR PDP)

            **Supported destinations:**
            - **Chorus Pro**: French B2G platform (invoices to public sector)
            - **AFNOR PDP**: Partner Dematerialization Platforms

            **Differences with synchronous version:**
            - ‚úÖ **Non-blocking**: Returns immediately with a `task_id` (HTTP 202 Accepted)
            - ‚úÖ **Background processing**: Invoice is processed by a Celery worker
            - ‚úÖ **Progress tracking**: Use `/tasks/{task_id}/status` to track status
            - ‚úÖ **Ideal for high volumes**: Allows processing many invoices in parallel

            **How to use:**
            1. **Submission**: Call this endpoint with your invoice data
            2. **Immediate return**: You receive a `task_id` (e.g., "abc123-def456")
            3. **Tracking**: Call `/tasks/{task_id}/status` to check progress
            4. **Result**: When `status = "SUCCESS"`, the `result` field contains the complete response

            **Webhook notification (recommended):**

            Instead of polling, add `?callback_url=https://your-server.com/webhook` to receive automatic notification:
            - `event_type`: `submission.completed`, `submission.failed`, or `submission.partial`
            - `data.submission_result`: Complete submission result
            - `X-Webhook-Signature` header for HMAC verification

            **Credentials and signature**: Same modes as the synchronous version (JWT or payload).
      operationId: submit_complete_invoice_async_api_v1_processing_invoices_submit_complete_async_post
      parameters:
      - description: Webhook URL for async notification when submission completes.
        explode: true
        in: query
        name: callback_url
        required: false
        schema:
          nullable: true
          type: string
        style: form
      - description: "Webhook content delivery: 'inline' (base64 in payload) or 'download_url'\
          \ (temporary URL, 1h TTL)"
        explode: true
        in: query
        name: webhook_mode
        required: false
        schema:
          default: inline
          description: "Webhook content delivery: 'inline' (base64 in payload) or\
            \ 'download_url' (temporary URL, 1h TTL)"
          title: Webhook Mode
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitCompleteInvoiceRequest"
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit a complete invoice (asynchronous with Celery)
      tags:
      - Invoice Processing
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/afnor/credentials:
    get:
      description: Retrieves stored AFNOR/PDP credentials for the JWT's client_uid.
        This endpoint is used by the SDK in 'stored' mode to retrieve credentials
        before performing AFNOR OAuth itself.
      operationId: get_afnor_credentials_api_v1_afnor_credentials_get
      responses:
        "200":
          content:
            application/json:
              example:
                flow_service_url: https://api.pdp-partner.fr/flow/v1
                token_url: https://auth.pdp-partner.fr/oauth/token
                client_id: factpulse_client
                client_secret: '***'
              schema: {}
          description: AFNOR credentials retrieved successfully
        "400":
          content:
            application/json:
              example:
                detail:
                  error: NO_CLIENT_UID
                  message: No client_uid in JWT. Use zero-trust mode.
          description: No client_uid in JWT
        "401":
          description: Not authenticated - Missing or invalid JWT token
        "404":
          description: Client not found or no AFNOR credentials configured
      security:
      - HTTPBearer: []
      summary: Retrieve stored AFNOR credentials
      tags:
      - AFNOR PDP/PA
      x-accepts:
      - application/json
  /api/v1/afnor/oauth/token:
    post:
      description: OAuth2 proxy endpoint to obtain an AFNOR access token. Proxies
        to AFNOR mock (sandbox) or real PDP depending on MOCK_AFNOR_BASE_URL. This
        endpoint is public (no Django auth required) as it is called by the AFNOR
        SDK.
      operationId: oauth_token_proxy_api_v1_afnor_oauth_token_post
      responses:
        "200":
          content:
            application/json:
              example:
                access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                token_type: Bearer
                expires_in: 3600
              schema: {}
          description: OAuth2 token acquired successfully
        "401":
          description: Invalid credentials
      summary: OAuth2 endpoint for AFNOR authentication
      tags:
      - AFNOR PDP/PA
      x-accepts:
      - application/json
  /api/v1/afnor/incoming-flows/{flow_id}:
    get:
      description: "Downloads an incoming flow from the AFNOR PDP and extracts invoice\
        \ metadata into a unified JSON format. Supports Factur-X, CII, and UBL formats."
      operationId: get_flux_entrant_api_v1_afnor_incoming_flows__flow_id__get
      parameters:
      - description: AFNOR flow ID (UUID format)
        explode: false
        in: path
        name: flow_id
        required: true
        schema:
          description: AFNOR flow ID (UUID format)
          title: Flow Id
          type: string
        style: simple
      - description: Include base64-encoded document in response
        explode: true
        in: query
        name: include_document
        required: false
        schema:
          default: false
          description: Include base64-encoded document in response
          title: Include Document
          type: boolean
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                flowId: 550e8400-e29b-41d4-a716-446655440000
                sourceFormat: Factur-X
                supplierReference: FAC-2025-001
                documentType: "380"
                supplier:
                  name: Supplier SAS
                  siret: "12345678901234"
                  vatNumber: FR12345678901
                billingSiteName: My Company
                billingSiteSiret: "98765432109876"
                issueDate: 2025-01-15
                dueDate: 2025-02-15
                currency: EUR
                netAmount: "1000.00"
                vatAmount: "200.00"
                grossAmount: "1200.00"
              schema:
                $ref: "#/components/schemas/IncomingInvoice"
          description: Invoice extracted successfully
        "400":
          description: Unsupported or invalid invoice format
        "401":
          description: Not authenticated
        "404":
          description: Flow not found
        "503":
          description: PDP service unavailable
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
      - HTTPBearer: []
      summary: Retrieve and extract an incoming invoice
      tags:
      - AFNOR PDP/PA
      x-accepts:
      - application/json
  /api/v1/afnor/flow/v1/healthcheck:
    get:
      description: Check Flow Service availability (AFNOR XP Z12-013 compliant)
      operationId: flow_healthcheck_proxy_api_v1_afnor_flow_v1_healthcheck_get
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
          description: OK - Service is operational
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Internal server error
        "503":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Service unavailable - PDP temporarily unavailable
      summary: Healthcheck Flow Service
      tags:
      - AFNOR PDP/PA - Flow Service
      x-accepts:
      - application/json
  /api/v1/afnor/flow/v1/flows:
    post:
      description: Submits an electronic invoice to a Partner Dematerialization Platform
        (PDP) in compliance with the AFNOR XP Z12-013 standard
      operationId: submit_flow_proxy_api_v1_afnor_flow_v1_flows_post
      requestBody:
        content:
          multipart/form-data:
            encoding:
              file:
                contentType: "application/pdf, application/xml"
                style: form
              flowInfo:
                contentType: application/json
                style: form
            schema:
              $ref: "#/components/schemas/submit_flow_proxy_api_v1_afnor_flow_v1_flows_post_request"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "202":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_FullFlowInfo"
          description: OK - Flow has been uploaded and accepted for processing
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Bad request - Invalid input parameters
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Authentication error - Missing or invalid token
        "403":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Forbidden - Insufficient permissions
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Resource not found
        "413":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Payload too large - File exceeds maximum size
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Unprocessable entity - Business rule validation failed
        "429":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Too many requests - Rate limit exceeded
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Internal server error
        "503":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Service unavailable - PDP temporarily unavailable
      summary: Submit an invoicing flow
      tags:
      - AFNOR PDP/PA - Flow Service
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/afnor/flow/v1/flows/search:
    post:
      description: Search invoicing flows by criteria (AFNOR XP Z12-013 compliant)
      operationId: search_flows_proxy_api_v1_afnor_flow_v1_flows_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AFNOR_SearchFlowParams"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_SearchFlowContent"
          description: OK - Search results returned
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Bad request - Invalid input parameters
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Authentication error - Missing or invalid token
        "403":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Forbidden - Insufficient permissions
        "429":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Too many requests - Rate limit exceeded
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Internal server error
        "503":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Service unavailable - PDP temporarily unavailable
      summary: Search flows
      tags:
      - AFNOR PDP/PA - Flow Service
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/afnor/flow/v1/flows/{flowId}:
    get:
      description: |-
        Download a file related to a given flow (AFNOR XP Z12-013 compliant):
        - Metadata [Default]: provides the flow metadata as JSON
        - Original: the document initially sent by the emitter
        - Converted: the document optionally converted by the system
        - ReadableView: the document optionally generated as readable file
      operationId: download_flow_proxy_api_v1_afnor_flow_v1_flows__flowId__get
      parameters:
      - description: AFNOR flow identifier (UUID)
        explode: false
        in: path
        name: flowId
        required: true
        schema:
          description: AFNOR flow identifier (UUID)
          title: Flowid
          type: string
        style: simple
      - description: "Type of file to download: Metadata (default, JSON), Original,\
          \ Converted, or ReadableView"
        explode: true
        in: query
        name: docType
        required: false
        schema:
          allOf:
          - $ref: "#/components/schemas/DocType"
          default: Metadata
          description: "Type of file to download: Metadata (default, JSON), Original,\
            \ Converted, or ReadableView"
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Flow"
            application/pdf:
              schema:
                format: binary
                type: string
            application/xml:
              schema:
                format: binary
                type: string
          description: OK - Flow file or metadata returned
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Bad request - Invalid input parameters
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Authentication error - Missing or invalid token
        "403":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Forbidden - Insufficient permissions
        "404":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Resource not found
        "429":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Too many requests - Rate limit exceeded
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Internal server error
        "503":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_Error"
          description: Service unavailable - PDP temporarily unavailable
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      summary: Download a flow
      tags:
      - AFNOR PDP/PA - Flow Service
      x-accepts:
      - application/json
      - application/pdf
      - application/xml
  /api/v1/afnor/directory/v1/healthcheck:
    get:
      description: Check Directory Service availability (AFNOR XP Z12-013 compliant)
      operationId: directory_healthcheck_proxy_api_v1_afnor_directory_v1_healthcheck_get
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
          description: OK - Service is operational
        "500":
          description: Internal Server Error.
        "503":
          description: Service unavailable.
      summary: Healthcheck Directory Service
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siren/search:
    post:
      description: Multi-criteria company search.
      operationId: search_siren_proxy_api_v1_afnor_directory_v1_siren_search_post
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_sirenSearchPost200Response"
          description: Returns one or more companies.
        "206":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_sirenSearchPost200Response"
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: SIREN search (or legal unit)
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siren/code-insee:{siren}:
    get:
      description: Returns the details of a company (legal unit) identified by the
        SIREN number passed as a parameter.
      operationId: get_siren_by_code_insee_proxy_api_v1_afnor_directory_v1_siren_code_insee__siren__get
      parameters:
      - description: 9-digit SIREN number (INSEE company identifier)
        explode: false
        in: path
        name: siren
        required: true
        schema:
          description: 9-digit SIREN number (INSEE company identifier)
          title: Siren
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_legalUnitPayloadHistory"
          description: Returns a company.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Consult a siren (legal unit) by SIREN number
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siren/id-instance:{id_instance}:
    get:
      description: Returns the details of a company (legal unit) identified by the
        id-instance passed as a parameter.
      operationId: get_siren_by_id_instance_proxy_api_v1_afnor_directory_v1_siren_id_instance__id_instance__get
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_legalUnitPayloadHistory"
          description: Returns a routing code.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Gets a siren (legal unit) by instance ID
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siret/search:
    post:
      description: Multi-criteria search for facilities.
      operationId: search_siret_proxy_api_v1_afnor_directory_v1_siret_search_post
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_siretSearchPost200Response"
          description: Returns an establishment as defined on a given observation
            date or as defined on the current date if the observation date is not
            specified.
        "206":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_siretSearchPost200Response"
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Search for a SIRET (facility)
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siret/code-insee:{siret}:
    get:
      description: Returns the details of a facility associated to a SIRET.
      operationId: get_siret_by_code_insee_proxy_api_v1_afnor_directory_v1_siret_code_insee__siret__get
      parameters:
      - description: 14-digit SIRET number (INSEE establishment identifier)
        explode: false
        in: path
        name: siret
        required: true
        schema:
          description: 14-digit SIRET number (INSEE establishment identifier)
          title: Siret
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_facilityPayloadHistory"
          description: Returns a facility.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Gets a siret (facility) by SIRET number
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/siret/id-instance:{id_instance}:
    get:
      description: Returns the details of a facility according to an instance-id.
      operationId: get_siret_by_id_instance_proxy_api_v1_afnor_directory_v1_siret_id_instance__id_instance__get
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_facilityPayloadHistory"
          description: Returns a routing code.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Gets a siret (facility) by id-instance
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/routing-code:
    post:
      description: Creating a routing code.
      operationId: create_routing_code_proxy_api_v1_afnor_directory_v1_routing_code_post
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodePost201Response"
          description: A new resource has been created.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Create a routing code
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/routing-code/search:
    post:
      description: Search for routing codes that meet all the criteria passed as parameters
        and return the routing codes in the desired format.
      operationId: search_routing_code_proxy_api_v1_afnor_directory_v1_routing_code_search_post
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodeSearchPost200Response"
          description: Returns the routing code(s) matching the search criteria.
        "206":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodeSearchPost200Response"
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Search for a routing code
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/routing-code/siret:{siret}/code:{routing_identifier}:
    get:
      description: Retrieve the Routing Code data corresponding to the identifier
        passed in parameters.
      operationId: get_routing_code_by_siret_and_code_proxy_api_v1_afnor_directory_v1_routing_code_siret__siret__code__routing_identifier__get
      parameters:
      - description: 14-digit SIRET number (INSEE establishment identifier)
        explode: false
        in: path
        name: siret
        required: true
        schema:
          description: 14-digit SIRET number (INSEE establishment identifier)
          title: Siret
          type: string
        style: simple
      - description: Routing code identifier
        explode: false
        in: path
        name: routing_identifier
        required: true
        schema:
          description: Routing code identifier
          title: Routing Identifier
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodePayloadHistoryLegalUnitFacility"
          description: Returns a routing code.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Get a routing code by SIRET and routing identifier
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/routing-code/id-instance:{id_instance}:
    get:
      description: Retrieve the Routing Code data corresponding to the Instance ID.
      operationId: get_routing_code_by_id_instance_proxy_api_v1_afnor_directory_v1_routing_code_id_instance__id_instance__get
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodePayloadHistoryLegalUnitFacility"
          description: Returns a routing code.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Get a routing code by instance-id.
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
    patch:
      description: Partially update a private routing code.
      operationId: patch_routing_code_proxy_api_v1_afnor_directory_v1_routing_code_id_instance__id_instance__patch
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodePost201Response"
          description: Request successful.
        "206":
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Partially update a private routing code.
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
    put:
      description: Completely update a private routing code.
      operationId: put_routing_code_proxy_api_v1_afnor_directory_v1_routing_code_id_instance__id_instance__put
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_routingCodePost201Response"
          description: Request successful.
        "206":
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Completely update a private routing code.
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/directory-line:
    post:
      description: "Creation of a new directory line for a SIREN, a SIRET or a ROUTING\
        \ CODE."
      operationId: create_directory_line_proxy_api_v1_afnor_directory_v1_directory_line_post
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLinePost201Response"
          description: A new resource has been created.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Creating a directory line
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/directory-line/search:
    post:
      description: Search for directory lines that meet all the criteria passed as
        parameters and return the results in the desired format.
      operationId: search_directory_line_proxy_api_v1_afnor_directory_v1_directory_line_search_post
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLineSearchPost200Response"
          description: returns the directory line(s) matching the search criteria.
        "206":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLineSearchPost200Response"
          description: "Request processed without error, but the volume of information\
            \ returned has been reduced."
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Search for a directory line
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/directory-line/code:{addressing_identifier}:
    get:
      description: Retrieve the data from the directory line corresponding to the
        identifier passed in parameters.
      operationId: get_directory_line_by_code_proxy_api_v1_afnor_directory_v1_directory_line_code__addressing_identifier__get
      parameters:
      - description: "Addressing identifier (SIREN, SIRET or routing code)"
        explode: false
        in: path
        name: addressing_identifier
        required: true
        schema:
          description: "Addressing identifier (SIREN, SIRET or routing code)"
          title: Addressing Identifier
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCode"
          description: Retourns a directory line.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Get a directory line.
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/afnor/directory/v1/directory-line/id-instance:{id_instance}:
    delete:
      description: Delete a directory line.
      operationId: delete_directory_line_proxy_api_v1_afnor_directory_v1_directory_line_id_instance__id_instance__delete
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "204":
          description: OK. The resource has been deleted.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Delete a directory line
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
    get:
      description: Retrieve the data from the directory line corresponding to the
        identifier passed in parameters.
      operationId: get_directory_line_by_id_instance_proxy_api_v1_afnor_directory_v1_directory_line_id_instance__id_instance__get
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCode"
          description: Returns a directory line.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Get a directory line.
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
    patch:
      description: Partially updates a directory line.
      operationId: patch_directory_line_proxy_api_v1_afnor_directory_v1_directory_line_id_instance__id_instance__patch
      parameters:
      - description: AFNOR instance ID (UUID)
        explode: false
        in: path
        name: id_instance
        required: true
        schema:
          description: AFNOR instance ID (UUID)
          title: Id Instance
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AFNOR_directoryLinePost201Response"
          description: Request successful.
        "400":
          description: Bad request. The request is invalid or cannot be completed.
        "401":
          description: Unauthorized. The request requires user authentication.
        "403":
          description: Forbidden. The server understood the request but denied access
            or access is not authorized.
        "404":
          description: Not found. There is no resource at the given URI.
        "408":
          description: Request timeout exceeded.
        "422":
          description: Data validation error.
        "429":
          description: The client has issued too many calls within a given time frame.
        "500":
          description: Internal Server Error.
        "501":
          description: Not implemented.
        "503":
          description: Service unavailable.
      summary: Partially updates a directory line..
      tags:
      - AFNOR PDP/PA - Directory Service
      x-accepts:
      - application/json
  /api/v1/chorus-pro/structures/rechercher:
    post:
      description: |-
        Search for structures (companies, administrations) registered on Chorus Pro.

            **Use cases**:
            - Find the Chorus Pro ID of a structure from its SIRET
            - Check if a structure is registered on Chorus Pro
            - List structures matching criteria

            **Available filters**:
            - Identifier (SIRET, SIREN, etc.)
            - Company name
            - Identifier type
            - Private structures only

            **Typical step**: Called before `submit-invoice` to get the recipient's `id_structure_cpp`.
      operationId: rechercher_structures_api_v1_chorus_pro_structures_rechercher_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SearchStructureRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchStructureResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Search Chorus Pro structures
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/structures/consulter:
    post:
      description: |-
        Retrieves detailed information about a Chorus Pro structure.


            **Returns**:
            - Company name
            - Intra-EU VAT number
            - Contact email
            - **Required parameters**: Indicates if service code and/or engagement number are required to submit an invoice

            **Typical step**: Called after `search-structures` to know which fields are mandatory before submitting an invoice.
      operationId: consulter_structure_api_v1_chorus_pro_structures_consulter_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GetStructureRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetStructureResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Consult structure details
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/structures/{id_structure_cpp}/services:
    get:
      description: |-
        Retrieves the list of active services for a public structure.

            **Use cases**:
            - List available services for an administration
            - Verify that a service code exists before submitting an invoice

            **Returns**:
            - List of services with their code, label, and status (active/inactive)
      operationId: lister_services_structure_api_v1_chorus_pro_structures__id_structure_cpp__services_get
      parameters:
      - description: Chorus Pro structure ID (idStructureCPP)
        explode: false
        in: path
        name: id_structure_cpp
        required: true
        schema:
          description: Chorus Pro structure ID (idStructureCPP)
          title: Id Structure Cpp
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchServicesResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: List structure services
      tags:
      - Chorus Pro
      x-accepts:
      - application/json
  /api/v1/chorus-pro/structures/obtenir-id-depuis-siret:
    post:
      description: |-
        **Convenient utility** to get a structure's Chorus Pro ID from its SIRET.


            This wrapper function combines:
            1. Searching for the structure by SIRET
            2. Extracting the `id_structure_cpp` if a single structure is found

            **Returns**:
            - `id_structure_cpp`: Chorus Pro ID (0 if not found or multiple results)
            - `designation_structure`: Structure name (if found)
            - `message`: Explanatory message

            **Use cases**:
            - Shortcut to directly get the Chorus Pro ID before submitting an invoice
            - Simplified alternative to `search-structures` + manual ID extraction

            **Note**: If multiple structures match the SIRET (rare), returns 0 and an error message.
      operationId: obtenir_id_chorus_pro_depuis_siret_api_v1_chorus_pro_structures_obtenir_id_depuis_siret_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GetChorusProIdRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetChorusProIdResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: "Utility: Get Chorus Pro ID from SIRET"
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/soumettre:
    post:
      description: |-
        Submits an electronic invoice to a public structure via Chorus Pro.


            **Complete workflow**:
            1. **Upload the Factur-X PDF** via `/transverses/ajouter-fichier` ‚Üí retrieve `pieceJointeId`
            2. **Get the structure ID** via `/structures/rechercher` or `/structures/obtenir-id-depuis-siret`
            3. **Check mandatory parameters** via `/structures/consulter`
            4. **Submit the invoice** with the `piece_jointe_principale_id` obtained in step 1

            **Prerequisites**:
            1. Have the recipient's `id_structure_cpp` (via `/structures/rechercher`)
            2. Know the mandatory parameters (via `/structures/consulter`):
               - Service code if `code_service_doit_etre_renseigne=true`
               - Engagement number if `numero_ej_doit_etre_renseigne=true`
            3. Have uploaded the Factur-X PDF (via `/transverses/ajouter-fichier`)

            **Expected format**:
            - `piece_jointe_principale_id`: ID returned by `/transverses/ajouter-fichier`
            - Amounts: Strings with 2 decimals (e.g., "1250.50")
            - Dates: ISO 8601 format (YYYY-MM-DD)

            **Returns**:
            - `identifiant_facture_cpp`: Chorus Pro ID of the created invoice
            - `numero_flux_depot`: Deposit tracking number

            **Possible statuses after submission**:
            - SOUMISE: Pending validation
            - VALIDEE: Validated by recipient
            - REJETEE: Rejected (data error or business refusal)
            - SUSPENDUE: Pending additional information

            **Note**: Use `/factures/consulter` to track status changes.
      operationId: soumettre_facture_api_v1_chorus_pro_factures_soumettre_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitInvoiceRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitInvoiceResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit an invoice to Chorus Pro
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/consulter:
    post:
      description: |-
        Retrieves the information and current status of an invoice submitted to Chorus Pro.

            **Returns**:
            - Invoice number and date
            - Total gross amount
            - **Current status**: SOUMISE, VALIDEE, REJETEE, SUSPENDUE, MANDATEE, MISE_EN_PAIEMENT, etc.
            - Recipient structure

            **Use cases**:
            - Track the processing progress of an invoice
            - Check if an invoice has been validated or rejected
            - Get the payment date

            **Polling**: Call this endpoint regularly to track status changes.
      operationId: consulter_facture_api_v1_chorus_pro_factures_consulter_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GetInvoiceRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetInvoiceResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Consult invoice status
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/rechercher-fournisseur:
    post:
      description: |-
        Search invoices issued by the connected supplier.

            **Available filters**:
            - Invoice number
            - Dates (start/end)
            - Status
            - Recipient structure
            - Amount

            **Use cases**:
            - Track issued invoices
            - Verify statuses
            - Export for accounting
      operationId: rechercher_factures_fournisseur_api_v1_chorus_pro_factures_rechercher_fournisseur_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: {}
              title: Payload
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Search issued invoices (Supplier)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/rechercher-destinataire:
    post:
      description: |-
        Search invoices received by the connected recipient.

            **Filters**:
            - Downloaded / not downloaded
            - Reception dates
            - Status (MISE_A_DISPOSITION, SUSPENDUE, etc.)
            - Supplier

            **Useful indicator**: `factureTelechargeeParDestinataire` indicates whether the invoice has already been downloaded.
      operationId: rechercher_factures_destinataire_api_v1_chorus_pro_factures_rechercher_destinataire_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Search received invoices (Recipient)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/telecharger-groupe:
    post:
      description: |-
        Download one or more invoices (max 10 recommended) with their attachments.

            **Available formats**:
            - PDF: PDF file only
            - XML: XML file only
            - ZIP: Archive containing PDF + XML + attachments

            **Maximum size**: 120 MB per download

            **Example payload**:
            ```json
            {
              "listeIdentifiantsFactureCPP": [12345, 12346],
              "inclurePiecesJointes": true,
              "formatFichier": "ZIP"
            }
            ```

            **Returns**: The file is base64-encoded in the `fichierBase64` field.

            **Note**: The `factureTelechargeeParDestinataire` flag is automatically updated.
      operationId: telecharger_groupe_factures_api_v1_chorus_pro_factures_telecharger_groupe_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Download a group of invoices
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/traiter-facture-recue:
    post:
      description: |-
        Change the status of a received invoice.

            **Possible statuses**:
            - MISE_A_DISPOSITION: Invoice accepted
            - SUSPENDUE: Pending additional information (reason required)
            - REJETEE: Invoice refused (reason required)
            - MANDATEE: Invoice mandated
            - MISE_EN_PAIEMENT: Invoice being paid
            - COMPTABILISEE: Invoice accounted
            - MISE_A_DISPOSITION_COMPTABLE: Made available to accounting
            - A_RECYCLER: To be recycled
            - COMPLETEE: Completed
            - SERVICE-FAIT: Service rendered
            - PRISE_EN_COMPTE_DESTINATAIRE: Acknowledged
            - TRANSMISE_MOA: Transmitted to MOA

            **Example payload**:
            ```json
            {
              "identifiantFactureCPP": 12345,
              "nouveauStatut": "REJETEE",
              "motifRejet": "Duplicate invoice",
              "commentaire": "Invoice already received under reference ABC123"
            }
            ```

            **Rules**:
            - A reason is **required** for SUSPENDUE and REJETEE
            - Only certain statuses are allowed depending on the invoice's current status
      operationId: traiter_facture_recue_api_v1_chorus_pro_factures_traiter_facture_recue_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Process a received invoice (Recipient)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/recycler:
    post:
      description: |-
        Recycle an invoice with A_RECYCLER status by modifying routing data.

            **Required status**: A_RECYCLER

            **Modifiable fields**:
            - Recipient (`idStructureCPP`)
            - Service code
            - Engagement number

            **Use cases**:
            - Wrong recipient
            - Change of billing service
            - Update engagement number

            **Example payload**:
            ```json
            {
              "identifiantFactureCPP": 12345,
              "idStructureCPP": 67890,
              "codeService": "SERVICE_01",
              "numeroEngagement": "ENG2024001"
            }
            ```

            **Note**: The invoice keeps its number and amounts, only routing fields change.
      operationId: recycler_facture_api_v1_chorus_pro_factures_recycler_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Recycle an invoice (Supplier)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/completer:
    post:
      description: |-
        Complete a SUSPENDUE status invoice by adding attachments or a comment.

            **Required status**: SUSPENDUE

            **Possible actions**:
            - Add attachments (supporting documents, purchase orders, etc.)
            - Modify comment

            **Example payload**:
            ```json
            {
              "identifiantFactureCPP": 12345,
              "commentaire": "Here are the requested documents",
              "listePiecesJointes": [
                {
                  "pieceJointeIdFichier": 98765,
                  "pieceJointeNom": "purchase_order.pdf"
                }
              ]
            }
            ```

            **Note**: Attachments must first be uploaded via `/transverses/ajouter-fichier`.

            **After completion**: The invoice returns to MISE_A_DISPOSITION status.
      operationId: completer_facture_api_v1_chorus_pro_factures_completer_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Complete a suspended invoice (Supplier)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/valideur/rechercher:
    post:
      description: |-
        Search invoices pending validation by the connected validator.

            **Role**: Validator in the internal validation workflow.

            **Filters**: Dates, structure, service, etc.
      operationId: valideur_rechercher_factures_api_v1_chorus_pro_factures_valideur_rechercher_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Search invoices to validate (Validator)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/valideur/consulter:
    post:
      description: |-
        Retrieves detailed information about an invoice for validators.

        **Use case**: Called by validators (public sector) to consult invoice details
        before approving or rejecting it.

        **Required payload**:
        ```json
        {
          "idFacture": 123456789
        }
        ```

        **Returns**: Complete invoice details including amounts, dates, attachments, and current status.
      operationId: valideur_consulter_facture_api_v1_chorus_pro_factures_valideur_consulter_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Consult an invoice (Validator)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/factures/valideur/traiter:
    post:
      description: |-
        Validate or reject an invoice pending validation.

            **Actions**:
            - Validate: The invoice moves to the next status in the workflow
            - Reject: The invoice is rejected (reason required)
      operationId: valideur_traiter_facture_api_v1_chorus_pro_factures_valideur_traiter_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate or reject an invoice (Validator)
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/chorus-pro/transverses/ajouter-fichier:
    post:
      description: |-
        Add an attachment to the current user account.

            **Max size**: 10 MB per file

            **Example payload**:
            ```json
            {
              "pieceJointeFichier": "JVBERi0xLjQKJeLjz9MKNSAwIG9iago8P...",
              "pieceJointeNom": "purchase_order.pdf",
              "pieceJointeTypeMime": "application/pdf",
              "pieceJointeExtension": "PDF"
            }
            ```

            **Returns**: The attachment ID (`pieceJointeIdFichier`) to use in `/factures/completer`.

            **Accepted extensions**: PDF, JPG, PNG, ZIP, XML, etc.
      operationId: ajouter_fichier_api_v1_chorus_pro_transverses_ajouter_fichier_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              title: Payload
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Add an attachment
      tags:
      - Chorus Pro
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/verification/verify:
    post:
      description: |-
        Verifies compliance between the PDF and its embedded Factur-X XML.

        **IMPORTANT**: Only Factur-X PDFs (with embedded XML) are accepted.
        PDFs without Factur-X XML will be rejected with a 400 error.

        This synchronous version uses only native PDF extraction (pdfplumber).
        For image PDFs requiring OCR, use the `/verify-async` endpoint.

        **Verification principle (Factur-X 1.08):**
        - Principle #2: XML can only contain info present in the PDF
        - Principle #4: All XML info must be present and compliant in the PDF

        **Verified fields:**
        - Identification: BT-1 (invoice #), BT-2 (date), BT-3 (type), BT-5 (currency), BT-23 (framework)
        - Seller: BT-27 (name), BT-29 (SIRET), BT-30 (SIREN), BT-31 (VAT)
        - Buyer: BT-44 (name), BT-46 (SIRET), BT-47 (SIREN), BT-48 (VAT)
        - Amounts: BT-109 (excl. tax), BT-110 (VAT), BT-112 (incl. tax), BT-115 (amount due)
        - VAT breakdown: BT-116, BT-117, BT-118, BT-119
        - Invoice lines: BT-153, BT-129, BT-146, BT-131
        - Mandatory notes: PMT, PMD, AAB
        - Rule BR-FR-09: SIRET/SIREN consistency
      operationId: verify_pdf_sync_api_v1_verification_verify_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_verify_pdf_sync_api_v1_verification_verify_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VerificationSuccessResponse"
          description: Verification successful
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
          description: "Verification error (non Factur-X PDF, invalid, etc.)"
        "413":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
          description: PDF too large or too many pages
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Verify PDF/XML Factur-X compliance (synchronous)
      tags:
      - PDF/XML Verification
      - PDF/XML Verification
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/verification/verify-async:
    post:
      description: |-
        Verifies PDF/XML Factur-X compliance asynchronously.

        **IMPORTANT**: Only Factur-X PDFs (with embedded XML) are accepted.
        PDFs without Factur-X XML will return a `NOT_FACTURX` error in the result.

        This version uses a Celery task and can call the OCR service
        if the PDF is an image or if `force_ocr=true`.

        **Returns immediately** a task ID. Use `/verify-async/{task_id}/status`
        to retrieve the result.

        **Verification principle (Factur-X 1.08):**
        - Principle #2: XML can only contain info present in the PDF
        - Principle #4: All XML info must be present and compliant in the PDF

        **Verified fields:**
        - Identification: BT-1 (invoice #), BT-2 (date), BT-3 (type), BT-5 (currency), BT-23 (framework)
        - Seller: BT-27 (name), BT-29 (SIRET), BT-30 (SIREN), BT-31 (VAT)
        - Buyer: BT-44 (name), BT-46 (SIRET), BT-47 (SIREN), BT-48 (VAT)
        - Amounts: BT-109 (excl. tax), BT-110 (VAT), BT-112 (incl. tax), BT-115 (amount due)
        - VAT breakdown: BT-116, BT-117, BT-118, BT-119
        - Invoice lines: BT-153, BT-129, BT-146, BT-131
        - Mandatory notes: PMT, PMD, AAB
        - Rule BR-FR-09: SIRET/SIREN consistency

        **Advantages over synchronous version:**
        - OCR support for image PDFs (via DocTR service)
        - Longer timeout for large documents
        - Doesn't block the server

        ## Webhook notification (recommended)

        Instead of polling, you can receive a webhook notification when verification completes:

        ```
        callback_url=https://your-server.com/webhook
        ```

        The webhook will POST a JSON payload with:
        - `event_type`: `verification.completed` or `verification.failed`
        - `data.is_compliant`: Whether the PDF/XML are consistent
        - `data.compliance_score`: Compliance score (0-1)
        - `X-Webhook-Signature` header for HMAC verification
      operationId: verify_pdf_async_api_v1_verification_verify_async_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_verify_pdf_async_api_v1_verification_verify_async_post"
        required: true
      responses:
        "202":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskResponse"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Verify PDF/XML Factur-X compliance (asynchronous)
      tags:
      - PDF/XML Verification
      - PDF/XML Verification
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/verification/verify-async/{task_id}/status:
    get:
      description: |-
        Retrieves the status and result of an asynchronous verification task.

        **Possible statuses:**
        - `PENDING`: Task waiting in queue
        - `STARTED`: Task currently running
        - `SUCCESS`: Task completed successfully (see `result`)
        - `FAILURE`: System error (unhandled exception)

        **Note:** The `result.status` field can be "SUCCESS" or "ERROR"
        independently of Celery status (which will always be SUCCESS if the task ran).
      operationId: get_verification_status_api_v1_verification_verify_async__task_id__status_get
      parameters:
      - description: Celery task ID returned by /verify-async endpoint
        explode: false
        in: path
        name: task_id
        required: true
        schema:
          description: Celery task ID returned by /verify-async endpoint
          title: Task Id
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AsyncTaskStatus"
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Get status of an asynchronous verification
      tags:
      - PDF/XML Verification
      - PDF/XML Verification
      x-accepts:
      - application/json
  /api/v1/convert/{conversion_id}/resume:
    post:
      description: |-
        Reprend une conversion apr√®s compl√©tion des donn√©es manquantes ou correction des erreurs.

        L'extraction OCR est conserv√©e, les donn√©es sont mises √† jour avec les corrections,
        puis une nouvelle validation Schematron est effectu√©e.
      operationId: resume_conversion_api_v1_convert__conversion_id__resume_post
      parameters:
      - description: Conversion ID returned by POST /convert (UUID format)
        explode: false
        in: path
        name: conversion_id
        required: true
        schema:
          description: Conversion ID returned by POST /convert (UUID format)
          title: Conversion Id
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConvertResumeRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConvertSuccessResponse"
          description: Successful Response
        "404":
          description: Conversion non trouv√©e ou expir√©e
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConvertValidationFailedResponse"
          description: Validation toujours en √©chec
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Reprendre une conversion avec corrections
      tags:
      - Document Conversion
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/convert/{conversion_id}/status:
    get:
      description: Retourne le statut actuel d'une conversion asynchrone.
      operationId: get_conversion_status_api_v1_convert__conversion_id__status_get
      parameters:
      - description: Conversion ID returned by POST /convert (UUID format)
        explode: false
        in: path
        name: conversion_id
        required: true
        schema:
          description: Conversion ID returned by POST /convert (UUID format)
          title: Conversion Id
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                additionalProperties: {}
                title: Response Get Conversion Status Api V1 Convert  Conversion Id  Status
                  Get
          description: Successful Response
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: V√©rifier le statut d'une conversion
      tags:
      - Document Conversion
      x-accepts:
      - application/json
  /api/v1/convert/{conversion_id}/download/{filename}:
    get:
      description: |-
        T√©l√©charge le fichier Factur-X PDF ou XML g√©n√©r√©.

        ## Fichiers disponibles

        - `facturx.pdf` : PDF/A-3 avec XML embarqu√©
        - `facturx.xml` : XML CII seul (Cross Industry Invoice)

        Les fichiers sont disponibles pendant 24 heures apr√®s g√©n√©ration.
      operationId: download_file_api_v1_convert__conversion_id__download__filename__get
      parameters:
      - description: Conversion ID returned by POST /convert (UUID format)
        explode: false
        in: path
        name: conversion_id
        required: true
        schema:
          description: Conversion ID returned by POST /convert (UUID format)
          title: Conversion Id
          type: string
        style: simple
      - description: "File to download: 'facturx.pdf' or 'facturx.xml'"
        explode: false
        in: path
        name: filename
        required: true
        schema:
          description: "File to download: 'facturx.pdf' or 'facturx.xml'"
          title: Filename
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Fichier t√©l√©charg√©
        "404":
          description: Fichier non trouv√© ou expir√©
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: T√©l√©charger un fichier g√©n√©r√©
      tags:
      - Document Conversion
      x-accepts:
      - application/json
  /api/v1/convert/async:
    post:
      description: |-
        Lance une conversion asynchrone via Celery.

        ## Workflow

        1. **Upload** : Le document est envoy√© en multipart/form-data
        2. **Task Celery** : La t√¢che est mise en file d'attente
        3. **Callback** : Notification par webhook √† la fin

        ## R√©ponses possibles

        - **202** : T√¢che accept√©e, en cours de traitement
        - **400** : Fichier invalide
      operationId: convert_document_async_api_v1_convert_async_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_convert_document_async_api_v1_convert_async_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: Successful Response
        "202":
          description: T√¢che accept√©e
        "400":
          description: Fichier invalide
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Convertir un document en Factur-X (mode asynchrone)
      tags:
      - Document Conversion
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/ereporting/generate:
    post:
      description: |-
        Generate e-reporting XML (FRR format) from structured data.

        Supports all four flow types:
        - **10.1**: Unitary B2B international transactions (use `invoices` field)
        - **10.2**: Payments for B2B international invoices (use `invoicePayments` field)
        - **10.3**: Aggregated B2C transactions (use `transactions` field)
        - **10.4**: Aggregated B2C payments (use `aggregatedPayments` field)

        The generated XML is compliant with DGFIP specifications and ready
        for submission to a PA (Plateforme Agr√©√©e).
      operationId: generate_ereporting_api_v1_ereporting_generate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEReportingRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenerateEReportingResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Generate e-reporting XML
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/generate/download:
    post:
      description: Generate e-reporting XML and return as downloadable file.
      operationId: generate_ereporting_download_api_v1_ereporting_generate_download_post
      parameters:
      - description: "Output filename (default: ereporting_{reportId}.xml)"
        explode: true
        in: query
        name: filename
        required: false
        schema:
          nullable: true
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEReportingRequest"
        required: true
      responses:
        "200":
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Generate and download e-reporting XML
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/validate:
    post:
      description: |-
        Validate e-reporting data without generating or submitting.

        Performs:
        - Schema validation
        - Business rule validation (correct flux type vs data)
        - Data consistency checks (tax totals, dates, etc.)

        Returns validation errors and warnings.
      operationId: validate_ereporting_api_v1_ereporting_validate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ValidateEReportingRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidateEReportingResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate e-reporting data
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/submit:
    post:
      description: |-
        Generate and submit e-reporting to a PA (Plateforme Agr√©√©e).

        Authentication strategies (same as invoices):
        1. **JWT with client_uid** (recommended): PDP credentials fetched from backend
        2. **Zero-storage**: Provide pdpFlowServiceUrl, pdpClientId, pdpClientSecret in request

        The e-reporting is submitted using the AFNOR Flow Service API
        with syntax=FRR (FRench Reporting).
      operationId: submit_ereporting_api_v1_ereporting_submit_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitEReportingRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitEReportingResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit e-reporting to PA/PDP
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/flow-types:
    get:
      description: Returns the list of supported e-reporting flow types with descriptions.
      operationId: list_flow_types_api_v1_ereporting_flow_types_get
      responses:
        "200":
          content:
            application/json:
              schema:
                additionalProperties: {}
                title: Response List Flow Types Api V1 Ereporting Flow Types Get
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
      summary: List available flow types
      tags:
      - E-Reporting
      x-accepts:
      - application/json
  /api/v1/ereporting/category-codes:
    get:
      description: |-
        Returns the list of valid CategoryCode values (TT-81) for e-reporting transactions.

        Source: Annexe 6 - Format s√©mantique FE e-reporting v1.9
      operationId: list_category_codes_api_v1_ereporting_category_codes_get
      responses:
        "200":
          content:
            application/json:
              schema:
                additionalProperties: {}
                title: Response List Category Codes Api V1 Ereporting Category Codes
                  Get
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
      summary: List PPF-compliant category codes
      tags:
      - E-Reporting
      x-accepts:
      - application/json
  /api/v1/ereporting/submit-xml:
    post:
      description: |-
        Submit a pre-generated e-reporting XML file directly to a PA/PDP.

        This endpoint is designed for clients who generate their own PPF-compliant XML
        and only need FactPulse for the PDP submission.

        **Process:**
        1. Validates the XML against PPF XSD schemas
        2. Determines the appropriate AFNOR FlowType
        3. Submits to the configured PDP/PA
        4. Returns the flowId for tracking

        **Authentication:** Same strategies as /submit endpoint (JWT or zero-storage credentials).
      operationId: submit_xml_ereporting_api_v1_ereporting_submit_xml_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_submit_xml_ereporting_api_v1_ereporting_submit_xml_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitEReportingResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit pre-generated e-reporting XML
      tags:
      - E-Reporting
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/ereporting/validate-xml:
    post:
      description: |-
        Validates an e-reporting XML file against:

        1. **XSD schemas**: Official PPF e-reporting XSD (structure, types, cardinality)
        2. **Business rules**: ISO codes and enum validation
           - Currency codes (ISO 4217: EUR, USD, GBP, etc.)
           - Country codes (ISO 3166-1 alpha-2: FR, DE, US, etc.)
           - Scheme IDs (0009=SIRET, 0002=SIREN, etc.)
           - Role codes (UNCL 3035: SE=Seller, BY=Buyer, WK=Working party, etc.)

        Returns validation status and detailed error messages if invalid.
      operationId: validate_xml_ereporting_api_v1_ereporting_validate_xml_post
      parameters:
      - description: "Also validate business rules (ISO codes, enums)"
        explode: true
        in: query
        name: validate_business_rules
        required: false
        schema:
          default: true
          description: "Also validate business rules (ISO codes, enums)"
          title: Validate Business Rules
          type: boolean
        style: form
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/Body_validate_xml_ereporting_api_v1_ereporting_validate_xml_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                additionalProperties: {}
                title: Response Validate Xml Ereporting Api V1 Ereporting Validate
                  Xml Post
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate e-reporting XML against PPF XSD schemas and business rules
      tags:
      - E-Reporting
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
  /api/v1/ereporting/generate-aggregated:
    post:
      description: |-
        Generate a PPF-compliant aggregated e-reporting XML containing multiple flux types in a single file.

        This endpoint creates a Report XML that can contain:
        - **TransactionsReport**: Invoice (10.1) AND/OR Transactions (10.3)
        - **PaymentsReport**: Invoice payments (10.2) AND/OR Transaction payments (10.4)

        The AFNOR FlowType is automatically determined based on content:
        - Single type ‚Üí Specific FlowType (e.g., AggregatedCustomerTransactionReport)
        - Multiple types ‚Üí MultiFlowReport

        **CategoryCode (TT-81)** must use PPF-compliant values:
        - TLB1: Goods deliveries
        - TPS1: Service provisions
        - TNT1: Non-taxed transactions
        - TMA1: Mixed transactions
      operationId: generate_aggregated_ereporting_api_v1_ereporting_generate_aggregated_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAggregatedReportRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenerateAggregatedReportResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Generate aggregated e-reporting XML (PPF-compliant)
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/validate-aggregated:
    post:
      description: Validates aggregated e-reporting data without generating XML.
      operationId: validate_aggregated_ereporting_api_v1_ereporting_validate_aggregated_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAggregatedReportRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                additionalProperties: {}
                title: Response Validate Aggregated Ereporting Api V1 Ereporting Validate
                  Aggregated Post
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Validate aggregated e-reporting data
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/ereporting/submit-aggregated:
    post:
      description: |-
        Generate and submit a PPF-compliant aggregated e-reporting to a PA/PDP.

        Combines generation and submission in a single call.
        Automatically determines the AFNOR FlowType based on content.
      operationId: submit_aggregated_ereporting_api_v1_ereporting_submit_aggregated_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubmitAggregatedReportRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitEReportingResponse"
          description: Successful Response
        "400":
          description: Invalid request data
        "422":
          description: Validation error
        "500":
          description: Internal server error
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Submit aggregated e-reporting to PA/PDP
      tags:
      - E-Reporting
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/cdar/generate:
    post:
      description: |-
        G√©n√®re un message XML CDAR (Cross Domain Acknowledgement and Response)
        pour communiquer le statut d'une facture.

        **Types de messages:**
        - **23** (Traitement): Message de cycle de vie standard
        - **305** (Transmission): Message de transmission entre plateformes

        **R√®gles m√©tier:**
        - BR-FR-CDV-14: Le statut 212 (ENCAISSEE) requiert un montant encaiss√©
        - BR-FR-CDV-15: Les statuts 206/207/208/210/213/501 requi√®rent un code motif
      operationId: generate_cdar_api_v1_cdar_generate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCDARRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GenerateCDARResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: G√©n√©rer un message CDAR
      tags:
      - CDAR - Cycle de Vie
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/cdar/validate:
    post:
      description: |-
        Valide les donn√©es CDAR sans g√©n√©rer le XML.

        V√©rifie:
        - Les formats des champs (SIREN, dates, etc.)
        - Les codes enums (statut, motif, action)
        - Les r√®gles m√©tier BR-FR-CDV-*
      operationId: validate_cdar_api_v1_cdar_validate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ValidateCDARRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidateCDARResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Valider des donn√©es CDAR
      tags:
      - CDAR - Cycle de Vie
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/cdar/submit:
    post:
      description: |-
        G√©n√®re un message CDAR et le soumet √† la plateforme PA/PDP.

        N√©cessite une authentification AFNOR valide.

        **Types de flux (flowType):**
        - `CustomerInvoiceLC`: Cycle de vie c√¥t√© client (acheteur)
        - `SupplierInvoiceLC`: Cycle de vie c√¥t√© fournisseur (vendeur)
      operationId: submit_cdar_api_v1_cdar_submit_post
      parameters:
      - explode: true
        in: query
        name: user_id
        required: true
        schema:
          title: User Id
          type: integer
        style: form
      - explode: true
        in: query
        name: jwt_token
        required: false
        schema:
          nullable: true
          type: string
        style: form
      - explode: true
        in: query
        name: client_uid
        required: false
        schema:
          nullable: true
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Body_submit_cdar_api_v1_cdar_submit_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitCDARResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: G√©n√©rer et soumettre un message CDAR
      tags:
      - CDAR - Cycle de Vie
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/cdar/submit-xml:
    post:
      description: |-
        Soumet un message XML CDAR pr√©-g√©n√©r√© √† la plateforme PA/PDP.

        Utile pour soumettre des XML g√©n√©r√©s par d'autres syst√®mes.
      operationId: submit_cdar_xml_api_v1_cdar_submit_xml_post
      parameters:
      - explode: true
        in: query
        name: user_id
        required: true
        schema:
          title: User Id
          type: integer
        style: form
      - explode: true
        in: query
        name: jwt_token
        required: false
        schema:
          nullable: true
          type: string
        style: form
      - explode: true
        in: query
        name: client_uid
        required: false
        schema:
          nullable: true
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Body_submit_cdar_xml_api_v1_cdar_submit_xml_post"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubmitCDARResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Invalid or missing JWT token
              schema:
                $ref: "#/components/schemas/APIError"
          description: Authentication required - Invalid or missing JWT token
      security:
      - HTTPBearer: []
      summary: Soumettre un XML CDAR pr√©-g√©n√©r√©
      tags:
      - CDAR - Cycle de Vie
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/v1/cdar/status-codes:
    get:
      description: |-
        Retourne la liste compl√®te des codes statut de facture (BR-FR-CDV-CL-06).

        Ces codes indiquent l'√©tat du cycle de vie d'une facture.
      operationId: get_status_codes_api_v1_cdar_status_codes_get
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatusCodesResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
      summary: Liste des codes statut CDAR
      tags:
      - CDAR - Cycle de Vie
      x-accepts:
      - application/json
  /api/v1/cdar/reason-codes:
    get:
      description: |-
        Retourne la liste compl√®te des codes motif de statut (BR-FR-CDV-CL-09).

        Ces codes expliquent la raison d'un statut particulier.
      operationId: get_reason_codes_api_v1_cdar_reason_codes_get
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReasonCodesResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
      summary: Liste des codes motif CDAR
      tags:
      - CDAR - Cycle de Vie
      x-accepts:
      - application/json
  /api/v1/cdar/action-codes:
    get:
      description: |-
        Retourne la liste compl√®te des codes action (BR-FR-CDV-CL-10).

        Ces codes indiquent l'action demand√©e sur la facture.
      operationId: get_action_codes_api_v1_cdar_action_codes_get
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActionCodesResponse"
          description: Successful Response
        "400":
          description: Requ√™te invalide
        "422":
          description: Erreur de validation
        "500":
          description: Erreur serveur
      summary: Liste des codes action CDAR
      tags:
      - CDAR - Cycle de Vie
      x-accepts:
      - application/json
  /api/v1/download/{download_id}:
    get:
      description: |-
        Download a file stored temporarily after asynchronous processing.

        **Usage**:
        - This URL is provided in webhook notifications when using `webhook_mode: "download_url"`
        - Files are automatically deleted after 1 hour
        - Each file can only be downloaded until it expires

        **Security**:
        - Requires a valid JWT token
        - Only the user who initiated the task can download the file
      operationId: download_file_api_v1_download__download_id__get
      parameters:
      - explode: false
        in: path
        name: download_id
        required: true
        schema:
          title: Download Id
          type: string
        style: simple
      - description: "If true, delete the file after download (one-time download)"
        explode: true
        in: query
        name: delete_after
        required: false
        schema:
          default: false
          description: "If true, delete the file after download (one-time download)"
          title: Delete After
          type: boolean
        style: form
      responses:
        "200":
          content:
            application/json:
              schema: {}
            application/pdf: {}
            application/xml: {}
            application/octet-stream: {}
          description: File content
        "401":
          content:
            application/json:
              example:
                errorCode: AUTHENTICATION_REQUIRED
                errorMessage: Valid JWT token required
          description: Authentication required
        "403":
          content:
            application/json:
              example:
                errorCode: ACCESS_DENIED
                errorMessage: You do not have permission to download this file
          description: Access denied - file belongs to another user
        "404":
          content:
            application/json:
              example:
                errorCode: FILE_NOT_FOUND
                errorMessage: File not found or has expired. Files are available for
                  1 hour after generation.
          description: File not found or expired
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
      - HTTPBearer: []
      summary: Download a temporary file
      tags:
      - Downloads
      - Downloads
      x-accepts:
      - application/json
      - application/octet-stream
      - application/pdf
      - application/xml
    head:
      description: |-
        Check if a temporary file exists and get its metadata without downloading.

        Useful for:
        - Verifying a download URL is still valid
        - Getting file size before downloading
        - Checking expiration time

        **Security**: Requires authentication, only file owner can check.
      operationId: check_file_api_v1_download__download_id__head
      parameters:
      - explode: false
        in: path
        name: download_id
        required: true
        schema:
          title: Download Id
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: File exists
        "401":
          description: Authentication required
        "403":
          description: Access denied
        "404":
          description: File not found or expired
        "422":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
          description: Validation Error
      security:
      - HTTPBearer: []
      summary: Check if a file exists
      tags:
      - Downloads
      - Downloads
      x-accepts:
      - application/json
  /:
    get:
      description: |-
        Health check endpoint to verify the API is responding.

        Useful for:
        - Availability monitoring
        - Integration tests
        - Load balancers
      operationId: root__get
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: API is operational
        "500":
          description: Internal server error
      summary: Check API status
      tags:
      - Health
      x-accepts:
      - application/json
  /healthcheck:
    get:
      description: |-
        Healthcheck endpoint for Docker and load balancers.

        Useful for:
        - Docker healthcheck
        - Kubernetes liveness/readiness probes
        - Load balancers (Nginx, HAProxy)
        - Availability monitoring
        - Zero downtime deployment

        Returns a 200 code if the API is operational.
      operationId: healthcheck_healthcheck_get
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: API is healthy
        "500":
          description: Internal server error
      summary: Docker healthcheck endpoint
      tags:
      - Health
      x-accepts:
      - application/json
  /api/v1/me:
    get:
      description: |-
        Returns information about the authenticated user.

        This endpoint allows you to:
        - Verify that authentication works
        - Get connected account details
        - Test JWT token validity
        - Check your consumption quota

        **Requires valid authentication.**
      operationId: get_user_info_api_v1_me_get
      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: User information
        "401":
          content:
            application/json:
              example:
                detail: Token expired or invalid
          description: Missing or invalid JWT token
      security:
      - HTTPBearer: []
      summary: Get current user information
      tags:
      - User
      x-accepts:
      - application/json
components:
  schemas:
    AFNORCredentials:
      description: |-
        Optional AFNOR PDP credentials.

        **MODE 1 - JWT retrieval (recommended):**
        Do not provide this `credentials` field in the payload.
        PDP credentials will be automatically retrieved via client_uid from JWT (0-trust).

        **MODE 2 - Credentials in payload (zero-storage):**
        Provide all required fields below.
        Useful for tests or third-party integrations.
      example:
        clientId: my_pdp_client_id
        clientSecret: my_pdp_secret
        flowServiceUrl: https://api-pdp.example.com/flow/v1
      properties:
        clientId:
          nullable: true
          type: string
        clientSecret:
          nullable: true
          type: string
        flowServiceUrl:
          nullable: true
          type: string
      title: AFNORCredentials
    AFNORDestination:
      description: Specific configuration for AFNOR PDP destination.
      properties:
        type:
          default: afnor
          enum:
          - afnor
          title: Type
          type: string
        credentials:
          allOf:
          - $ref: "#/components/schemas/AFNORCredentials"
          nullable: true
        flowSyntax:
          allOf:
          - $ref: "#/components/schemas/FlowSyntax"
          default: Factur-X
          description: Flow syntax (AFNOR XP Z12-013)
        trackingId:
          nullable: true
          type: string
        processingRule:
          allOf:
          - $ref: "#/components/schemas/ProcessingRule"
          nullable: true
      title: AFNORDestination
    AFNORResult:
      description: Result of submission to AFNOR PDP.
      properties:
        flowId:
          description: Submitted flow identifier
          title: Flowid
          type: string
        trackingId:
          nullable: true
          type: string
        sha256:
          description: SHA-256 hash of submitted file
          title: Sha256
          type: string
        flowSyntax:
          description: Flow syntax
          title: Flowsyntax
          type: string
        flowProfile:
          nullable: true
          type: string
        flowType:
          nullable: true
          type: string
        processingRule:
          nullable: true
          type: string
        processingRuleSource:
          nullable: true
          type: string
      required:
      - flowId
      - flowSyntax
      - sha256
      title: AFNORResult
    APIError:
      description: |-
        Standardized API error (aligned with AFNOR Error schema).

        Unified format for all HTTP error responses.
      example:
        details:
        - code: SCHEMATRON_BR_FR_01
          item: BR-FR-01
          level: Error
          reason: Supplier SIRET is mandatory for French invoices
          source: schematron
        errorCode: VALIDATION_FAILED
        errorMessage: Factur-X validation failed
      properties:
        errorCode:
          description: Alphanumeric code precisely identifying the error
          title: Errorcode
          type: string
        errorMessage:
          description: Message describing the error (not intended for end user)
          title: Errormessage
          type: string
        details:
          items:
            $ref: "#/components/schemas/ValidationErrorDetail"
          nullable: true
          type: array
      required:
      - errorCode
      - errorMessage
      title: APIError
    APIProfile:
      description: |-
        Factur-X profile for API responses.

        Note: Simplified compared to utils/facturx.ProfilFacturX which
        also contains XSLT configurations. This one is for the API.
      enum:
      - MINIMUM
      - BASICWL
      - BASIC
      - EN16931
      - EXTENDED
      title: APIProfile
      type: string
    ActionCodeInfo:
      description: Information sur un code action.
      example:
        code: code
        name: name
        description: description
      properties:
        code:
          description: Code
          title: Code
          type: string
        name:
          description: Nom Python de l'enum
          title: Name
          type: string
        description:
          description: Description
          title: Description
          type: string
      required:
      - code
      - description
      - name
      title: ActionCodeInfo
    ActionCodesResponse:
      description: Liste des codes action disponibles.
      example:
        codes:
        - code: code
          name: name
          description: description
        - code: code
          name: name
          description: description
        count: 0
        source: BR-FR-CDV-CL-10
      properties:
        codes:
          description: Liste des codes action
          items:
            $ref: "#/components/schemas/ActionCodeInfo"
          title: Codes
          type: array
        count:
          description: Nombre de codes
          title: Count
          type: integer
        source:
          default: BR-FR-CDV-CL-10
          description: R√®gle source
          title: Source
          type: string
      required:
      - codes
      - count
      title: ActionCodesResponse
    AggregatedPaymentInput:
      description: |-
        Aggregated payment for B2C (flux 10.4).

        Used for B2C payment aggregates.
      properties:
        paymentDate:
          description: Payment date
          example: 2025-01-15
          format: date
          title: Paymentdate
          type: string
        currency:
          $ref: "#/components/schemas/Currency"
        amountsByRate:
          description: Payment amounts by VAT rate
          items:
            $ref: "#/components/schemas/PaymentAmountByRate"
          minItems: 1
          title: Amountsbyrate
          type: array
      required:
      - amountsByRate
      - paymentDate
      title: AggregatedPaymentInput
    AggregatedTransactionInput:
      description: |-
        Aggregated transaction for B2C reporting (flux 10.3).

        Represents daily aggregation by category (TLB1, TPS1, etc.).
        Each occurrence corresponds to one day + one currency + one category.

        Source: Annexe 6 v1.9, bloc TG-31 "Transactions"
      properties:
        date:
          description: Transaction date (TT-77)
          example: 2025-01-15
          format: date
          title: Date
          type: string
        categoryCode:
          allOf:
          - $ref: "#/components/schemas/TransactionCategory"
          description: "Transaction category code (TT-81). Use TLB1 for goods, TPS1\
            \ for services."
          example: TLB1
        currency:
          $ref: "#/components/schemas/Currency"
        taxExclusiveAmount:
          $ref: "#/components/schemas/Taxexclusiveamount"
        taxAmount:
          $ref: "#/components/schemas/Taxamount"
        taxBreakdown:
          description: VAT breakdown by rate
          items:
            $ref: "#/components/schemas/TaxBreakdownInput"
          minItems: 1
          title: Taxbreakdown
          type: array
        transactionCount:
          minimum: 1.0
          nullable: true
          type: integer
        taxDueType:
          allOf:
          - $ref: "#/components/schemas/TaxDueDateType"
          nullable: true
      required:
      - categoryCode
      - date
      - taxAmount
      - taxBreakdown
      - taxExclusiveAmount
      title: AggregatedTransactionInput
    AsyncTaskStatus:
      description: |-
        Complete description of an async task status.

        The `status` field indicates the Celery state of the task.
        When `status="SUCCESS"`, check `result.status` for the business result ("SUCCESS" or "ERROR").
      example:
        result:
          key: ""
        taskId: taskId
        status: ""
      properties:
        taskId:
          description: Unique task identifier
          title: Taskid
          type: string
        status:
          allOf:
          - $ref: "#/components/schemas/CeleryStatus"
          description: "Celery task status (PENDING, STARTED, SUCCESS, FAILURE, RETRY)"
        result:
          additionalProperties: true
          nullable: true
          type: object
      required:
      - status
      - taskId
      title: AsyncTaskStatus
    Body_convert_document_async_api_v1_convert_async_post:
      properties:
        file:
          description: "Document √† convertir (PDF, DOCX, XLSX, JPG, PNG)"
          format: binary
          title: File
          type: string
        output:
          default: pdf
          description: "Format de sortie: pdf, xml, both"
          title: Output
          type: string
        callback_url:
          nullable: true
          type: string
        webhook_mode:
          default: inline
          description: "Mode de livraison du contenu: 'inline' (base64 dans webhook)\
            \ ou 'download_url' (URL temporaire 1h)"
          title: Webhook Mode
          type: string
      required:
      - file
      title: Body_convert_document_async_api_v1_convert_async_post
    Body_generate_invoice_api_v1_processing_generate_invoice_post:
      properties:
        invoice_data:
          description: "Invoice data in JSON format.\n\n            Two formats accepted:\n\
            \            1. **Classic format**: Complete FacturXInvoice structure\
            \ (all fields)\n            2. **Simplified format** (üÜï P0.1): Minimal\
            \ structure with auto-enrichment\n\n            Format is detected automatically!\n\
            \            "
          title: Invoice Data
          type: string
        profile:
          allOf:
          - $ref: "#/components/schemas/APIProfile"
          default: EXTENDED
          description: "Factur-X profile: MINIMUM, BASIC, EN16931 or EXTENDED."
        output_format:
          allOf:
          - $ref: "#/components/schemas/OutputFormat"
          default: xml
          description: "Output format: 'xml' (XML only) or 'pdf' (Factur-X PDF with\
            \ embedded XML)."
        auto_enrich:
          default: true
          description: üÜï Enable auto-enrichment from SIRET/SIREN (simplified format
            only)
          title: Auto Enrich
          type: boolean
        source_pdf:
          format: binary
          nullable: true
          type: string
        callback_url:
          nullable: true
          type: string
        webhook_mode:
          default: inline
          description: "Webhook content delivery: 'inline' (base64 in payload) or\
            \ 'download_url' (temporary URL, 1h TTL)"
          title: Webhook Mode
          type: string
        skip_br_fr:
          nullable: true
          type: boolean
      required:
      - invoice_data
      title: Body_generate_invoice_api_v1_processing_generate_invoice_post
    Body_sign_pdf_api_v1_processing_sign_pdf_post:
      properties:
        pdf_file:
          description: PDF file to sign (will be processed and returned signed in
            base64)
          format: binary
          title: Pdf File
          type: string
        reason:
          nullable: true
          type: string
        location:
          nullable: true
          type: string
        contact:
          nullable: true
          type: string
        field_name:
          default: FactPulseSignature
          description: PDF signature field name
          example: FactPulseSignature
          title: Field Name
          type: string
        use_pades_lt:
          default: false
          description: Enable PAdES-B-LT (long-term archiving with embedded validation
            data). REQUIRES a certificate with OCSP/CRL access.
          title: Use Pades Lt
          type: boolean
        use_timestamp:
          default: true
          description: Enable RFC 3161 timestamping with FreeTSA (PAdES-B-T)
          title: Use Timestamp
          type: boolean
      required:
      - pdf_file
      title: Body_sign_pdf_api_v1_processing_sign_pdf_post
    Body_sign_pdf_async_api_v1_processing_sign_pdf_async_post:
      properties:
        pdf_file:
          description: PDF file to sign (processed asynchronously)
          format: binary
          title: Pdf File
          type: string
        callback_url:
          nullable: true
          type: string
        webhook_mode:
          default: inline
          description: "Webhook content delivery: 'inline' (base64 in payload) or\
            \ 'download_url' (temporary URL, 1h TTL)"
          title: Webhook Mode
          type: string
        reason:
          nullable: true
          type: string
        location:
          nullable: true
          type: string
        contact:
          nullable: true
          type: string
        field_name:
          default: FactPulseSignature
          description: PDF signature field name
          example: FactPulseSignature
          title: Field Name
          type: string
        use_pades_lt:
          default: false
          description: Enable PAdES-B-LT (long-term archiving with embedded validation
            data). REQUIRES a certificate with OCSP/CRL access.
          title: Use Pades Lt
          type: boolean
        use_timestamp:
          default: true
          description: Enable RFC 3161 timestamping with FreeTSA (PAdES-B-T)
          title: Use Timestamp
          type: boolean
      required:
      - pdf_file
      title: Body_sign_pdf_async_api_v1_processing_sign_pdf_async_post
    Body_submit_cdar_api_v1_cdar_submit_post:
      properties:
        request:
          $ref: "#/components/schemas/SubmitCDARRequest"
        pdp_credentials:
          allOf:
          - $ref: "#/components/schemas/PDPCredentials"
          nullable: true
      required:
      - request
      title: Body_submit_cdar_api_v1_cdar_submit_post
    Body_submit_cdar_xml_api_v1_cdar_submit_xml_post:
      properties:
        request:
          $ref: "#/components/schemas/SubmitCDARXMLRequest"
        pdp_credentials:
          allOf:
          - $ref: "#/components/schemas/PDPCredentials"
          nullable: true
      required:
      - request
      title: Body_submit_cdar_xml_api_v1_cdar_submit_xml_post
    Body_submit_xml_ereporting_api_v1_ereporting_submit_xml_post:
      properties:
        xml_file:
          description: E-reporting XML file
          format: binary
          title: Xml File
          type: string
        tracking_id:
          nullable: true
          type: string
        skip_validation:
          default: false
          description: Skip XSD validation
          title: Skip Validation
          type: boolean
        pdp_flow_service_url:
          nullable: true
          type: string
        pdp_token_url:
          nullable: true
          type: string
        pdp_client_id:
          nullable: true
          type: string
        pdp_client_secret:
          nullable: true
          type: string
      required:
      - xml_file
      title: Body_submit_xml_ereporting_api_v1_ereporting_submit_xml_post
    Body_validate_facturx_pdf_api_v1_processing_validate_facturx_pdf_post:
      properties:
        pdf_file:
          description: Factur-X PDF file to validate (.pdf format).
          format: binary
          title: Pdf File
          type: string
        profile:
          allOf:
          - $ref: "#/components/schemas/APIProfile"
          nullable: true
        use_verapdf:
          default: false
          description: "Enable strict PDF/A validation with VeraPDF (recommended for\
            \ production). If False, uses basic metadata validation."
          title: Use Verapdf
          type: boolean
        skip_br_fr:
          nullable: true
          type: boolean
      required:
      - pdf_file
      title: Body_validate_facturx_pdf_api_v1_processing_validate_facturx_pdf_post
    Body_validate_facturx_pdf_async_api_v1_processing_validate_facturx_async_post:
      properties:
        pdf_file:
          description: Factur-X PDF file to validate (.pdf format).
          format: binary
          title: Pdf File
          type: string
        profile:
          allOf:
          - $ref: "#/components/schemas/APIProfile"
          nullable: true
        use_verapdf:
          default: false
          description: Enable strict PDF/A validation with VeraPDF (recommended for
            production). May take several seconds.
          title: Use Verapdf
          type: boolean
        callback_url:
          nullable: true
          type: string
        webhook_mode:
          default: inline
          description: "Webhook content delivery: 'inline' (base64 in payload) or\
            \ 'download_url' (temporary URL, 1h TTL)"
          title: Webhook Mode
          type: string
      required:
      - pdf_file
      title: Body_validate_facturx_pdf_async_api_v1_processing_validate_facturx_async_post
    Body_validate_pdf_signature_endpoint_api_v1_processing_validate_pdf_signature_post:
      properties:
        pdf_file:
          description: PDF file to validate (will be analyzed to detect and validate
            signatures)
          format: binary
          title: Pdf File
          type: string
      required:
      - pdf_file
      title: Body_validate_pdf_signature_endpoint_api_v1_processing_validate_pdf_signature_post
    Body_validate_xml_api_v1_processing_validate_xml_post:
      properties:
        xml_file:
          description: Factur-X XML file to validate (.xml format).
          format: binary
          title: Xml File
          type: string
        profile:
          allOf:
          - $ref: "#/components/schemas/APIProfile"
          default: EXTENDED
          description: "Validation profile (MINIMUM, BASIC, EN16931, EXTENDED)."
        skip_br_fr:
          nullable: true
          type: boolean
      required:
      - xml_file
      title: Body_validate_xml_api_v1_processing_validate_xml_post
    Body_validate_xml_ereporting_api_v1_ereporting_validate_xml_post:
      properties:
        xml_file:
          description: E-reporting XML file to validate
          format: binary
          title: Xml File
          type: string
      required:
      - xml_file
      title: Body_validate_xml_ereporting_api_v1_ereporting_validate_xml_post
    Body_verify_pdf_async_api_v1_verification_verify_async_post:
      properties:
        pdf_file:
          description: Factur-X PDF file to verify
          format: binary
          title: Pdf File
          type: string
        force_ocr:
          default: false
          description: Force OCR usage even if PDF contains native text
          title: Force Ocr
          type: boolean
        callback_url:
          nullable: true
          type: string
        webhook_mode:
          default: inline
          description: "Webhook content delivery: 'inline' (base64 in payload) or\
            \ 'download_url' (temporary URL, 1h TTL)"
          title: Webhook Mode
          type: string
      required:
      - pdf_file
      title: Body_verify_pdf_async_api_v1_verification_verify_async_post
    Body_verify_pdf_sync_api_v1_verification_verify_post:
      properties:
        pdf_file:
          description: Factur-X PDF file to verify
          format: binary
          title: Pdf File
          type: string
      required:
      - pdf_file
      title: Body_verify_pdf_sync_api_v1_verification_verify_post
    BoundingBoxSchema:
      description: |-
        Rectangular area coordinates in PDF.

        Coordinates are in PDF points (1 point = 1/72 inch).
        Origin (0,0) is at the bottom-left of the page.
      example:
        height: 15.0
        page: 0
        width: 70.3
        x0: 350.5
        x1: 420.8
        y0: 720.0
        y1: 735.0
      properties:
        x0:
          description: Left X coordinate
          title: X0
          type: number
        y0:
          description: Bottom Y coordinate
          title: Y0
          type: number
        x1:
          description: Right X coordinate
          title: X1
          type: number
        y1:
          description: Top Y coordinate
          title: Y1
          type: number
        page:
          default: 0
          description: Page number (0-indexed)
          minimum: 0.0
          title: Page
          type: integer
        width:
          description: Area width
          title: Width
          type: number
        height:
          description: Area height
          title: Height
          type: number
      required:
      - height
      - width
      - x0
      - x1
      - y0
      - y1
      title: BoundingBoxSchema
    CeleryStatus:
      description: |-
        Possible states of a Celery task during polling.

        **Possible values:**
        - `PENDING`: Task waiting for processing
        - `STARTED`: Task currently executing
        - `SUCCESS`: Task completed successfully (check `result.status` for business result)
        - `FAILURE`: System error during execution (crash, unhandled exception)
        - `RETRY`: Retry attempt in progress (after temporary failure)
      enum:
      - PENDING
      - STARTED
      - SUCCESS
      - FAILURE
      - RETRY
      title: CeleryStatus
      type: string
    CertificateInfoResponse:
      description: Information about a generated certificate.
      properties:
        cn:
          description: Common Name
          example: Test Signature Client XYZ
          title: Cn
          type: string
        organization:
          description: Organization
          example: Client XYZ SARL
          title: Organization
          type: string
        country:
          description: Country code
          example: FR
          title: Country
          type: string
        city:
          description: City
          example: Lyon
          title: City
          type: string
        state:
          description: State/Province
          example: Rhone-Alpes
          title: State
          type: string
        email:
          nullable: true
          type: string
        subject:
          description: Full subject (RFC4514)
          example: "CN=Test Signature Client XYZ,O=Client XYZ SARL,L=Lyon,ST=Rhone-Alpes,C=FR"
          title: Subject
          type: string
        issuer:
          description: Issuer (self-signed = same as subject)
          example: "CN=Test Signature Client XYZ,O=Client XYZ SARL,L=Lyon,ST=Rhone-Alpes,C=FR"
          title: Issuer
          type: string
        serialNumber:
          description: Certificate serial number
          example: 123456789
          title: Serialnumber
          type: integer
        validFrom:
          description: Validity start date (ISO 8601)
          example: 2025-01-07T12:00:00+00:00
          title: Validfrom
          type: string
        validTo:
          description: Validity end date (ISO 8601)
          example: 2026-01-07T12:00:00+00:00
          title: Validto
          type: string
        algorithm:
          description: Signature algorithm
          example: sha256WithRSAEncryption
          title: Algorithm
          type: string
      required:
      - algorithm
      - city
      - cn
      - country
      - issuer
      - organization
      - serialNumber
      - state
      - subject
      - validFrom
      - validTo
      title: CertificateInfoResponse
    ChorusProCredentials:
      description: |-
        Chorus Pro credentials for Zero-Trust mode.

        **Zero-Trust Mode**: Credentials are passed in each request and are NEVER stored.

        **Security**:
        - Credentials are never persisted in the database
        - They are used only for the duration of the request
        - Secure transmission via HTTPS

        **Use cases**:
        - High-security environments (banks, administrations)
        - Strict GDPR compliance
        - Tests with temporary credentials
        - Users who don't want to store their credentials
      example:
        chorusProLogin: my_login@company.fr
        chorusProPassword: MyPassword123!
        pisteClientId: my_client_id
        pisteClientSecret: my_secret
        sandbox: true
      properties:
        pisteClientId:
          description: PISTE Client ID (government API portal)
          title: Pisteclientid
          type: string
        pisteClientSecret:
          description: PISTE Client Secret
          title: Pisteclientsecret
          type: string
        chorusProLogin:
          description: Chorus Pro login
          title: Chorusprologin
          type: string
        chorusProPassword:
          description: Chorus Pro password
          title: Choruspropassword
          type: string
        sandbox:
          default: true
          description: Use sandbox environment (true) or production (false)
          title: Sandbox
          type: boolean
      required:
      - chorusProLogin
      - chorusProPassword
      - pisteClientId
      - pisteClientSecret
      title: ChorusProCredentials
    ChorusProDestination:
      description: Specific configuration for Chorus Pro destination.
      properties:
        type:
          default: chorus_pro
          enum:
          - chorus_pro
          title: Type
          type: string
        credentials:
          allOf:
          - $ref: "#/components/schemas/facture_electronique__rest_api__schemas__processing__ChorusProCredentials"
          nullable: true
      title: ChorusProDestination
    ChorusProResult:
      description: Result of submission to Chorus Pro.
      properties:
        chorusInvoiceId:
          description: Chorus Pro invoice ID
          title: Chorusinvoiceid
          type: integer
        depositFlowNumber:
          nullable: true
          type: string
        attachmentId:
          nullable: true
          type: integer
      required:
      - chorusInvoiceId
      title: ChorusProResult
    ConvertResumeRequest:
      description: |-
        Requete de reprise de conversion avec corrections.

        Le champ `overrides` accepte n'importe quel sous-ensemble de FacturXInvoice.
        Seuls les champs fournis seront mis a jour (merge profond).

        Exemple:
            {
                "overrides": {
                    "supplier": {
                        "name": "Ma Soci√©t√©",
                        "siret": "12345678901234"
                    },
                    "totals": {
                        "total_net_amount": 1000.00
                    }
                }
            }
      example:
        overrides:
          key: ""
      properties:
        overrides:
          additionalProperties: true
          description: Sous-ensemble de FacturXInvoice a mettre a jour (merge profond)
          title: Overrides
          type: object
      title: ConvertResumeRequest
    ConvertSuccessResponse:
      description: |-
        Reponse succes de conversion.

        Le champ `invoice` contient les donnees de la facture au format FacturXInvoice
        (cf. facture_electronique.models.FacturXInvoice). Ce modele est le meme que
        celui utilise pour la generation Factur-X, garantissant une coherence totale.
      example:
        pdf_regenerated: false
        processing_time_ms: 3
        pdf_regenerated_reason: pdf_regenerated_reason
        conversion_id: conversion_id
        files:
          xml: ""
          facturx_pdf: ""
        invoice:
          key: ""
        extraction:
          confidence_score: 6.027456183070403
          fields_extracted: 1
          fields_enriched: 5
          fields_missing: 5
        validation:
          schematron_rules_total: 7
          pdfa_compliant: true
          schematron_rules_passed: 2
          profile: profile
          errors:
          - severity: severity
            bt_code: bt_code
            suggested_field: suggested_field
            confidence: 0.9301444243932576
            rule: rule
            message: message
            explanation: explanation
            suggested_value: suggested_value
          - severity: severity
            bt_code: bt_code
            suggested_field: suggested_field
            confidence: 0.9301444243932576
            rule: rule
            message: message
            explanation: explanation
            suggested_value: suggested_value
          xml_embedded: true
        status: success
        document_type:
          code: 0
          label: label
          detected_as: detected_as
      properties:
        status:
          default: success
          description: Statut de la conversion
          title: Status
          type: string
        conversion_id:
          description: Identifiant unique de conversion
          title: Conversion Id
          type: string
        document_type:
          $ref: "#/components/schemas/DocumentTypeInfo"
        invoice:
          additionalProperties: true
          description: Donnees facture au format FacturXInvoice (cf. models.py)
          title: Invoice
          type: object
        extraction:
          $ref: "#/components/schemas/ExtractionInfo"
        validation:
          $ref: "#/components/schemas/ValidationInfo"
        files:
          $ref: "#/components/schemas/FilesInfo"
        processing_time_ms:
          description: Temps de traitement en ms
          title: Processing Time Ms
          type: integer
        pdf_regenerated:
          default: false
          description: True si le PDF a ete regenere (source non exploitable)
          title: Pdf Regenerated
          type: boolean
        pdf_regenerated_reason:
          nullable: true
          type: string
      required:
      - conversion_id
      - document_type
      - extraction
      - files
      - invoice
      - processing_time_ms
      - validation
      title: ConvertSuccessResponse
    ConvertValidationFailedResponse:
      description: Reponse echec de validation - inclut les donnees extraites pour
        correction.
      example:
        extracted_data:
          key: ""
        expires_at: 2000-01-23T04:56:07.000+00:00
        conversion_id: conversion_id
        missing_fields:
        - field: field
          bt_code: bt_code
          confidence: 2.027123023002322
          required_for:
          - required_for
          - required_for
          description: description
          suggested_value: suggested_value
        - field: field
          bt_code: bt_code
          confidence: 2.027123023002322
          required_for:
          - required_for
          - required_for
          description: description
          suggested_value: suggested_value
        message: Donnees extraites avec erreurs de validation. Completez le formulaire
          et appelez /resume.
        extraction: ""
        resume_url: resume_url
        validation: ""
        status: validation_failed
      properties:
        status:
          default: validation_failed
          description: Statut de la conversion
          title: Status
          type: string
        conversion_id:
          description: Identifiant unique de conversion
          title: Conversion Id
          type: string
        message:
          default: Donnees extraites avec erreurs de validation. Completez le formulaire
            et appelez /resume.
          description: Message explicatif
          title: Message
          type: string
        extraction:
          allOf:
          - $ref: "#/components/schemas/ExtractionInfo"
          description: Informations sur l'extraction OCR
        extracted_data:
          additionalProperties: true
          description: Donnees extraites par OCR au format FacturXInvoice (a completer/corriger)
          title: Extracted Data
          type: object
        missing_fields:
          description: Champs manquants pour conformite Factur-X
          items:
            $ref: "#/components/schemas/MissingField"
          title: Missing Fields
          type: array
        validation:
          allOf:
          - $ref: "#/components/schemas/ValidationInfo"
          description: Resultat de la validation Factur-X
        resume_url:
          description: URL pour reprendre la conversion avec corrections
          title: Resume Url
          type: string
        expires_at:
          description: Expiration de la conversion (1h)
          format: date-time
          title: Expires At
          type: string
      required:
      - conversion_id
      - expires_at
      - extracted_data
      - extraction
      - resume_url
      - validation
      title: ConvertValidationFailedResponse
    CountryCode:
      description: |-
        ISO 3166-1 alpha-2 country codes.

        Complete list of country codes used in e-reporting and invoicing.
        Includes all EU member states, major trading partners, and territories.
      enum:
      - AT
      - BE
      - BG
      - HR
      - CY
      - CZ
      - DK
      - EE
      - FI
      - FR
      - DE
      - GR
      - HU
      - IE
      - IT
      - LV
      - LT
      - LU
      - MT
      - NL
      - PL
      - PT
      - RO
      - SK
      - SI
      - ES
      - SE
      - IS
      - LI
      - "NO"
      - CH
      - GB
      - AD
      - MC
      - SM
      - VA
      - AL
      - BA
      - BY
      - MD
      - ME
      - MK
      - RS
      - RU
      - UA
      - XK
      - TR
      - GP
      - MQ
      - GF
      - RE
      - YT
      - PM
      - BL
      - MF
      - WF
      - PF
      - NC
      - TF
      - US
      - CA
      - MX
      - BR
      - AR
      - CL
      - CO
      - PE
      - VE
      - EC
      - BO
      - PY
      - UY
      - CR
      - PA
      - DO
      - CU
      - PR
      - JM
      - HT
      - TT
      - CN
      - JP
      - KR
      - KP
      - TW
      - HK
      - MO
      - IN
      - PK
      - BD
      - LK
      - NP
      - TH
      - VN
      - MY
      - SG
      - ID
      - PH
      - MM
      - KH
      - LA
      - BN
      - TL
      - AE
      - SA
      - QA
      - KW
      - BH
      - OM
      - YE
      - IL
      - PS
      - JO
      - LB
      - SY
      - IQ
      - IR
      - AF
      - ZA
      - EG
      - MA
      - DZ
      - TN
      - LY
      - NG
      - KE
      - GH
      - CI
      - SN
      - CM
      - ET
      - TZ
      - UG
      - RW
      - MU
      - MG
      - AO
      - MZ
      - ZW
      - BW
      - NA
      - GA
      - CG
      - CD
      - ML
      - BF
      - NE
      - TD
      - SD
      - SS
      - ER
      - DJ
      - SO
      - AU
      - NZ
      - FJ
      - PG
      - SB
      - VU
      - WS
      - TO
      - KZ
      - UZ
      - TM
      - KG
      - TJ
      - AZ
      - AM
      - GE
      - MN
      title: CountryCode
      type: string
    CreateAggregatedReportRequest:
      description: |-
        Request to create a PPF-compliant aggregated e-reporting submission.

        This schema allows creating a SINGLE report file containing multiple flux types,
        as expected by the PPF and PA platforms:
        - TransactionsReport: Contains both Invoice (10.1) and Transactions (10.3)
        - PaymentsReport: Contains both Invoice payments (10.2) and Transaction payments (10.4)

        Source: Specifications externes v3.1, XSD ereporting.xsd
      example:
        invoices:
        - buyerCountry: DE
          invoiceId: FAC-2025-INT-001
          issueDate: 2025-01-10
          sellerCountry: FR
          sellerSiren: "123456789"
          taxAmount: "0.00"
          taxBreakdown:
          - rate: "0.00"
            taxAmount: "0.00"
            taxableAmount: "50000.00"
          taxExclusiveAmount: "50000.00"
          typeCode: "380"
        period:
          endDate: 2025-01-31
          startDate: 2025-01-01
        reportId: EREPORT-2025-001
        reportName: E-Reporting Janvier 2025
        sender:
          name: Ma Soci√©t√© SARL
          siren: "123456789"
        transactionPayments:
        - amountsByRate:
          - amount: "6000.00"
            rate: "20.00"
          paymentDate: 2025-01-20
        transactions:
        - categoryCode: TLB1
          date: 2025-01-15
          taxAmount: "2000.00"
          taxBreakdown:
          - rate: "20.00"
            taxAmount: "2000.00"
            taxableAmount: "10000.00"
          taxExclusiveAmount: "10000.00"
          transactionCount: 150
        - categoryCode: TPS1
          date: 2025-01-15
          taxAmount: "1000.00"
          taxBreakdown:
          - rate: "20.00"
            taxAmount: "1000.00"
            taxableAmount: "5000.00"
          taxExclusiveAmount: "5000.00"
          transactionCount: 80
        transmissionType: IN
      properties:
        reportId:
          description: Report identifier (generated by caller)
          example: EREPORT-2025-001
          title: Reportid
          type: string
        reportName:
          nullable: true
          type: string
        transmissionType:
          allOf:
          - $ref: "#/components/schemas/TransmissionTypeCode"
          default: IN
          description: "Transmission type: IN=Initial, RE=Rectificative (TT-4)"
        sender:
          allOf:
          - $ref: "#/components/schemas/ReportSender"
          description: Report sender/declarant
        period:
          allOf:
          - $ref: "#/components/schemas/ReportPeriod"
          description: Reporting period
        invoices:
          items:
            $ref: "#/components/schemas/InvoiceInput"
          nullable: true
          type: array
        transactions:
          items:
            $ref: "#/components/schemas/AggregatedTransactionInput"
          nullable: true
          type: array
        invoicePayments:
          items:
            $ref: "#/components/schemas/InvoicePaymentInput"
          nullable: true
          type: array
        transactionPayments:
          items:
            $ref: "#/components/schemas/AggregatedPaymentInput"
          nullable: true
          type: array
      required:
      - period
      - reportId
      - sender
      title: CreateAggregatedReportRequest
    CreateCDARRequest:
      description: Requ√™te de cr√©ation d'un message CDAR.
      example:
        reasonText: reasonText
        senderSiren: senderSiren
        invoiceIssueDate: 2000-01-23
        invoiceBuyerSiren: invoiceBuyerSiren
        typeCode: "23"
        businessProcess: REGULATED
        senderName: senderName
        invoiceSellerSiren: invoiceSellerSiren
        recipients:
        - siren: siren
          role: BY
          name: name
          siret: siret
          email: email
        - siren: siren
          role: BY
          name: name
          siret: siret
          email: email
        senderEmail: senderEmail
        invoiceTypeCode: "380"
        documentId: documentId
        invoiceId: invoiceId
        actionCode: actionCode
        encaisseAmount: 0.8008281904610115
        reasonCode: reasonCode
        senderRole: WK
        status: status
      properties:
        documentId:
          description: Identifiant unique du message CDAR
          title: Documentid
          type: string
        businessProcess:
          default: REGULATED
          description: "Code processus m√©tier (REGULATED, B2C, B2BINT, etc.)"
          title: Businessprocess
          type: string
        typeCode:
          default: "23"
          description: "Type de message (23=Traitement, 305=Transmission)"
          title: Typecode
          type: string
        senderSiren:
          description: SIREN de l'√©metteur (9 chiffres)
          title: Sendersiren
          type: string
        senderRole:
          default: WK
          description: "R√¥le de l'√©metteur (WK, SE, BY, etc.)"
          title: Senderrole
          type: string
        senderName:
          nullable: true
          type: string
        senderEmail:
          nullable: true
          type: string
        recipients:
          description: Liste des destinataires
          items:
            $ref: "#/components/schemas/RecipientInput"
          title: Recipients
          type: array
        invoiceId:
          description: Identifiant de la facture (BT-1)
          title: Invoiceid
          type: string
        invoiceIssueDate:
          description: Date d'√©mission de la facture (YYYY-MM-DD)
          format: date
          title: Invoiceissuedate
          type: string
        invoiceTypeCode:
          default: "380"
          description: "Type de document (380=Facture, 381=Avoir)"
          title: Invoicetypecode
          type: string
        invoiceSellerSiren:
          nullable: true
          type: string
        invoiceBuyerSiren:
          nullable: true
          type: string
        status:
          description: Code statut de la facture (200-601)
          title: Status
          type: string
        reasonCode:
          nullable: true
          type: string
        reasonText:
          nullable: true
          type: string
        actionCode:
          nullable: true
          type: string
        encaisseAmount:
          $ref: "#/components/schemas/Encaisseamount"
      required:
      - documentId
      - invoiceId
      - invoiceIssueDate
      - senderSiren
      - status
      title: CreateCDARRequest
    CreateEReportingRequest:
      description: |-
        Request to create an e-reporting submission.

        Supports all four flux types:
        - 10.1: B2B international invoices (use `invoices` field)
        - 10.2: B2B international payments (use `invoicePayments` field)
        - 10.3: B2C aggregated transactions (use `transactions` field)
        - 10.4: B2C aggregated payments (use `aggregatedPayments` field)
      example:
        flowType: "10.3"
        period:
          endDate: 2025-01-31
          startDate: 2025-01-01
        reportId: EREPORT-2025-001
        reportName: E-Reporting Janvier 2025
        sender:
          name: Ma Soci√©t√© SARL
          siren: "123456789"
        transactions:
        - categoryCode: TLB1
          date: 2025-01-15
          taxAmount: "2000.00"
          taxBreakdown:
          - rate: "20.00"
            taxAmount: "2000.00"
            taxableAmount: "10000.00"
          taxExclusiveAmount: "10000.00"
          transactionCount: 150
        transmissionType: IN
      properties:
        reportId:
          description: Report identifier (generated by caller)
          example: EREPORT-2025-001
          title: Reportid
          type: string
        reportName:
          nullable: true
          type: string
        flowType:
          allOf:
          - $ref: "#/components/schemas/EReportingFlowType"
          description: E-Reporting flux type (for internal routing)
        transmissionType:
          allOf:
          - $ref: "#/components/schemas/TransmissionTypeCode"
          default: IN
          description: "Transmission type (TT-4 TypeCode): IN=Initial, RE=Rectificative"
        sender:
          allOf:
          - $ref: "#/components/schemas/ReportSender"
          description: Report sender (declarant)
        period:
          allOf:
          - $ref: "#/components/schemas/ReportPeriod"
          description: Reporting period
        invoices:
          items:
            $ref: "#/components/schemas/InvoiceInput"
          nullable: true
          type: array
        transactions:
          items:
            $ref: "#/components/schemas/AggregatedTransactionInput"
          nullable: true
          type: array
        invoicePayments:
          items:
            $ref: "#/components/schemas/InvoicePaymentInput"
          nullable: true
          type: array
        aggregatedPayments:
          items:
            $ref: "#/components/schemas/AggregatedPaymentInput"
          nullable: true
          type: array
      required:
      - flowType
      - period
      - reportId
      - sender
      title: CreateEReportingRequest
    CurrencyCode:
      description: |-
        ISO 4217 currency codes.

        Most common currencies used in e-reporting and invoicing.
        This is not an exhaustive list but covers all practical use cases
        for French e-reporting (EUR zone + major trading partners).
      enum:
      - EUR
      - USD
      - GBP
      - JPY
      - CHF
      - CAD
      - AUD
      - NZD
      - CNY
      - HKD
      - SGD
      - DKK
      - SEK
      - NOK
      - PLN
      - CZK
      - HUF
      - RON
      - BGN
      - HRK
      - ISK
      - RSD
      - RUB
      - UAH
      - TRY
      - MXN
      - BRL
      - ARS
      - CLP
      - COP
      - PEN
      - INR
      - KRW
      - TWD
      - THB
      - MYR
      - IDR
      - PHP
      - VND
      - AED
      - SAR
      - ILS
      - ZAR
      - EGP
      - MAD
      - TND
      - DZD
      - NGN
      - KES
      - XPF
      - XAF
      - XOF
      - XDR
      title: CurrencyCode
      type: string
    DocType:
      description: "AFNOR docType parameter for GET /flows/{flowId}."
      enum:
      - Metadata
      - Original
      - Converted
      - ReadableView
      title: DocType
      type: string
    DocumentTypeInfo:
      description: Informations sur le type de document detecte.
      example:
        code: 0
        label: label
        detected_as: detected_as
      properties:
        code:
          description: Code UNTDID 1001
          title: Code
          type: integer
        label:
          description: "Libelle (Facture, Avoir, etc.)"
          title: Label
          type: string
        detected_as:
          description: Classification interne
          title: Detected As
          type: string
      required:
      - code
      - detected_as
      - label
      title: DocumentTypeInfo
    EReportingFlowType:
      description: "E-Reporting flow types (PPF flux 10.1, 10.2, 10.3, 10.4)."
      enum:
      - "10.1"
      - "10.2"
      - "10.3"
      - "10.4"
      title: EReportingFlowType
      type: string
    EReportingValidationError:
      description: Validation error detail for E-Reporting.
      example:
        code: code
        field: field
        message: message
      properties:
        field:
          description: Field path with error
          title: Field
          type: string
        message:
          description: Error message
          title: Message
          type: string
        code:
          nullable: true
          type: string
      required:
      - field
      - message
      title: EReportingValidationError
    ElectronicAddress:
      description: |-
        Represents an electronic invoicing address, composed of an identifier
        and its scheme (SchemeID) in accordance with EN16931.
        Example: { "identifier": "123456789", "scheme_id": "0225" }
      properties:
        identifier:
          description: "Electronic address identifier (e.g., SIREN, SIRET, routing\
            \ code)"
          title: Identifier
          type: string
        schemeId:
          allOf:
          - $ref: "#/components/schemas/SchemeID"
          default: "0225"
          description: Identification scheme (EAS code)
      required:
      - identifier
      title: ElectronicAddress
    EnrichedInvoiceInfo:
      description: Information about the enriched invoice.
      properties:
        invoiceNumber:
          description: Invoice number
          title: Invoicenumber
          type: string
        supplierId:
          nullable: true
          type: integer
        recipientId:
          nullable: true
          type: integer
        supplierName:
          description: Supplier name
          title: Suppliername
          type: string
        recipientName:
          description: Recipient name
          title: Recipientname
          type: string
        totalNetAmount:
          description: Total net amount (HT)
          pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
          title: Totalnetamount
          type: string
        vatAmount:
          description: VAT amount
          pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
          title: Vatamount
          type: string
        totalGrossAmount:
          description: Total gross amount (TTC)
          pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
          title: Totalgrossamount
          type: string
      required:
      - invoiceNumber
      - recipientName
      - supplierName
      - totalGrossAmount
      - totalNetAmount
      - vatAmount
      title: EnrichedInvoiceInfo
    ErrorLevel:
      enum:
      - Error
      - Warning
      type: string
    ErrorSource:
      enum:
      - schematron
      - pdfa
      - pydantic
      - xmp
      - signature
      - afnor
      - chorus_pro
      - system
      type: string
    ExtractionInfo:
      description: Informations sur l'extraction des donnees.
      example:
        confidence_score: 6.027456183070403
        fields_extracted: 1
        fields_enriched: 5
        fields_missing: 5
      properties:
        confidence_score:
          description: Score de confiance global (0-1)
          title: Confidence Score
          type: number
        fields_extracted:
          description: Nombre de champs extraits
          title: Fields Extracted
          type: integer
        fields_enriched:
          default: 0
          description: Nombre de champs enrichis automatiquement
          title: Fields Enriched
          type: integer
        fields_missing:
          default: 0
          description: Nombre de champs manquants
          title: Fields Missing
          type: integer
      required:
      - confidence_score
      - fields_extracted
      title: ExtractionInfo
    FacturXPDFInfo:
      description: Information about the generated Factur-X PDF.
      properties:
        size:
          description: PDF size in bytes
          title: Size
          type: integer
        profile:
          description: Factur-X profile used
          title: Profile
          type: string
        signed:
          default: false
          description: PDF electronically signed
          title: Signed
          type: boolean
      required:
      - profile
      - size
      title: FacturXPDFInfo
    FieldStatus:
      description: Field compliance status.
      enum:
      - COMPLIANT
      - DISCREPANCY
      - MISSING_IN_PDF
      - MISSING_IN_XML
      - NOT_VERIFIED
      title: FieldStatus
      type: string
    FileInfo:
      description: Informations sur un fichier genere (contenu inline en base64).
      properties:
        content_b64:
          nullable: true
          type: string
        size_bytes:
          default: 0
          description: Taille en bytes
          title: Size Bytes
          type: integer
      title: FileInfo
    FilesInfo:
      description: Fichiers generes.
      example:
        xml: ""
        facturx_pdf: ""
      properties:
        facturx_pdf:
          allOf:
          - $ref: "#/components/schemas/FileInfo"
          nullable: true
        xml:
          allOf:
          - $ref: "#/components/schemas/FileInfo"
          nullable: true
      title: FilesInfo
    FlowSyntax:
      description: Flow syntaxes supported by AFNOR.
      enum:
      - CII
      - UBL
      - Factur-X
      - CDAR
      - FRR
      title: FlowSyntax
      type: string
    GenerateAggregatedReportResponse:
      description: Response after generating an aggregated e-reporting XML.
      example:
        reportId: reportId
        xml: xml
        transmissionType: transmissionType
        message: message
        xmlSize: 0
        contentSummary:
          key: ""
        flowType: flowType
      properties:
        reportId:
          description: Report identifier
          title: Reportid
          type: string
        transmissionType:
          description: Transmission type (IN or RE)
          title: Transmissiontype
          type: string
        flowType:
          description: AFNOR FlowType determined from content
          title: Flowtype
          type: string
        xml:
          description: Generated XML content
          title: Xml
          type: string
        xmlSize:
          description: XML size in bytes
          title: Xmlsize
          type: integer
        contentSummary:
          additionalProperties: true
          description: Summary of content (counts by flux type)
          title: Contentsummary
          type: object
        message:
          description: Status message
          title: Message
          type: string
      required:
      - contentSummary
      - flowType
      - message
      - reportId
      - transmissionType
      - xml
      - xmlSize
      title: GenerateAggregatedReportResponse
    GenerateCDARResponse:
      description: R√©ponse de g√©n√©ration de message CDAR.
      example:
        sha256: sha256
        xml: xml
        documentId: documentId
        message: message
        xmlSize: 0
      properties:
        documentId:
          title: Documentid
          type: string
        xml:
          description: XML CDAR g√©n√©r√©
          title: Xml
          type: string
        xmlSize:
          description: Taille du XML en octets
          title: Xmlsize
          type: integer
        sha256:
          description: Hash SHA256 du XML
          title: Sha256
          type: string
        message:
          description: Message de succ√®s
          title: Message
          type: string
      required:
      - documentId
      - message
      - sha256
      - xml
      - xmlSize
      title: GenerateCDARResponse
    GenerateCertificateRequest:
      description: |-
        Request to generate a self-signed X.509 test certificate.

        WARNING: This certificate is intended for TESTING only.
        DO NOT use in production!
        eIDAS level: SES (Simple Electronic Signature)
      example:
        city: Lyon
        cn: Test Signature Client XYZ
        country: FR
        email: contact@xyz.fr
        generateP12: false
        keySize: 2048
        organization: Client XYZ SARL
        p12Passphrase: changeme
        state: Rhone-Alpes
        validityDays: 365
      properties:
        cn:
          default: Test Signature FactPulse
          description: Common Name (CN) - Certificate name
          example: Test Signature Client XYZ
          title: Cn
          type: string
        organization:
          default: FactPulse Test
          description: Organization (O)
          example: Client XYZ SARL
          title: Organization
          type: string
        country:
          default: FR
          description: ISO 2-letter country code (C)
          example: FR
          maxLength: 2
          minLength: 2
          title: Country
          type: string
        city:
          default: Paris
          description: City (L)
          example: Paris
          title: City
          type: string
        state:
          default: Ile-de-France
          description: State/Province (ST)
          example: Ile-de-France
          title: State
          type: string
        email:
          nullable: true
          type: string
        validityDays:
          default: 365
          description: Validity duration in days
          example: 365
          maximum: 3650.0
          minimum: 1.0
          title: Validitydays
          type: integer
        keySize:
          default: 2048
          description: RSA key size in bits
          example: 2048
          title: Keysize
          type: integer
        keyPassphrase:
          nullable: true
          type: string
        generateP12:
          default: false
          description: Also generate a PKCS#12 (.p12) file
          example: false
          title: Generatep12
          type: boolean
        p12Passphrase:
          default: changeme
          description: Passphrase for PKCS#12 file
          example: changeme
          title: P12Passphrase
          type: string
      title: GenerateCertificateRequest
    GenerateCertificateResponse:
      description: |-
        Response after generating a test certificate.

        Contains certificate PEM, private key PEM, and optionally PKCS#12.
      example:
        certificatePem: |-
          -----BEGIN CERTIFICATE-----
          MIID...
          -----END CERTIFICATE-----
        info:
          algorithm: sha256WithRSAEncryption
          city: Lyon
          cn: Test Signature Client XYZ
          country: FR
          email: contact@xyz.fr
          issuer: "CN=Test Signature Client XYZ,O=Client XYZ SARL,L=Lyon,ST=Rhone-Alpes,C=FR"
          organization: Client XYZ SARL
          serialNumber: 123456789
          state: Rhone-Alpes
          subject: "CN=Test Signature Client XYZ,O=Client XYZ SARL,L=Lyon,ST=Rhone-Alpes,C=FR"
          validFrom: 2025-01-07T12:00:00+00:00
          validTo: 2026-01-07T12:00:00+00:00
        privateKeyPem: |-
          -----BEGIN PRIVATE KEY-----
          MIIE...
          -----END PRIVATE KEY-----
        status: success
        warning: "WARNING: This certificate is SELF-SIGNED and intended for TESTING\
          \ only. DO NOT use in production. eIDAS level: SES (Simple Electronic Signature)"
      properties:
        status:
          default: success
          description: Operation status
          example: success
          title: Status
          type: string
        certificatePem:
          description: X.509 certificate in PEM format
          example: |-
            -----BEGIN CERTIFICATE-----
            MIID...
            -----END CERTIFICATE-----
          title: Certificatepem
          type: string
        privateKeyPem:
          description: RSA private key in PEM format
          example: |-
            -----BEGIN PRIVATE KEY-----
            MIIE...
            -----END PRIVATE KEY-----
          title: Privatekeypem
          type: string
        pkcs12Base64:
          nullable: true
          type: string
        info:
          allOf:
          - $ref: "#/components/schemas/CertificateInfoResponse"
          description: Generated certificate information
        warning:
          default: "WARNING: This certificate is SELF-SIGNED and intended for TESTING\
            \ only. DO NOT use in production. eIDAS level: SES (Simple Electronic\
            \ Signature)"
          description: Warning about certificate usage
          title: Warning
          type: string
      required:
      - certificatePem
      - info
      - privateKeyPem
      title: GenerateCertificateResponse
    GenerateEReportingResponse:
      description: Response after generating e-reporting XML.
      example:
        reportId: reportId
        xml: xml
        message: message
        xmlSize: 0
        flowType: flowType
      properties:
        reportId:
          description: Report identifier
          title: Reportid
          type: string
        flowType:
          description: Flux type
          title: Flowtype
          type: string
        xml:
          description: Generated XML content
          title: Xml
          type: string
        xmlSize:
          description: XML size in bytes
          title: Xmlsize
          type: integer
        message:
          description: Status message
          title: Message
          type: string
      required:
      - flowType
      - message
      - reportId
      - xml
      - xmlSize
      title: GenerateEReportingResponse
    GetChorusProIdRequest:
      description: Get Chorus Pro ID from SIRET.
      example:
        credentials: ""
        identifierType: SIRET
        siret: siret
      properties:
        credentials:
          allOf:
          - $ref: "#/components/schemas/ChorusProCredentials"
          nullable: true
        siret:
          description: Structure SIRET (14 digits)
          title: Siret
          type: string
        identifierType:
          default: SIRET
          description: "Identifier type (SIRET, SIREN, UE_HORS_FRANCE, etc.)"
          title: Identifiertype
          type: string
      required:
      - siret
      title: GetChorusProIdRequest
    GetChorusProIdResponse:
      description: Found Chorus Pro ID.
      example:
        structureIdentifier: structureIdentifier
        structureName: structureName
        structureId: 0
        message: message
      properties:
        structureId:
          description: Chorus Pro ID (0 if not found)
          title: Structureid
          type: integer
        structureIdentifier:
          description: Searched SIRET/SIREN
          title: Structureidentifier
          type: string
        structureName:
          nullable: true
          type: string
        message:
          description: Return message
          title: Message
          type: string
      required:
      - message
      - structureId
      - structureIdentifier
      title: GetChorusProIdResponse
    GetInvoiceRequest:
      description: Get an invoice.
      example:
        credentials: ""
        chorusInvoiceId: 0
      properties:
        credentials:
          allOf:
          - $ref: "#/components/schemas/ChorusProCredentials"
          nullable: true
        chorusInvoiceId:
          description: Chorus Pro invoice ID
          title: Chorusinvoiceid
          type: integer
      required:
      - chorusInvoiceId
      title: GetInvoiceRequest
    GetInvoiceResponse:
      description: Invoice details.
      example:
        returnCode: 0
        recipientStructureName: recipientStructureName
        chorusInvoiceId: 6
        currentStatus: ""
        invoiceNumber: invoiceNumber
        recipientStructureId: 1
        totalGrossAmount: totalGrossAmount
        message: message
        invoiceDate: invoiceDate
      properties:
        returnCode:
          description: Return code (0 = success)
          title: Returncode
          type: integer
        message:
          description: Response message
          title: Message
          type: string
        chorusInvoiceId:
          nullable: true
          type: integer
        invoiceNumber:
          nullable: true
          type: string
        invoiceDate:
          nullable: true
          type: string
        totalGrossAmount:
          nullable: true
          type: string
        currentStatus:
          allOf:
          - $ref: "#/components/schemas/InvoiceStatus"
          nullable: true
        recipientStructureId:
          nullable: true
          type: integer
        recipientStructureName:
          nullable: true
          type: string
      required:
      - message
      - returnCode
      title: GetInvoiceResponse
    GetStructureRequest:
      description: Get structure details.
      example:
        credentials: ""
        structureId: 0
        languageCode: fr
      properties:
        credentials:
          allOf:
          - $ref: "#/components/schemas/ChorusProCredentials"
          nullable: true
        structureId:
          description: Chorus Pro structure ID
          title: Structureid
          type: integer
        languageCode:
          default: fr
          description: "Language code (fr, en)"
          title: Languagecode
          type: string
      required:
      - structureId
      title: GetStructureRequest
    GetStructureResponse:
      description: Structure details.
      example:
        returnCode: 0
        structureLabel: structureLabel
        structureIdentifier: structureIdentifier
        companyName: companyName
        structureId: 6
        structureEmail: structureEmail
        message: message
        parameters: ""
        vatNumber: vatNumber
      properties:
        returnCode:
          description: Return code (0 = success)
          title: Returncode
          type: integer
        message:
          description: Response message
          title: Message
          type: string
        structureId:
          nullable: true
          type: integer
        structureIdentifier:
          nullable: true
          type: string
        structureLabel:
          nullable: true
          type: string
        companyName:
          nullable: true
          type: string
        vatNumber:
          nullable: true
          type: string
        structureEmail:
          nullable: true
          type: string
        parameters:
          allOf:
          - $ref: "#/components/schemas/StructureParameters"
          nullable: true
      required:
      - message
      - returnCode
      title: GetStructureResponse
    HTTPValidationError:
      example:
        detail:
        - msg: msg
          loc:
          - Location_inner
          - Location_inner
          type: type
        - msg: msg
          loc:
          - Location_inner
          - Location_inner
          type: type
      properties:
        detail:
          items:
            $ref: "#/components/schemas/ValidationError"
          title: Detail
          type: array
      title: HTTPValidationError
    IncomingInvoice:
      description: |-
        Invoice received from a supplier via PDP/PA.

        This model contains essential metadata extracted from incoming invoices,
        regardless of their source format (CII, UBL, Factur-X).

        Amounts are Decimal in Python but will be serialized as
        strings in JSON to preserve monetary precision.
      example:
        supplierReference: supplierReference
        documentFilename: documentFilename
        documentContentType: documentContentType
        billingSiteName: billingSiteName
        documentType: ""
        netAmount: netAmount
        dueDate: dueDate
        grossAmount: grossAmount
        vatAmount: vatAmount
        supplier: ""
        purchaseOrderNumber: purchaseOrderNumber
        currency: EUR
        documentBase64: documentBase64
        issueDate: issueDate
        contractReference: contractReference
        flowId: flowId
        sourceFormat: ""
        billingSiteSiret: billingSiteSiret
        invoiceSubject: invoiceSubject
      properties:
        flowId:
          nullable: true
          type: string
        sourceFormat:
          allOf:
          - $ref: "#/components/schemas/InvoiceFormat"
          description: Invoice source format
        supplierReference:
          description: Invoice number issued by the supplier (BT-1)
          title: Supplierreference
          type: string
        documentType:
          allOf:
          - $ref: "#/components/schemas/InvoiceTypeCode-Output"
          default: "380"
          description: Document type (BT-3)
        supplier:
          allOf:
          - $ref: "#/components/schemas/IncomingSupplier"
          description: Invoice issuer (SellerTradeParty)
        billingSiteName:
          description: Recipient name / your company (BT-44)
          title: Billingsitename
          type: string
        billingSiteSiret:
          nullable: true
          type: string
        issueDate:
          description: Invoice date (BT-2) - YYYY-MM-DD
          title: Issuedate
          type: string
        dueDate:
          nullable: true
          type: string
        currency:
          default: EUR
          description: ISO currency code (BT-5)
          title: Currency
          type: string
        netAmount:
          description: Total net amount (BT-109)
          title: IncomingNetAmount
          type: string
        vatAmount:
          description: Total VAT amount (BT-110)
          title: IncomingVatAmount
          type: string
        grossAmount:
          description: Total gross amount (BT-112)
          title: IncomingGrossAmount
          type: string
        purchaseOrderNumber:
          nullable: true
          type: string
        contractReference:
          nullable: true
          type: string
        invoiceSubject:
          nullable: true
          type: string
        documentBase64:
          nullable: true
          type: string
        documentContentType:
          nullable: true
          type: string
        documentFilename:
          nullable: true
          type: string
      required:
      - billingSiteName
      - grossAmount
      - issueDate
      - netAmount
      - sourceFormat
      - supplier
      - supplierReference
      - vatAmount
      title: IncomingInvoice
    IncomingSupplier:
      description: |-
        Supplier extracted from an incoming invoice.

        Unlike the Supplier model in models.py, this model does not have
        a supplier_id field as this information is not available
        in Factur-X/CII/UBL XML files.
      properties:
        name:
          description: Supplier business name (BT-27)
          title: Name
          type: string
        siren:
          nullable: true
          type: string
        siret:
          nullable: true
          type: string
        vatNumber:
          nullable: true
          type: string
        postalAddress:
          allOf:
          - $ref: "#/components/schemas/PostalAddress"
          nullable: true
        electronicAddress:
          allOf:
          - $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
        email:
          nullable: true
          type: string
        phone:
          nullable: true
          type: string
      required:
      - name
      title: IncomingSupplier
    InvoiceFormat:
      description: Supported invoice formats for extraction.
      enum:
      - CII
      - UBL
      - Factur-X
      title: InvoiceFormat
      type: string
    InvoiceInput:
      description: |-
        Invoice for B2B international reporting (flux 10.1).

        Used for unitary declaration of international B2B invoices.
      properties:
        invoiceId:
          description: Invoice identifier
          example: FAC-2025-001
          title: Invoiceid
          type: string
        issueDate:
          description: Invoice issue date
          example: 2025-01-15
          format: date
          title: Issuedate
          type: string
        typeCode:
          allOf:
          - $ref: "#/components/schemas/facture_electronique__rest_api__schemas__ereporting__InvoiceTypeCode"
          default: "380"
          description: Invoice type code
        currency:
          $ref: "#/components/schemas/Currency"
        dueDate:
          format: date
          nullable: true
          type: string
        sellerSiren:
          description: Seller SIREN/SIRET
          example: "123456789"
          title: Sellersiren
          type: string
        sellerVatId:
          nullable: true
          type: string
        sellerCountry:
          $ref: "#/components/schemas/Sellercountry"
        buyerId:
          nullable: true
          type: string
        buyerVatId:
          nullable: true
          type: string
        buyerCountry:
          $ref: "#/components/schemas/Buyercountry"
        taxExclusiveAmount:
          $ref: "#/components/schemas/Taxexclusiveamount_1"
        taxAmount:
          $ref: "#/components/schemas/Taxamount_1"
        taxBreakdown:
          description: VAT breakdown
          items:
            $ref: "#/components/schemas/TaxBreakdownInput"
          minItems: 1
          title: Taxbreakdown
          type: array
        referencedInvoiceId:
          nullable: true
          type: string
        referencedInvoiceDate:
          format: date
          nullable: true
          type: string
      required:
      - buyerCountry
      - invoiceId
      - issueDate
      - sellerSiren
      - taxAmount
      - taxBreakdown
      - taxExclusiveAmount
      title: InvoiceInput
    InvoicePaymentInput:
      description: |-
        Payment linked to a specific invoice (flux 10.2).

        Used for B2B international invoice payments.
      properties:
        invoiceId:
          description: Invoice identifier
          example: FAC-2025-001
          title: Invoiceid
          type: string
        invoiceDate:
          description: Original invoice date
          example: 2025-01-15
          format: date
          title: Invoicedate
          type: string
        paymentDate:
          description: Payment date
          example: 2025-01-25
          format: date
          title: Paymentdate
          type: string
        currency:
          $ref: "#/components/schemas/Currency"
        amountsByRate:
          description: Payment amounts by VAT rate
          items:
            $ref: "#/components/schemas/PaymentAmountByRate"
          minItems: 1
          title: Amountsbyrate
          type: array
      required:
      - amountsByRate
      - invoiceDate
      - invoiceId
      - paymentDate
      title: InvoicePaymentInput
    InvoiceStatus:
      description: Chorus Pro invoice status.
      properties:
        code:
          description: "Status code (SOUMISE, VALIDEE, REJETEE, SUSPENDUE, MANDATEE,\
            \ MISE_EN_PAIEMENT, etc.)"
          title: Code
          type: string
        label:
          description: Status label
          title: Label
          type: string
        date:
          nullable: true
          type: string
      required:
      - code
      - label
      title: InvoiceStatus
    InvoiceTypeCode:
      description: |-
        Document type according to BR-FR-04 (UNTDID 1001 codes).

        | Code | Name | Description |
        |------|------|-------------|
        | 380 | INVOICE | Commercial invoice |
        | 389 | SELF_BILLED_INVOICE | Self-billed invoice |
        | 393 | FACTORED_INVOICE | Factored invoice |
        | 501 | SELF_BILLED_FACTORED_INVOICE | Self-billed factored invoice |
        | 386 | PREPAYMENT_INVOICE | Prepayment invoice |
        | 500 | SELF_BILLED_PREPAYMENT_INVOICE | Self-billed prepayment invoice |
        | 384 | CORRECTIVE_INVOICE | Corrective invoice |
        | 471 | SELF_BILLED_CORRECTIVE_INVOICE | Self-billed corrective invoice |
        | 472 | FACTORED_CORRECTIVE_INVOICE | Factored corrective invoice |
        | 473 | SELF_BILLED_FACTORED_CORRECTIVE_INVOICE | Self-billed factored corrective invoice |
        | 381 | CREDIT_NOTE | Credit note |
        | 261 | SELF_BILLED_CREDIT_NOTE | Self-billed credit note |
        | 262 | GLOBAL_ALLOWANCE_CREDIT_NOTE | Credit note for global allowance |
        | 396 | FACTORED_CREDIT_NOTE | Factored credit note |
        | 502 | SELF_BILLED_FACTORED_CREDIT_NOTE | Self-billed factored credit note |
        | 503 | PREPAYMENT_CREDIT_NOTE | Credit note for prepayment invoice |
      enum:
      - "380"
      - "389"
      - "393"
      - "501"
      - "386"
      - "500"
      - "384"
      - "471"
      - "472"
      - "473"
      - "381"
      - "261"
      - "262"
      - "396"
      - "502"
      - "503"
      title: InvoiceTypeCode
      type: string
      x-enum-descriptions:
      - Commercial Invoice
      - Self-billed Invoice
      - Factored Invoice
      - Self-billed Factored Invoice
      - Prepayment Invoice
      - Self-billed Prepayment Invoice
      - Corrective Invoice
      - Self-billed Corrective Invoice
      - Factored Corrective Invoice
      - Self-billed Factored Corrective Invoice
      - Credit Note
      - Self-billed Credit Note
      - Global Allowance Credit Note
      - Factored Credit Note
      - Self-billed Factored Credit Note
      - Prepayment Credit Note
      x-enum-varnames:
      - INVOICE
      - SELF_BILLED_INVOICE
      - FACTORED_INVOICE
      - SELF_BILLED_FACTORED_INVOICE
      - PREPAYMENT_INVOICE
      - SELF_BILLED_PREPAYMENT_INVOICE
      - CORRECTIVE_INVOICE
      - SELF_BILLED_CORRECTIVE_INVOICE
      - FACTORED_CORRECTIVE_INVOICE
      - SELF_BILLED_FACTORED_CORRECTIVE_INVOICE
      - CREDIT_NOTE
      - SELF_BILLED_CREDIT_NOTE
      - GLOBAL_ALLOWANCE_CREDIT_NOTE
      - FACTORED_CREDIT_NOTE
      - SELF_BILLED_FACTORED_CREDIT_NOTE
      - PREPAYMENT_CREDIT_NOTE
    InvoiceTypeCode-Output:
      description: |-
        Document type according to BR-FR-04 (UNTDID 1001 codes).

        | Code | Name | Description |
        |------|------|-------------|
        | 380 | INVOICE | Commercial invoice |
        | 389 | SELF_BILLED_INVOICE | Self-billed invoice |
        | 393 | FACTORED_INVOICE | Factored invoice |
        | 501 | SELF_BILLED_FACTORED_INVOICE | Self-billed factored invoice |
        | 386 | PREPAYMENT_INVOICE | Prepayment invoice |
        | 500 | SELF_BILLED_PREPAYMENT_INVOICE | Self-billed prepayment invoice |
        | 384 | CORRECTIVE_INVOICE | Corrective invoice |
        | 471 | SELF_BILLED_CORRECTIVE_INVOICE | Self-billed corrective invoice |
        | 472 | FACTORED_CORRECTIVE_INVOICE | Factored corrective invoice |
        | 473 | SELF_BILLED_FACTORED_CORRECTIVE_INVOICE | Self-billed factored corrective invoice |
        | 381 | CREDIT_NOTE | Credit note |
        | 261 | SELF_BILLED_CREDIT_NOTE | Self-billed credit note |
        | 262 | GLOBAL_ALLOWANCE_CREDIT_NOTE | Credit note for global allowance |
        | 396 | FACTORED_CREDIT_NOTE | Factored credit note |
        | 502 | SELF_BILLED_FACTORED_CREDIT_NOTE | Self-billed factored credit note |
        | 503 | PREPAYMENT_CREDIT_NOTE | Credit note for prepayment invoice |
      enum:
      - "380"
      - "389"
      - "393"
      - "501"
      - "386"
      - "500"
      - "384"
      - "471"
      - "472"
      - "473"
      - "381"
      - "261"
      - "262"
      - "396"
      - "502"
      - "503"
      title: InvoiceTypeCode
      type: string
      x-enum-descriptions:
      - Commercial Invoice
      - Self-billed Invoice
      - Factored Invoice
      - Self-billed Factored Invoice
      - Prepayment Invoice
      - Self-billed Prepayment Invoice
      - Corrective Invoice
      - Self-billed Corrective Invoice
      - Factored Corrective Invoice
      - Self-billed Factored Corrective Invoice
      - Credit Note
      - Self-billed Credit Note
      - Global Allowance Credit Note
      - Factored Credit Note
      - Self-billed Factored Credit Note
      - Prepayment Credit Note
      x-enum-varnames:
      - INVOICE
      - SELF_BILLED_INVOICE
      - FACTORED_INVOICE
      - SELF_BILLED_FACTORED_INVOICE
      - PREPAYMENT_INVOICE
      - SELF_BILLED_PREPAYMENT_INVOICE
      - CORRECTIVE_INVOICE
      - SELF_BILLED_CORRECTIVE_INVOICE
      - FACTORED_CORRECTIVE_INVOICE
      - SELF_BILLED_FACTORED_CORRECTIVE_INVOICE
      - CREDIT_NOTE
      - SELF_BILLED_CREDIT_NOTE
      - GLOBAL_ALLOWANCE_CREDIT_NOTE
      - FACTORED_CREDIT_NOTE
      - SELF_BILLED_FACTORED_CREDIT_NOTE
      - PREPAYMENT_CREDIT_NOTE
    InvoicingFrameworkCode:
      description: Chorus Pro codes for invoicing framework (B2G usage).
      enum:
      - A1_FACTURE_FOURNISSEUR
      - A2_FACTURE_FOURNISSEUR_DEJA_PAYEE
      - A9_FACTURE_SOUSTRAITANT
      - A12_FACTURE_COTRAITANT
      title: InvoicingFrameworkCode
      type: string
    MandatoryNoteSchema:
      description: Mandatory note detected with location and XML/PDF comparison.
      example:
        bbox:
          height: 5.8
          page: 0
          width: 61.6
          x0: 238.4
          x1: 300.0
          y0: 164.4
          y1: 170.2
        label: Recovery indemnity
        message: XML text found in PDF
        pdfValue: fixed indemnity of 40 euros
        status: COMPLIANT
        subjectCode: PMT
        xmlValue: "In case of late payment, a fixed indemnity of 40 euros will be\
          \ due."
      properties:
        subjectCode:
          description: "Subject code (PMT, PMD, AAB)"
          title: Subjectcode
          type: string
        label:
          description: "Label (e.g., Recovery indemnity)"
          title: Label
          type: string
        pdfValue:
          nullable: true
          type: string
        xmlValue:
          nullable: true
          type: string
        status:
          allOf:
          - $ref: "#/components/schemas/FieldStatus"
          default: NOT_VERIFIED
          description: Compliance status (COMPLIANT if XML found in PDF)
        message:
          nullable: true
          type: string
        bbox:
          allOf:
          - $ref: "#/components/schemas/BoundingBoxSchema"
          nullable: true
      required:
      - label
      - subjectCode
      title: MandatoryNoteSchema
    MissingField:
      description: Champ manquant requis pour la conformite.
      example:
        field: field
        bt_code: bt_code
        confidence: 2.027123023002322
        required_for:
        - required_for
        - required_for
        description: description
        suggested_value: suggested_value
      properties:
        field:
          description: Nom du champ
          title: Field
          type: string
        bt_code:
          description: Code Business Term (BT-XX)
          title: Bt Code
          type: string
        description:
          description: Description du champ
          title: Description
          type: string
        required_for:
          description: Profils necessitant ce champ
          items:
            type: string
          title: Required For
          type: array
        suggested_value:
          nullable: true
          type: string
        confidence:
          nullable: true
          type: number
      required:
      - bt_code
      - description
      - field
      - required_for
      title: MissingField
    OperationNature:
      description: |-
        Operation nature (BT-23) for Factur-X - French Reform.

        BR-FR-08: The invoicing framework must be one of the following codes.
        First letter indicates: B = Goods, S = Services, M = Mixed.

        Ref: XP Z12-012, article_conformite_pdf_facturx.md

        Example:
            >>> framework = InvoicingFramework(
            ...     invoicing_framework_code=InvoicingFrameworkCode.A1_SUPPLIER_INVOICE,
            ...     operation_nature=OperationNature.GOODS
            ... )
      enum:
      - B1
      - S1
      - M1
      - B2
      - S2
      - M2
      - B4
      - S4
      - M4
      - S3
      - S5
      - S6
      - B7
      - S7
      title: OperationNature
      type: string
    OutputFormat:
      description: Output format for invoice generation.
      enum:
      - xml
      - pdf
      title: OutputFormat
      type: string
    PDFValidationResultAPI:
      description: Complete result of a Factur-X PDF validation.
      example:
        pdfaValidationMethod: metadata
        signatureErrors:
        - signatureErrors
        - signatureErrors
        isSigned: true
        detectedProfile: detectedProfile
        summaryMessage: summaryMessage
        xmlPresent: true
        pdfaVersion: pdfaVersion
        xmlErrors:
        - xmlErrors
        - xmlErrors
        failedRules: 6
        isCompliant: true
        xmpErrors:
        - xmpErrors
        - xmpErrors
        signatures:
        - reason: reason
          fieldName: fieldName
          signingDate: signingDate
          isValid: true
          location: location
          signer: signer
        - reason: reason
          fieldName: fieldName
          signingDate: signingDate
          isValid: true
          location: location
          signer: signer
        pdfaWarnings:
        - pdfaWarnings
        - pdfaWarnings
        xmlCompliant: true
        pdfaErrors:
        - pdfaErrors
        - pdfaErrors
        pdfaCompliant: true
        validatedRules: 0
        xmpPresent: true
        xmpProfile: xmpProfile
        signatureCount: 1
        xmpFacturxCompliant: true
        xmpMetadata:
          key: ""
        xmpVersion: xmpVersion
      properties:
        isCompliant:
          description: "True if PDF complies with all criteria (XML, PDF/A, XMP)"
          title: Iscompliant
          type: boolean
        xmlPresent:
          description: True if a Factur-X XML is embedded in the PDF
          title: Xmlpresent
          type: boolean
        xmlCompliant:
          description: True if Factur-X XML complies with Schematron rules
          title: Xmlcompliant
          type: boolean
        detectedProfile:
          nullable: true
          type: string
        xmlErrors:
          description: List of XML validation errors
          items:
            type: string
          title: Xmlerrors
          type: array
        pdfaCompliant:
          description: True if PDF is PDF/A compliant
          title: Pdfacompliant
          type: boolean
        pdfaVersion:
          nullable: true
          type: string
        pdfaValidationMethod:
          default: metadata
          description: Method used for PDF/A validation (metadata or verapdf)
          title: Pdfavalidationmethod
          type: string
        validatedRules:
          nullable: true
          type: integer
        failedRules:
          nullable: true
          type: integer
        pdfaErrors:
          description: List of PDF/A compliance errors
          items:
            type: string
          title: Pdfaerrors
          type: array
        pdfaWarnings:
          description: List of PDF/A warnings
          items:
            type: string
          title: Pdfawarnings
          type: array
        xmpPresent:
          description: True if XMP metadata is present
          title: Xmppresent
          type: boolean
        xmpFacturxCompliant:
          description: True if XMP metadata contains Factur-X information
          title: Xmpfacturxcompliant
          type: boolean
        xmpProfile:
          nullable: true
          type: string
        xmpVersion:
          nullable: true
          type: string
        xmpErrors:
          description: List of XMP metadata errors
          items:
            type: string
          title: Xmperrors
          type: array
        xmpMetadata:
          additionalProperties: true
          description: XMP metadata extracted from PDF
          title: Xmpmetadata
          type: object
        isSigned:
          description: True if PDF contains at least one signature
          title: Issigned
          type: boolean
        signatureCount:
          default: 0
          description: Number of electronic signatures found
          title: Signaturecount
          type: integer
        signatures:
          description: List of found signatures with their information
          items:
            $ref: "#/components/schemas/SignatureInfoAPI"
          title: Signatures
          type: array
        signatureErrors:
          description: List of errors during signature analysis
          items:
            type: string
          title: Signatureerrors
          type: array
        summaryMessage:
          description: Message summarizing the validation result
          title: Summarymessage
          type: string
      required:
      - isCompliant
      - isSigned
      - pdfaCompliant
      - summaryMessage
      - xmlCompliant
      - xmlPresent
      - xmpFacturxCompliant
      - xmpPresent
      title: PDFValidationResultAPI
    PDPCredentials:
      description: |-
        PDP credentials for zero-storage strategy (Strategy B).

        Allows providing PDP credentials directly in the request
        instead of storing them in Django.

        Useful for:
        - Ad-hoc tests without persisting credentials
        - Temporary integrations
        - Development environments
      example:
        clientId: factpulse_prod_abc123
        clientSecret: secret_xyz789
        directoryServiceUrl: https://api.pdp-example.fr/directory/v1
        flowServiceUrl: https://api.pdp-example.fr/flow/v1
        tokenUrl: https://auth.pdp-example.fr/oauth/token
      properties:
        flowServiceUrl:
          description: Base URL of the AFNOR Flow Service
          example: https://api.pdp-example.fr/flow/v1
          title: Flowserviceurl
          type: string
        directoryServiceUrl:
          nullable: true
          type: string
        tokenUrl:
          description: OAuth2 server URL
          example: https://auth.pdp-example.fr/oauth/token
          title: Tokenurl
          type: string
        clientId:
          description: OAuth2 Client ID
          example: factpulse_prod_abc123
          title: Clientid
          type: string
        clientSecret:
          description: OAuth2 Client Secret (sensitive)
          example: secret_xyz789
          title: Clientsecret
          type: string
      required:
      - clientId
      - clientSecret
      - flowServiceUrl
      - tokenUrl
      title: PDPCredentials
    PageDimensionsSchema:
      description: PDF page dimensions.
      example:
        height: 841.8
        width: 595.2
      properties:
        width:
          description: Width in PDF points
          title: Width
          type: number
        height:
          description: Height in PDF points
          title: Height
          type: number
      required:
      - height
      - width
      title: PageDimensionsSchema
    PaymentAmountByRate:
      description: Payment amount for a specific VAT rate.
      properties:
        rate:
          $ref: "#/components/schemas/Rate"
        amount:
          $ref: "#/components/schemas/Amount"
      required:
      - amount
      - rate
      title: PaymentAmountByRate
    PostalAddress:
      description: "Represents a postal address (BG-5, BG-8, BG-12, BG-15)."
      properties:
        postalCode:
          nullable: true
          type: string
        lineOne:
          nullable: true
          type: string
        lineTwo:
          nullable: true
          type: string
        lineThree:
          nullable: true
          type: string
        city:
          nullable: true
          type: string
        countryCode:
          nullable: true
          type: string
        countrySubdivision:
          nullable: true
          type: string
      title: PostalAddress
    ProcessingOptions:
      description: Processing options for generation and submission.
      example:
        autoEnrich: true
        facturxProfile: EN16931
        validateXml: true
        verifyDestinationParameters: true
      properties:
        facturxProfile:
          allOf:
          - $ref: "#/components/schemas/APIProfile"
          default: EN16931
          description: Factur-X profile to use
        autoEnrich:
          default: true
          description: "Auto-enrich data (Company APIs, Chorus Pro, etc.)"
          title: Autoenrich
          type: boolean
        validateXml:
          default: true
          description: Validate Factur-X XML with Schematron
          title: Validatexml
          type: boolean
        verifyDestinationParameters:
          default: true
          description: "Verify required parameters for destination (e.g., service_code\
            \ for Chorus)"
          title: Verifydestinationparameters
          type: boolean
      title: ProcessingOptions
    ProcessingRule:
      description: |-
        AFNOR XP Z12-013 ProcessingRule (Annexe A, lignes 212-216).

        Valeurs EXACTES de la spec (case-sensitive).
      enum:
      - B2B
      - B2BInt
      - B2C
      - OutOfScope
      - ArchiveOnly
      - NotApplicable
      title: ProcessingRule
      type: string
    ReasonCodeInfo:
      description: Information sur un code motif.
      example:
        code: code
        name: name
        description: description
      properties:
        code:
          description: Code
          title: Code
          type: string
        name:
          description: Nom Python de l'enum
          title: Name
          type: string
        description:
          description: Description
          title: Description
          type: string
      required:
      - code
      - description
      - name
      title: ReasonCodeInfo
    ReasonCodesResponse:
      description: Liste des codes motif disponibles.
      example:
        codes:
        - code: code
          name: name
          description: description
        - code: code
          name: name
          description: description
        count: 0
        source: BR-FR-CDV-CL-09
      properties:
        codes:
          description: Liste des codes motif
          items:
            $ref: "#/components/schemas/ReasonCodeInfo"
          title: Codes
          type: array
        count:
          description: Nombre de codes
          title: Count
          type: integer
        source:
          default: BR-FR-CDV-CL-09
          description: R√®gle source
          title: Source
          type: string
      required:
      - codes
      - count
      title: ReasonCodesResponse
    RecipientInput:
      description: Destinataire du message CDAR.
      example:
        siren: siren
        role: BY
        name: name
        siret: siret
        email: email
      properties:
        siren:
          nullable: true
          type: string
        siret:
          nullable: true
          type: string
        name:
          nullable: true
          type: string
        role:
          default: BY
          description: "Code r√¥le (BY, SE, WK, etc.)"
          title: Role
          type: string
        email:
          nullable: true
          type: string
      title: RecipientInput
    ReportPeriod:
      description: Reporting period.
      properties:
        startDate:
          description: Period start date (YYYY-MM-DD)
          example: 2025-01-01
          format: date
          title: Startdate
          type: string
        endDate:
          description: Period end date (YYYY-MM-DD)
          example: 2025-01-31
          format: date
          title: Enddate
          type: string
      required:
      - endDate
      - startDate
      title: ReportPeriod
    ReportSender:
      description: Report sender/issuer information.
      properties:
        siren:
          description: SIREN or SIRET number
          example: "123456789"
          maxLength: 14
          minLength: 9
          title: Siren
          type: string
        name:
          description: Company name
          example: Ma Soci√©t√© SARL
          title: Name
          type: string
        vatId:
          nullable: true
          type: string
      required:
      - name
      - siren
      title: ReportSender
    SchematronValidationError:
      description: Erreur de validation Schematron avec suggestion de correction.
      example:
        severity: severity
        bt_code: bt_code
        suggested_field: suggested_field
        confidence: 0.9301444243932576
        rule: rule
        message: message
        explanation: explanation
        suggested_value: suggested_value
      properties:
        rule:
          description: "Code de la regle (BR-XX, BR-FR-XX)"
          title: Rule
          type: string
        bt_code:
          nullable: true
          type: string
        severity:
          description: "Gravite: error, warning"
          title: Severity
          type: string
        message:
          description: Message d'erreur
          title: Message
          type: string
        suggested_value:
          nullable: true
          type: string
        suggested_field:
          nullable: true
          type: string
        explanation:
          nullable: true
          type: string
        confidence:
          maximum: 1.0
          minimum: 0.0
          nullable: true
          type: number
      required:
      - message
      - rule
      - severity
      title: SchematronValidationError
    SchemeID:
      description: |-
        Identification scheme codes (Electronic Address Scheme - EAS),
        mainly for electronic invoice addressing.

        **Possible values:**
        - `0225`: FR_SIREN - French SIREN (most common for France)
        - `0009`: FR_SIRET - French SIRET
        - `0002`: FR_SIREN_OLD - French SIREN (old code, for legal organization ID)
        - `0088`: GLN - Global Location Number
        - `0060`: DUNS - Data Universal Numbering System
        - `9957`: FR_VAT_INTRA - French intra-community VAT number
        - `0199`: GLEIF - Global Legal Entity Identifier Foundation
        - `0231`: DT_DIRECTORY_ID - Directory ID for tax administration
        - `EM`: EMAIL - Email-based electronic address (BT-34/BT-49)
      enum:
      - "0225"
      - "0009"
      - "0002"
      - "0088"
      - "0060"
      - "9957"
      - "0199"
      - "0231"
      - EM
      - "0177"
      - "0224"
      - "9930"
      - "9915"
      - "9956"
      - "9920"
      - "9906"
      - "9944"
      - "9934"
      title: SchemeID
      type: string
      x-enum-varnames:
      - FR_SIREN
      - FR_SIRET
      - FR_SIREN_OLD
      - GLN
      - DUNS
      - FR_VAT_INTRA
      - GLEIF
      - DT_DIRECTORY_ID
      - EMAIL
      - ODETTE
      - FR_CHORUS_PRO_ROUTING
      - DE_VAT
      - AT_VAT
      - BE_VAT
      - ES_VAT
      - IT_VAT
      - NL_VAT
      - PT_VAT
      x-enum-descriptions:
      - FR_SIREN - French SIREN (most common for France)
      - FR_SIRET - French SIRET
      - "FR_SIREN_OLD - French SIREN (old code, for legal organization ID)"
      - GLN - Global Location Number (GLN)
      - DUNS - Data Universal Numbering System (DUNS)
      - FR_VAT_INTRA - French intra-community VAT number
      - GLEIF - Global Legal Entity Identifier Foundation (GLEIF)
      - DT_DIRECTORY_ID - Directory ID for tax administration
      - EMAIL - Email-based electronic address (BT-34/BT-49)
      - ODETTE - ODETTE network identifier
      - FR_CHORUS_PRO_ROUTING - Chorus Pro routing code
      - DE_VAT - German VAT number
      - AT_VAT - Austrian VAT number
      - BE_VAT - Belgian VAT number
      - ES_VAT - Spanish VAT number
      - IT_VAT - Italian VAT number
      - NL_VAT - Dutch VAT number
      - PT_VAT - Portuguese VAT number
    SearchServicesResponse:
      description: Structure services list.
      example:
        returnCode: 0
        total: 1
        services:
        - serviceCode: serviceCode
          serviceId: 6
          isActive: true
          serviceLabel: serviceLabel
        - serviceCode: serviceCode
          serviceId: 6
          isActive: true
          serviceLabel: serviceLabel
        message: message
      properties:
        returnCode:
          description: Return code (0 = success)
          title: Returncode
          type: integer
        message:
          description: Response message
          title: Message
          type: string
        services:
          description: List of services
          items:
            $ref: "#/components/schemas/StructureService"
          title: Services
          type: array
        total:
          default: 0
          description: Number of services
          title: Total
          type: integer
      required:
      - message
      - returnCode
      title: SearchServicesResponse
    SearchStructureRequest:
      description: Search structures by criteria.
      example:
        structureIdentifier: structureIdentifier
        credentials: ""
        companyName: companyName
        structureIdentifierType: structureIdentifierType
        restrictPrivateStructures: false
      properties:
        credentials:
          allOf:
          - $ref: "#/components/schemas/ChorusProCredentials"
          nullable: true
        structureIdentifier:
          nullable: true
          type: string
        structureIdentifierType:
          nullable: true
          type: string
        companyName:
          nullable: true
          type: string
        restrictPrivateStructures:
          default: false
          description: Limit search to private structures only
          title: Restrictprivatestructures
          type: boolean
      title: SearchStructureRequest
    SearchStructureResponse:
      description: Structure search response.
      example:
        returnCode: 0
        total: 1
        structures:
        - structureIdentifier: structureIdentifier
          structureName: structureName
          structureId: 6
          structureIdentifierType: structureIdentifierType
          status: status
        - structureIdentifier: structureIdentifier
          structureName: structureName
          structureId: 6
          structureIdentifierType: structureIdentifierType
          status: status
        message: message
      properties:
        returnCode:
          description: Return code (0 = success)
          title: Returncode
          type: integer
        message:
          description: Return message
          title: Message
          type: string
        structures:
          items:
            $ref: "#/components/schemas/StructureInfo"
          title: Structures
          type: array
        total:
          default: 0
          description: Total number of results
          title: Total
          type: integer
      required:
      - message
      - returnCode
      title: SearchStructureResponse
    SignatureInfo:
      description: Information about the electronic signature.
      properties:
        signed:
          description: PDF was signed
          title: Signed
          type: boolean
        cn:
          nullable: true
          type: string
        expiration:
          nullable: true
          type: string
      required:
      - signed
      title: SignatureInfo
    SignatureInfoAPI:
      description: Information about an electronic signature in a PDF.
      example:
        reason: reason
        fieldName: fieldName
        signingDate: signingDate
        isValid: true
        location: location
        signer: signer
      properties:
        fieldName:
          description: Signature field name in the PDF
          title: Fieldname
          type: string
        signer:
          nullable: true
          type: string
        signingDate:
          nullable: true
          type: string
        reason:
          nullable: true
          type: string
        location:
          nullable: true
          type: string
        isValid:
          nullable: true
          type: boolean
      required:
      - fieldName
      title: SignatureInfoAPI
    SignatureParameters:
      description: |-
        Optional parameters to sign the generated PDF.

        **MODE 1 - Stored certificate (recommended):**
        Only provide metadata (reason, location, etc.).
        The certificate will be automatically retrieved via client_uid from JWT.
        eIDAS compliant PAdES-B-LT signature.

        **MODE 2 - Keys in payload (tests/special cases):**
        Provide key_pem + cert_pem directly in the payload.
        Accepted PEM format: raw ("-----BEGIN...") or base64.

        **Selection rule:**
        - If key_pem AND cert_pem provided ‚Üí Mode 2 (payload keys)
        - Otherwise ‚Üí Mode 1 (stored certificate retrieved via client_uid)
      properties:
        keyPem:
          nullable: true
          type: string
        certPem:
          nullable: true
          type: string
        keyPassphrase:
          nullable: true
          type: string
        reason:
          nullable: true
          type: string
        location:
          nullable: true
          type: string
        contact:
          nullable: true
          type: string
        fieldName:
          default: FactPulseSignature
          description: PDF signature field name
          title: Fieldname
          type: string
        usePadesLt:
          default: false
          description: Enable PAdES-B-LT (long-term archival). REQUIRES certificate
            with OCSP/CRL access
          title: Usepadeslt
          type: boolean
        useTimestamp:
          default: true
          description: Enable RFC 3161 timestamping with FreeTSA (PAdES-B-T)
          title: Usetimestamp
          type: boolean
      title: SignatureParameters
    SimplifiedInvoiceData:
      description: Simplified invoice data (minimal format for auto-enrichment).
      properties:
        number:
          description: Unique invoice number
          title: Number
          type: string
        supplier:
          additionalProperties: true
          description: "Supplier information (siret, iban, ...)"
          title: Supplier
          type: object
        recipient:
          additionalProperties: true
          description: "Recipient information (siret, ...)"
          title: Recipient
          type: object
        lines:
          description: Invoice lines
          items:
            additionalProperties: true
            type: object
          minItems: 1
          title: Lines
          type: array
        date:
          nullable: true
          type: string
        dueDays:
          default: 30
          description: "Due date in days (default: 30)"
          maximum: 365.0
          minimum: 0.0
          title: Duedays
          type: integer
        comment:
          nullable: true
          type: string
        purchaseOrderReference:
          nullable: true
          type: string
        contractReference:
          nullable: true
          type: string
        invoiceType:
          allOf:
          - $ref: "#/components/schemas/InvoiceTypeCode"
          default: "380"
          description: "Document type (UNTDID 1001). Default: 380 (Invoice)."
        precedingInvoiceReference:
          nullable: true
          type: string
        operationNature:
          allOf:
          - $ref: "#/components/schemas/OperationNature"
          nullable: true
        invoicingFramework:
          allOf:
          - $ref: "#/components/schemas/InvoicingFrameworkCode"
          nullable: true
      required:
      - lines
      - number
      - recipient
      - supplier
      title: SimplifiedInvoiceData
    StatusCodeInfo:
      description: Information sur un code statut.
      example:
        code: code
        name: name
        description: description
      properties:
        code:
          description: Code num√©rique
          title: Code
          type: string
        name:
          description: Nom Python de l'enum
          title: Name
          type: string
        description:
          description: Description
          title: Description
          type: string
      required:
      - code
      - description
      - name
      title: StatusCodeInfo
    StatusCodesResponse:
      description: Liste des codes statut disponibles.
      example:
        codes:
        - code: code
          name: name
          description: description
        - code: code
          name: name
          description: description
        count: 0
        source: BR-FR-CDV-CL-06
      properties:
        codes:
          description: Liste des codes statut
          items:
            $ref: "#/components/schemas/StatusCodeInfo"
          title: Codes
          type: array
        count:
          description: Nombre de codes
          title: Count
          type: integer
        source:
          default: BR-FR-CDV-CL-06
          description: R√®gle source
          title: Source
          type: string
      required:
      - codes
      - count
      title: StatusCodesResponse
    StructureInfo:
      description: Structure information.
      example:
        structureIdentifier: structureIdentifier
        structureName: structureName
        structureId: 6
        structureIdentifierType: structureIdentifierType
        status: status
      properties:
        structureId:
          description: Chorus Pro structure ID
          title: Structureid
          type: integer
        structureIdentifier:
          description: "Identifier (SIRET, SIREN)"
          title: Structureidentifier
          type: string
        structureName:
          description: Structure name
          title: Structurename
          type: string
        structureIdentifierType:
          description: Identifier type
          title: Structureidentifiertype
          type: string
        status:
          description: "Status (ACTIVE, INACTIVE)"
          title: Status
          type: string
      required:
      - status
      - structureId
      - structureIdentifier
      - structureIdentifierType
      - structureName
      title: StructureInfo
    StructureParameters:
      description: Mandatory structure parameters.
      properties:
        serviceCodeRequired:
          default: false
          description: Service code is mandatory
          title: Servicecoderequired
          type: boolean
        engagementNumberRequired:
          default: false
          description: Engagement number is mandatory
          title: Engagementnumberrequired
          type: boolean
        engagementOrServiceManagement:
          default: false
          description: EJ or service code management enabled
          title: Engagementorservicemanagement
          type: boolean
      title: StructureParameters
    StructureService:
      description: Structure service.
      example:
        serviceCode: serviceCode
        serviceId: 6
        isActive: true
        serviceLabel: serviceLabel
      properties:
        serviceId:
          description: Service ID
          title: Serviceid
          type: integer
        serviceCode:
          description: Service code
          title: Servicecode
          type: string
        serviceLabel:
          description: Service label
          title: Servicelabel
          type: string
        isActive:
          description: Service active
          title: Isactive
          type: boolean
      required:
      - isActive
      - serviceCode
      - serviceId
      - serviceLabel
      title: StructureService
    SubmitAggregatedReportRequest:
      description: Request to submit an aggregated e-reporting to a PA/PDP.
      example:
        data: ""
        pdpClientSecret: pdpClientSecret
        pdpFlowServiceUrl: pdpFlowServiceUrl
        pdpTokenUrl: pdpTokenUrl
        pdpClientId: pdpClientId
        trackingId: trackingId
      properties:
        data:
          allOf:
          - $ref: "#/components/schemas/CreateAggregatedReportRequest"
          description: Aggregated e-reporting data
        trackingId:
          nullable: true
          type: string
        pdpFlowServiceUrl:
          nullable: true
          type: string
        pdpTokenUrl:
          nullable: true
          type: string
        pdpClientId:
          nullable: true
          type: string
        pdpClientSecret:
          nullable: true
          type: string
      required:
      - data
      title: SubmitAggregatedReportRequest
    SubmitCDARRequest:
      description: Requ√™te de soumission CDAR (g√©n√©ration + envoi).
      properties:
        documentId:
          description: Identifiant unique du message CDAR
          title: Documentid
          type: string
        businessProcess:
          default: REGULATED
          description: "Code processus m√©tier (REGULATED, B2C, B2BINT, etc.)"
          title: Businessprocess
          type: string
        typeCode:
          default: "23"
          description: "Type de message (23=Traitement, 305=Transmission)"
          title: Typecode
          type: string
        senderSiren:
          description: SIREN de l'√©metteur (9 chiffres)
          title: Sendersiren
          type: string
        senderRole:
          default: WK
          description: "R√¥le de l'√©metteur (WK, SE, BY, etc.)"
          title: Senderrole
          type: string
        senderName:
          nullable: true
          type: string
        senderEmail:
          nullable: true
          type: string
        recipients:
          description: Liste des destinataires
          items:
            $ref: "#/components/schemas/RecipientInput"
          title: Recipients
          type: array
        invoiceId:
          description: Identifiant de la facture (BT-1)
          title: Invoiceid
          type: string
        invoiceIssueDate:
          description: Date d'√©mission de la facture (YYYY-MM-DD)
          format: date
          title: Invoiceissuedate
          type: string
        invoiceTypeCode:
          default: "380"
          description: "Type de document (380=Facture, 381=Avoir)"
          title: Invoicetypecode
          type: string
        invoiceSellerSiren:
          nullable: true
          type: string
        invoiceBuyerSiren:
          nullable: true
          type: string
        status:
          description: Code statut de la facture (200-601)
          title: Status
          type: string
        reasonCode:
          nullable: true
          type: string
        reasonText:
          nullable: true
          type: string
        actionCode:
          nullable: true
          type: string
        encaisseAmount:
          $ref: "#/components/schemas/Encaisseamount"
        flowType:
          default: CustomerInvoiceLC
          description: "Type de flux AFNOR (CustomerInvoiceLC, SupplierInvoiceLC,\
            \ etc.)"
          title: Flowtype
          type: string
      required:
      - documentId
      - invoiceId
      - invoiceIssueDate
      - senderSiren
      - status
      title: SubmitCDARRequest
    SubmitCDARResponse:
      description: R√©ponse de soumission CDAR.
      example:
        documentId: documentId
        message: message
        flowId: flowId
        status: status
      properties:
        flowId:
          description: Identifiant du flux AFNOR
          title: Flowid
          type: string
        status:
          description: Statut de la soumission
          title: Status
          type: string
        message:
          nullable: true
          type: string
        documentId:
          nullable: true
          type: string
      required:
      - flowId
      - status
      title: SubmitCDARResponse
    SubmitCDARXMLRequest:
      description: Requ√™te de soumission d'un XML CDAR pr√©-g√©n√©r√©.
      properties:
        xml:
          description: XML CDAR √† soumettre
          title: Xml
          type: string
        flowType:
          default: CustomerInvoiceLC
          description: Type de flux AFNOR
          title: Flowtype
          type: string
        filename:
          nullable: true
          type: string
      required:
      - xml
      title: SubmitCDARXMLRequest
    SubmitCompleteInvoiceRequest:
      description: |-
        Request to submit a complete invoice (generation + submission).

        Workflow:
        1. Auto-enrichment (optional)
        2. Factur-X PDF generation
        3. Signature (optional)
        4. Submission to destination
      example:
        destination:
          type: chorus_pro
        invoiceData:
          lines:
          - description: Consulting service
            quantity: 10
            unitPrice: 100.0
            vatRate: 20.0
          number: FACT-2025-001
          recipient:
            siret: "98765432109876"
          supplier:
            iban: FR7630006000011234567890189
            siret: "12345678901234"
        options:
          autoEnrich: true
          facturxProfile: EN16931
          validateXml: true
        signature:
          location: "Paris, France"
          reason: Factur-X compliance - Electronic signature
          usePadesLt: false
          useTimestamp: true
        sourcePdf: JVBERi0xLjQKJeLjz9MKMSAwIG9iaiA8PC...
      properties:
        invoiceData:
          allOf:
          - $ref: "#/components/schemas/SimplifiedInvoiceData"
          description: Invoice data in simplified format (see examples)
        sourcePdf:
          description: Base64-encoded source PDF (will be transformed to Factur-X)
          title: Sourcepdf
          type: string
        destination:
          $ref: "#/components/schemas/Destination"
        signature:
          allOf:
          - $ref: "#/components/schemas/SignatureParameters"
          nullable: true
        options:
          allOf:
          - $ref: "#/components/schemas/ProcessingOptions"
          description: Processing options
      required:
      - destination
      - invoiceData
      - sourcePdf
      title: SubmitCompleteInvoiceRequest
    SubmitCompleteInvoiceResponse:
      description: Complete response after automated submission.
      example:
        chorusResult:
          attachmentId: 78910
          chorusInvoiceId: 123456
          depositFlowNumber: FLUX-2025-001
        destinationType: chorus_pro
        enrichedInvoice:
          invoiceNumber: FACT-2025-001
          recipientId: 99986401
          recipientName: CLIENT SA
          supplierId: 26300989
          supplierName: MY COMPANY SARL
          totalGrossAmount: 1200.0
          totalNetAmount: 1000.0
          vatAmount: 200.0
        facturxPdf:
          profile: EN16931
          signed: true
          size: 125430
        message: Invoice successfully submitted to Chorus Pro
        pdfBase64: JVBERi0xLjcKJeLjz9MKNSAwIG9iago8PC9GaWx0ZXIvRmxhdGVE...
        signature:
          cn: MY COMPANY - Server Seal
          expiration: 2026-12-31T23:59:59Z
          signed: true
        success: true
      properties:
        success:
          description: Invoice was successfully submitted
          title: Success
          type: boolean
        destinationType:
          description: Destination type
          enum:
          - chorus_pro
          - afnor
          title: Destinationtype
          type: string
        chorusResult:
          allOf:
          - $ref: "#/components/schemas/ChorusProResult"
          nullable: true
        afnorResult:
          allOf:
          - $ref: "#/components/schemas/AFNORResult"
          nullable: true
        enrichedInvoice:
          allOf:
          - $ref: "#/components/schemas/EnrichedInvoiceInfo"
          description: Enriched invoice data
        facturxPdf:
          allOf:
          - $ref: "#/components/schemas/FacturXPDFInfo"
          description: Generated PDF information
        signature:
          allOf:
          - $ref: "#/components/schemas/SignatureInfo"
          nullable: true
        pdfBase64:
          description: Generated Factur-X PDF (and signed if requested) base64-encoded
          title: Pdfbase64
          type: string
        message:
          description: Return message
          title: Message
          type: string
      required:
      - destinationType
      - enrichedInvoice
      - facturxPdf
      - message
      - pdfBase64
      - success
      title: SubmitCompleteInvoiceResponse
    SubmitEReportingRequest:
      description: Request to submit e-reporting to a PA/PDP.
      example:
        data: ""
        pdpClientSecret: pdpClientSecret
        pdpFlowServiceUrl: pdpFlowServiceUrl
        pdpTokenUrl: pdpTokenUrl
        pdpClientId: pdpClientId
        trackingId: trackingId
      properties:
        data:
          allOf:
          - $ref: "#/components/schemas/CreateEReportingRequest"
          description: E-Reporting data to submit
        trackingId:
          nullable: true
          type: string
        pdpFlowServiceUrl:
          nullable: true
          type: string
        pdpTokenUrl:
          nullable: true
          type: string
        pdpClientId:
          nullable: true
          type: string
        pdpClientSecret:
          nullable: true
          type: string
      required:
      - data
      title: SubmitEReportingRequest
    SubmitEReportingResponse:
      description: Response after submitting e-reporting to PA/PDP.
      example:
        afnorFlowType: AggregatedCustomerTransactionReport
        afnorResponse:
          flowId: 550e8400-e29b-41d4-a716-446655440000
          name: E-Reporting EREPORT-2025-001
          sha256: a3c5f1...
        flowId: 550e8400-e29b-41d4-a716-446655440000
        flowType: "10.3"
        message: E-Reporting successfully submitted to PA
        reportId: EREPORT-2025-001
        sha256: a3c5f1...
        trackingId: TRACK-2025-001
      properties:
        flowId:
          description: Flow identifier from PA/PDP
          title: Flowid
          type: string
        reportId:
          description: Report identifier
          title: Reportid
          type: string
        trackingId:
          nullable: true
          type: string
        flowType:
          description: Flux type
          title: Flowtype
          type: string
        sha256:
          description: SHA256 hash of submitted XML
          title: Sha256
          type: string
        afnorFlowType:
          nullable: true
          type: string
        afnorResponse:
          additionalProperties: true
          nullable: true
          type: object
        message:
          description: Status message
          title: Message
          type: string
      required:
      - flowId
      - flowType
      - message
      - reportId
      - sha256
      title: SubmitEReportingResponse
    SubmitInvoiceRequest:
      description: Submit an invoice to Chorus Pro.
      example:
        mainAttachmentId: 5
        credentials: ""
        serviceCode: serviceCode
        totalNetAmount: 6.027456183070403
        engagementNumber: engagementNumber
        structureId: 0
        totalGrossAmount: 5.962133916683182
        invoiceDate: invoiceDate
        vatAmount: 1.4658129805029452
        paymentDueDate: paymentDueDate
        mainAttachmentLabel: mainAttachmentLabel
        invoiceNumber: invoiceNumber
        comment: comment
        purchaseOrderReference: purchaseOrderReference
        contractReference: contractReference
      properties:
        credentials:
          allOf:
          - $ref: "#/components/schemas/ChorusProCredentials"
          nullable: true
        invoiceNumber:
          description: Invoice number
          title: Invoicenumber
          type: string
        invoiceDate:
          description: "Invoice date (ISO format: YYYY-MM-DD)"
          title: Invoicedate
          type: string
        paymentDueDate:
          nullable: true
          type: string
        structureId:
          description: Chorus Pro recipient structure ID
          title: Structureid
          type: integer
        serviceCode:
          nullable: true
          type: string
        engagementNumber:
          nullable: true
          type: string
        totalNetAmount:
          $ref: "#/components/schemas/SubmitNetAmount"
        vatAmount:
          $ref: "#/components/schemas/SubmitVatAmount"
        totalGrossAmount:
          $ref: "#/components/schemas/SubmitGrossAmount"
        mainAttachmentId:
          nullable: true
          type: integer
        mainAttachmentLabel:
          nullable: true
          type: string
        comment:
          nullable: true
          type: string
        purchaseOrderReference:
          nullable: true
          type: string
        contractReference:
          nullable: true
          type: string
      required:
      - invoiceDate
      - invoiceNumber
      - structureId
      - totalGrossAmount
      - totalNetAmount
      - vatAmount
      title: SubmitInvoiceRequest
    SubmitInvoiceResponse:
      description: Response after invoice submission.
      example:
        returnCode: 0
        chorusInvoiceId: 6
        depositFlowNumber: depositFlowNumber
        message: message
      properties:
        returnCode:
          description: Return code (0 = success)
          title: Returncode
          type: integer
        message:
          description: Return message
          title: Message
          type: string
        chorusInvoiceId:
          nullable: true
          type: integer
        depositFlowNumber:
          nullable: true
          type: string
      required:
      - message
      - returnCode
      title: SubmitInvoiceResponse
    TaskResponse:
      description: Immediate response after submitting an async task.
      example:
        taskId: taskId
      properties:
        taskId:
          description: Unique task identifier for polling
          title: Taskid
          type: string
      required:
      - taskId
      title: TaskResponse
    TaxBreakdownInput:
      description: VAT breakdown for a transaction or invoice.
      properties:
        rate:
          $ref: "#/components/schemas/Rate_1"
        taxableAmount:
          $ref: "#/components/schemas/Taxableamount"
        taxAmount:
          $ref: "#/components/schemas/Taxamount_2"
      required:
      - rate
      - taxAmount
      - taxableAmount
      title: TaxBreakdownInput
    TaxDueDateType:
      description: |-
        Tax due date type codes (TT-80 TaxDueDateTypeCode).

        Source: Annexe 6 - Format s√©mantique FE e-reporting v1.9
        Onglet: E-REPORTING - Flux 10, ligne 126
        Path XML: /TransactionsReport/Transactions/TaxDueDateTypeCode
        R√©f√©rentiel: UNTDID 2005 / UNTDID 2475
        Longueur: 3 caract√®res max
        Cardinalit√©: 0..1 (optionnel)
        R√®gles: P1.11, G1.67
      enum:
      - "5"
      - "29"
      - "72"
      - "3"
      - "35"
      - "432"
      title: TaxDueDateType
      type: string
    TransactionCategory:
      description: |-
        Transaction category codes (TT-81 CategoryCode).

        Source: Annexe 6 - Format s√©mantique FE e-reporting v1.9
        Onglet: E-REPORTING - Flux 10, ligne 127
        Path XML: /TransactionsReport/Transactions/CategoryCode
        Longueur: 10 caract√®res max
        Cardinalit√©: 1..1 (obligatoire pour flux 10.3)
        R√®gle de gestion: G1.68

        Note: Legacy aliases (B2C, B2B_INT, EXEMPT) were removed to fix OpenAPI
        generator issues. Use LEGACY_CATEGORY_MAPPING for backward compatibility.
      enum:
      - TLB1
      - TPS1
      - TNT1
      - TMA1
      title: TransactionCategory
      type: string
    TransmissionTypeCode:
      description: |-
        Transmission type codes (TT-4 TypeCode).

        Source: Annexe 6 - Format s√©mantique FE e-reporting v1.9
        Onglet: E-REPORTING - Flux 10, ligne 8
        Path XML: /ReportDocument/TypeCode
        Longueur: 2 caract√®res
        Cardinalit√©: 1..1 (obligatoire)
        R√®gles: G8.01, G8.02
      enum:
      - IN
      - RE
      title: TransmissionTypeCode
      type: string
    ValidateCDARRequest:
      description: Requ√™te de validation CDAR.
      example:
        senderSiren: senderSiren
        invoiceIssueDate: 2000-01-23
        documentId: documentId
        invoiceId: invoiceId
        encaisseAmount: 0.8008281904610115
        reasonCode: reasonCode
        senderRole: senderRole
        status: status
      properties:
        documentId:
          nullable: true
          type: string
        senderSiren:
          nullable: true
          type: string
        senderRole:
          nullable: true
          type: string
        invoiceId:
          nullable: true
          type: string
        invoiceIssueDate:
          format: date
          nullable: true
          type: string
        status:
          nullable: true
          type: string
        reasonCode:
          nullable: true
          type: string
        encaisseAmount:
          $ref: "#/components/schemas/Encaisseamount_1"
      title: ValidateCDARRequest
    ValidateCDARResponse:
      description: R√©ponse de validation CDAR.
      example:
        valid: true
        warnings:
        - severity: error
          field: field
          rule: rule
          message: message
        - severity: error
          field: field
          rule: rule
          message: message
        errors:
        - severity: error
          field: field
          rule: rule
          message: message
        - severity: error
          field: field
          rule: rule
          message: message
      properties:
        valid:
          description: R√©sultat de validation
          title: Valid
          type: boolean
        errors:
          description: Liste des erreurs
          items:
            $ref: "#/components/schemas/ValidationErrorResponse"
          title: Errors
          type: array
        warnings:
          description: Liste des avertissements
          items:
            $ref: "#/components/schemas/ValidationErrorResponse"
          title: Warnings
          type: array
      required:
      - valid
      title: ValidateCDARResponse
    ValidateEReportingRequest:
      description: Request to validate e-reporting data without submitting.
      example:
        data: ""
      properties:
        data:
          allOf:
          - $ref: "#/components/schemas/CreateEReportingRequest"
          description: E-Reporting data to validate
      required:
      - data
      title: ValidateEReportingRequest
    ValidateEReportingResponse:
      description: Response after validating e-reporting data.
      example:
        valid: true
        reportId: reportId
        warnings:
        - code: code
          field: field
          message: message
        - code: code
          field: field
          message: message
        message: message
        errors:
        - code: code
          field: field
          message: message
        - code: code
          field: field
          message: message
        flowType: flowType
      properties:
        valid:
          description: Whether the data is valid
          title: Valid
          type: boolean
        reportId:
          description: Report identifier
          title: Reportid
          type: string
        flowType:
          description: Flux type
          title: Flowtype
          type: string
        errors:
          description: List of validation errors (if any)
          items:
            $ref: "#/components/schemas/EReportingValidationError"
          title: Errors
          type: array
        warnings:
          description: List of validation warnings (if any)
          items:
            $ref: "#/components/schemas/EReportingValidationError"
          title: Warnings
          type: array
        message:
          description: Status message
          title: Message
          type: string
      required:
      - flowType
      - message
      - reportId
      - valid
      title: ValidateEReportingResponse
    ValidationError:
      example:
        msg: msg
        loc:
        - Location_inner
        - Location_inner
        type: type
      properties:
        loc:
          items:
            $ref: "#/components/schemas/Location_inner"
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
      - loc
      - msg
      - type
      title: ValidationError
    ValidationErrorDetail:
      description: |-
        Validation error detail (aligned with AFNOR AcknowledgementDetail).

        Unified format for all Factur-X validation errors,
        compatible with AFNOR XP Z12-013 standard.
      properties:
        level:
          allOf:
          - $ref: "#/components/schemas/ErrorLevel"
          default: Error
          description: "Severity level: 'Error' or 'Warning'"
        item:
          description: "Identifier of the concerned element (XPath, field, BR-FR rule,\
            \ etc.)"
          title: Item
          type: string
        reason:
          description: Error description
          title: Reason
          type: string
        source:
          allOf:
          - $ref: "#/components/schemas/ErrorSource"
          nullable: true
        code:
          nullable: true
          type: string
      required:
      - item
      - reason
      title: ValidationErrorDetail
    ValidationErrorResponse:
      description: Erreur de validation.
      example:
        severity: error
        field: field
        rule: rule
        message: message
      properties:
        field:
          description: Champ concern√©
          title: Field
          type: string
        message:
          description: Message d'erreur
          title: Message
          type: string
        rule:
          nullable: true
          type: string
        severity:
          default: error
          description: S√©v√©rit√© (error/warning)
          title: Severity
          type: string
      required:
      - field
      - message
      title: ValidationErrorResponse
    ValidationInfo:
      description: Informations sur la validation.
      example:
        schematron_rules_total: 7
        pdfa_compliant: true
        schematron_rules_passed: 2
        profile: profile
        errors:
        - severity: severity
          bt_code: bt_code
          suggested_field: suggested_field
          confidence: 0.9301444243932576
          rule: rule
          message: message
          explanation: explanation
          suggested_value: suggested_value
        - severity: severity
          bt_code: bt_code
          suggested_field: suggested_field
          confidence: 0.9301444243932576
          rule: rule
          message: message
          explanation: explanation
          suggested_value: suggested_value
        xml_embedded: true
      properties:
        profile:
          description: Profil Factur-X utilise
          title: Profile
          type: string
        schematron_rules_passed:
          description: Regles passees
          title: Schematron Rules Passed
          type: integer
        schematron_rules_total:
          description: Total regles
          title: Schematron Rules Total
          type: integer
        pdfa_compliant:
          default: true
          description: PDF/A-3 conforme
          title: Pdfa Compliant
          type: boolean
        xml_embedded:
          default: true
          description: XML embarque dans PDF
          title: Xml Embedded
          type: boolean
        errors:
          items:
            $ref: "#/components/schemas/SchematronValidationError"
          title: Errors
          type: array
      required:
      - profile
      - schematron_rules_passed
      - schematron_rules_total
      title: ValidationInfo
    ValidationSuccessResponse:
      description: Response for successful validation.
      example:
        message: message
      properties:
        message:
          description: Message confirming XML compliance.
          title: Message
          type: string
      required:
      - message
      title: ValidationSuccessResponse
    VerificationSuccessResponse:
      description: Successful verification response with unified data.
      example:
        complianceScore: 100.0
        compliantFieldsCount: 12
        facturxProfile: EN16931
        fields:
        - bbox:
            height: 15.0
            page: 0
            width: 70.3
            x0: 350.5
            x1: 420.8
            y0: 720.0
            y1: 735.0
          businessTerm: BT-1
          confidence: 0.95
          label: Invoice Number
          message: Compliant
          pdfValue: FACT-2024-001
          source: native_pdf
          status: COMPLIANT
          xmlValue: FACT-2024-001
        isCompliant: true
        isFacturx: true
        mandatoryNotes: []
        pageDimensions:
        - height: 841.8
          width: 595.2
        verifiedFieldsCount: 12
        warnings: []
      properties:
        isCompliant:
          description: True if no critical discrepancy
          title: Iscompliant
          type: boolean
        complianceScore:
          description: Compliance score (0-100%)
          maximum: 100.0
          minimum: 0.0
          title: Compliancescore
          type: number
        verifiedFieldsCount:
          default: 0
          description: Number of verified fields
          minimum: 0.0
          title: Verifiedfieldscount
          type: integer
        compliantFieldsCount:
          default: 0
          description: Number of compliant fields
          minimum: 0.0
          title: Compliantfieldscount
          type: integer
        isFacturx:
          default: false
          description: True if PDF contains Factur-X XML
          title: Isfacturx
          type: boolean
        facturxProfile:
          nullable: true
          type: string
        fields:
          description: "List of verified fields with values, statuses and PDF coordinates"
          items:
            $ref: "#/components/schemas/VerifiedFieldSchema"
          title: Fields
          type: array
        mandatoryNotes:
          description: "Mandatory notes (PMT, PMD, AAB) with PDF location"
          items:
            $ref: "#/components/schemas/MandatoryNoteSchema"
          title: Mandatorynotes
          type: array
        pageDimensions:
          description: "Dimensions of each PDF page (width, height)"
          items:
            $ref: "#/components/schemas/PageDimensionsSchema"
          title: Pagedimensions
          type: array
        warnings:
          description: Non-blocking warnings
          items:
            type: string
          title: Warnings
          type: array
      required:
      - complianceScore
      - isCompliant
      title: VerificationSuccessResponse
    VerifiedFieldSchema:
      description: A verified field with all its information (extraction + compliance
        + location).
      example:
        bbox:
          height: 15.0
          page: 0
          width: 70.3
          x0: 350.5
          x1: 420.8
          y0: 720.0
          y1: 735.0
        businessTerm: BT-1
        confidence: 0.95
        label: Invoice Number
        message: Compliant
        pdfValue: FACT-2024-001
        source: native_pdf
        status: COMPLIANT
        xmlValue: FACT-2024-001
      properties:
        businessTerm:
          description: "EN16931 Business Term (e.g., BT-1)"
          title: Businessterm
          type: string
        label:
          description: "Field label (e.g., Invoice Number)"
          title: Label
          type: string
        pdfValue:
          nullable: true
          type: string
        xmlValue:
          nullable: true
          type: string
        status:
          allOf:
          - $ref: "#/components/schemas/FieldStatus"
          description: Compliance status
        message:
          nullable: true
          type: string
        confidence:
          default: 1.0
          description: Confidence score (0-1)
          maximum: 1.0
          minimum: 0.0
          title: Confidence
          type: number
        source:
          default: native_pdf
          description: Extraction source
          title: Source
          type: string
        bbox:
          allOf:
          - $ref: "#/components/schemas/BoundingBoxSchema"
          nullable: true
      required:
      - businessTerm
      - label
      - status
      title: VerifiedFieldSchema
    facture_electronique__rest_api__schemas__ereporting__InvoiceTypeCode:
      description: Invoice type codes (UNTDID 1001).
      enum:
      - "380"
      - "381"
      - "384"
      - "389"
      - "386"
      title: InvoiceTypeCode
      type: string
    facture_electronique__rest_api__schemas__processing__ChorusProCredentials:
      description: |-
        Optional Chorus Pro credentials.

        **MODE 1 - JWT retrieval (recommended):**
        Do not provide this `credentials` field in the payload.
        Credentials will be automatically retrieved via client_uid from JWT (0-trust).

        **MODE 2 - Credentials in payload:**
        Provide all required fields below.
        Useful for tests or third-party integrations.
      example:
        chorusLogin: my_login@company.fr
        chorusPassword: MyPassword123!
        pisteClientId: my_piste_client_id
        pisteClientSecret: my_piste_secret
        sandboxMode: true
      properties:
        pisteClientId:
          nullable: true
          type: string
        pisteClientSecret:
          nullable: true
          type: string
        chorusLogin:
          nullable: true
          type: string
        chorusPassword:
          nullable: true
          type: string
        sandboxMode:
          default: true
          description: "[MODE 2] Use sandbox mode (default: True)"
          title: Sandboxmode
          type: boolean
      title: ChorusProCredentials
    facture_electronique__rest_api__schemas__validation__ValidationErrorResponse:
      description: Response for validation errors.
      example:
        detail:
        - detail
        - detail
      properties:
        detail:
          description: List of detected validation errors.
          items:
            type: string
          title: Detail
          type: array
      required:
      - detail
      title: ValidationErrorResponse
    AdditionalDocument:
      description: |-
        Additional supporting document (BG-24).

        References to external documents or embedded attachments.
      properties:
        id:
          description: Document reference identifier (BT-122).
          title: Id
          type: string
        type_code:
          nullable: true
          type: string
        name:
          nullable: true
          type: string
        uri:
          nullable: true
          type: string
        reference_type_code:
          nullable: true
          type: string
      required:
      - id
      title: AdditionalDocument
    AllowanceCharge:
      description: |-
        Document-level or line-level allowance/charge.

        Represents BG-20 (Document level allowances), BG-21 (Document level charges),
        BG-27 (Invoice line allowances), or BG-28 (Invoice line charges).
      properties:
        is_charge:
          description: "True for charge, False for allowance (ChargeIndicator)."
          title: Is Charge
          type: boolean
        amount:
          $ref: "#/components/schemas/Amount_1"
        base_amount:
          $ref: "#/components/schemas/Base_Amount"
        percentage:
          $ref: "#/components/schemas/Percentage"
        reason:
          nullable: true
          type: string
        reason_code:
          allOf:
          - $ref: "#/components/schemas/AllowanceChargeReasonCode"
          nullable: true
        vat_category:
          allOf:
          - $ref: "#/components/schemas/VATCategory"
          nullable: true
        vat_rate:
          $ref: "#/components/schemas/Vat_Rate"
      required:
      - amount
      - is_charge
      title: AllowanceCharge
    AllowanceChargeReasonCode:
      description: |-
        Standardized reason codes for document-level allowances and charges.

        Codes from UNTDID 5189 (allowances) and UNTDID 7161 (charges).
      enum:
      - "41"
      - "42"
      - "60"
      - "62"
      - "63"
      - "64"
      - "65"
      - "66"
      - "67"
      - "68"
      - "70"
      - "71"
      - "88"
      - "95"
      - "100"
      - "102"
      - "103"
      - "104"
      - "105"
      - AA
      - AAA
      - AAC
      - AAD
      - AAE
      - AAH
      - AAI
      - AAS
      - ABK
      - ABL
      - ABN
      - ABR
      - ADR
      - ADL
      - ADT
      - FC
      - FI
      - LA
      - PC
      title: AllowanceChargeReasonCode
      type: string
    AllowanceReasonCode:
      description: |-
        Standardized codes for allowance or charge reasons (EN 16931 standard).

        **Possible values:**
        - `AA`: ADVERTISING_ALLOWANCE - Advertising discount or rebate
        - `ABL`: PACKAGING_SURCHARGE - Packaging surcharge
        - `ADR`: OTHER_SERVICES - Other services
        - `ADT`: PICKUP_COST - Pickup cost
        - `FC`: FREIGHT_CHARGES - Freight/transport costs
        - `FI`: FINANCING_CHARGES - Financing charges
        - `LA`: LABELING - Labeling
      enum:
      - AA
      - ABL
      - ADR
      - ADT
      - FC
      - FI
      - LA
      title: AllowanceReasonCode
      type: string
    Contact:
      description: |-
        Contact information (BG-6 Seller Contact, BG-9 Buyer Contact).

        Used for seller and buyer contact details.
      properties:
        name:
          nullable: true
          type: string
        department_name:
          nullable: true
          type: string
        phone:
          nullable: true
          type: string
        email:
          nullable: true
          type: string
      title: Contact
    DeliveryParty:
      description: |-
        Delivery location information (BG-15 Deliver to).

        Represents the party or location where goods/services are delivered.
      properties:
        id:
          nullable: true
          type: string
        global_id:
          allOf:
          - $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
        name:
          nullable: true
          type: string
        postal_address:
          allOf:
          - $ref: "#/components/schemas/PostalAddress"
          nullable: true
      title: DeliveryParty
    InvoiceLine:
      description: Represents an invoice line item (BG-25).
      properties:
        line_number:
          description: Invoice line identifier (BT-126).
          title: Line Number
          type: integer
        line_note:
          nullable: true
          type: string
        parent_line_id:
          nullable: true
          type: string
        line_sub_type:
          allOf:
          - $ref: "#/components/schemas/LineSubType"
          nullable: true
        reference:
          nullable: true
          type: string
        buyer_assigned_id:
          nullable: true
          type: string
        product_global_id:
          nullable: true
          type: string
        product_global_id_scheme:
          nullable: true
          type: string
        item_name:
          description: Item name (BT-153).
          title: Item Name
          type: string
        item_description:
          nullable: true
          type: string
        origin_country:
          nullable: true
          type: string
        characteristics:
          items:
            $ref: "#/components/schemas/ProductCharacteristic"
          nullable: true
          type: array
        classifications:
          items:
            $ref: "#/components/schemas/ProductClassification"
          nullable: true
          type: array
        quantity:
          $ref: "#/components/schemas/Quantity"
        unit:
          allOf:
          - $ref: "#/components/schemas/UnitOfMeasure"
          description: Invoiced quantity unit of measure code (BT-130).
        gross_unit_price:
          $ref: "#/components/schemas/Gross_Unit_Price"
        unit_net_price:
          $ref: "#/components/schemas/UnitNetPrice"
        price_basis_quantity:
          $ref: "#/components/schemas/Price_Basis_Quantity"
        price_basis_unit:
          nullable: true
          type: string
        price_allowance_amount:
          $ref: "#/components/schemas/Price_Allowance_Amount"
        lineNetAmount:
          $ref: "#/components/schemas/LineNetAmount"
        allowanceAmount:
          $ref: "#/components/schemas/InvoiceLine_allowanceAmount"
        allowanceReasonCode:
          allOf:
          - $ref: "#/components/schemas/AllowanceReasonCode"
          nullable: true
        allowanceReason:
          nullable: true
          type: string
        allowances_charges:
          items:
            $ref: "#/components/schemas/AllowanceCharge"
          nullable: true
          type: array
        vat_rate:
          nullable: true
          type: string
        manual_vat_rate:
          $ref: "#/components/schemas/Manual_Vat_Rate"
        vat_category:
          allOf:
          - $ref: "#/components/schemas/VATCategory"
          nullable: true
        period_start_date:
          nullable: true
          type: string
        period_end_date:
          nullable: true
          type: string
        purchase_order_line_ref:
          nullable: true
          type: string
        accounting_account:
          nullable: true
          type: string
        additional_documents:
          items:
            $ref: "#/components/schemas/AdditionalDocument"
          nullable: true
          type: array
        line_notes:
          items:
            $ref: "#/components/schemas/InvoiceNote"
          nullable: true
          type: array
      required:
      - item_name
      - line_number
      - quantity
      - unit
      - unit_net_price
      title: InvoiceLine
    InvoiceNote:
      description: |-
        Invoice note (IncludedNote in Factur-X).

        Mandatory notes for BR-FR-05 are:
        - PMT: Fixed recovery fee
        - PMD: Late payment penalties
        - AAB: Early payment discount
      properties:
        subject_code:
          nullable: true
          type: string
        content:
          description: Note content
          title: Content
          type: string
      required:
      - content
      title: InvoiceNote
    InvoiceReferences:
      description: "Contains various invoice references (currency, type, etc.)."
      properties:
        business_process_id:
          nullable: true
          type: string
        invoice_currency:
          default: EUR
          description: Invoice currency code (BT-5). ISO 4217.
          title: Invoice Currency
          type: string
        payment_means:
          allOf:
          - $ref: "#/components/schemas/PaymentMeans"
          description: Payment means type code (BT-81).
        payment_means_text:
          nullable: true
          type: string
        invoice_type:
          $ref: "#/components/schemas/InvoiceTypeCode"
        vat_accounting_code:
          allOf:
          - $ref: "#/components/schemas/VATAccountingCode"
          description: VAT accounting code.
        buyer_reference:
          nullable: true
          type: string
        contract_reference:
          nullable: true
          type: string
        purchase_order_reference:
          nullable: true
          type: string
        seller_order_reference:
          nullable: true
          type: string
        receiving_advice_reference:
          nullable: true
          type: string
        despatch_advice_reference:
          nullable: true
          type: string
        tender_reference:
          nullable: true
          type: string
        preceding_invoice_reference:
          nullable: true
          type: string
        preceding_invoice_date:
          nullable: true
          type: string
        project_reference:
          nullable: true
          type: string
        project_name:
          nullable: true
          type: string
        vat_exemption_reason:
          nullable: true
          type: string
      required:
      - invoice_type
      - payment_means
      - vat_accounting_code
      title: InvoiceReferences
    InvoiceTotals:
      description: Contains all invoice total amounts (BG-22).
      properties:
        line_total_amount:
          $ref: "#/components/schemas/Line_Total_Amount"
        allowance_total_amount:
          $ref: "#/components/schemas/Allowance_Total_Amount"
        charge_total_amount:
          $ref: "#/components/schemas/Charge_Total_Amount"
        total_net_amount:
          $ref: "#/components/schemas/TotalNetAmount"
        vat_amount:
          $ref: "#/components/schemas/TotalVATAmount"
        total_gross_amount:
          $ref: "#/components/schemas/TotalGrossAmount"
        prepayment:
          $ref: "#/components/schemas/InvoiceTotals_prepayment"
        rounding_amount:
          $ref: "#/components/schemas/Rounding_Amount"
        amount_due:
          $ref: "#/components/schemas/AmountDue"
        globalAllowanceAmount:
          $ref: "#/components/schemas/GlobalAllowanceAmount"
        globalAllowanceReason:
          nullable: true
          type: string
      required:
      - amount_due
      - total_gross_amount
      - total_net_amount
      - vat_amount
      title: InvoiceTotals
    InvoicingFramework:
      description: |-
        Defines the invoicing framework.

        - invoicing_framework_code: Chorus Pro code (A1, A2, A9, A12) - used for B2G
        - operation_nature: Operation nature (B1, S1, M1, etc.) - priority for Factur-X

        If operation_nature is provided, it will be used directly in Factur-X XML (BT-23).
        Otherwise, the code will be derived from invoicing_framework_code via automatic mapping.

        Example:
            >>> framework = InvoicingFramework(
            ...     invoicing_framework_code=InvoicingFrameworkCode.A1_SUPPLIER_INVOICE,
            ...     operation_nature=OperationNature.GOODS  # Forces B1 instead of S1
            ... )
      properties:
        invoicing_framework_code:
          allOf:
          - $ref: "#/components/schemas/InvoicingFrameworkCode"
          description: "Chorus Pro framework code (A1, A2, A9, A12)"
        operation_nature:
          allOf:
          - $ref: "#/components/schemas/OperationNature"
          nullable: true
        approver_service_code:
          nullable: true
          type: string
        approver_structure_code:
          nullable: true
          type: string
      required:
      - invoicing_framework_code
      title: InvoicingFramework
    LineSubType:
      description: |-
        Sub-line type for EXTENDED profile (BT-X-8 / EXT-FR-FE-163).

        Defines the role of an invoice line in a hierarchical structure:
        - DETAIL: Standard billing line, included in VAT calculations
        - INFORMATION: Additional information line, not included in VAT calculations
        - GROUP: Grouping/subtotal line, not included in VAT calculations
      enum:
      - DETAIL
      - INFORMATION
      - GROUP
      title: LineSubType
      type: string
    Payee:
      description: |-
        Information about the payment beneficiary (BG-10 / PayeeTradeParty).

        The payee is the party receiving payment. This block is used
        only if the payee is different from the seller (supplier).

        **Main use case**: Factoring
        When an invoice is factored, the factor (factoring company) becomes
        the payment beneficiary instead of the supplier.

        **Business Terms (EN16931)**:
        - BT-59: Payee name (mandatory)
        - BT-60: Payee identifier (SIRET with schemeID 0009)
        - BT-61: Payee legal identifier (SIREN with schemeID 0002)

        **Reference**: docs/guide_affacturage.md
      properties:
        nom:
          description: Payee name (BT-59). Mandatory.
          minLength: 1
          title: Nom
          type: string
        payeeId:
          nullable: true
          type: string
        siret:
          nullable: true
          pattern: "^\\d{14}$"
          type: string
        siren:
          nullable: true
          pattern: "^\\d{9}$"
          type: string
        electronicAddress:
          allOf:
          - $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
        iban:
          nullable: true
          type: string
        bic:
          nullable: true
          type: string
        global_ids:
          items:
            $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
          type: array
      required:
      - nom
      title: Payee
    PaymentCard:
      description: |-
        Payment card information (BG-18).

        Used when payment is made by payment card.
      properties:
        card_id:
          nullable: true
          type: string
        cardholder_name:
          nullable: true
          type: string
      title: PaymentCard
    PaymentMeans:
      description: Accepted payment methods.
      enum:
      - CHEQUE
      - PRELEVEMENT
      - VIREMENT
      - ESPECE
      - AUTRE
      - REPORT
      title: PaymentMeans
      type: string
    ProductCharacteristic:
      description: |-
        Item attribute (BG-32).

        Additional product characteristics as key-value pairs.
      properties:
        name:
          description: Attribute name (BT-160).
          title: Name
          type: string
        value:
          description: Attribute value (BT-161).
          title: Value
          type: string
      required:
      - name
      - value
      title: ProductCharacteristic
    ProductClassification:
      description: |-
        Item classification identifier (BG-31).

        Product classification according to a classification scheme.
      properties:
        class_code:
          description: Classification code (BT-158).
          title: Class Code
          type: string
        list_id:
          nullable: true
          type: string
        list_version_id:
          nullable: true
          type: string
      required:
      - class_code
      title: ProductClassification
    Recipient:
      description: Information about the invoice recipient / buyer (BG-7).
      properties:
        electronic_address:
          allOf:
          - $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
        executing_service_code:
          nullable: true
          type: string
        name:
          nullable: true
          type: string
        siren:
          nullable: true
          type: string
        siret:
          nullable: true
          type: string
        vat_number:
          nullable: true
          type: string
        postal_address:
          allOf:
          - $ref: "#/components/schemas/PostalAddress"
          nullable: true
        contact:
          allOf:
          - $ref: "#/components/schemas/Contact"
          nullable: true
        global_ids:
          items:
            $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
          type: array
      required:
      - electronic_address
      title: Recipient
    SubmissionMode:
      description: Invoice submission mode on Chorus Pro.
      enum:
      - SAISIE_API
      - DEPOT_PDF_API
      - DEPOT_PDF_SIGNE_API
      title: SubmissionMode
      type: string
    SupplementaryAttachment:
      description: Represents a supplementary attachment.
      properties:
        description:
          description: Attachment description
          title: Description
          type: string
        id:
          description: Attachment ID
          title: Id
          type: integer
        linkId:
          description: Link ID
          title: Linkid
          type: integer
        invoiceLineNumber:
          description: Invoice line number
          title: Invoicelinenumber
          type: integer
        type:
          description: Attachment type
          title: Type
          type: string
      required:
      - description
      - id
      - invoiceLineNumber
      - linkId
      - type
      title: SupplementaryAttachment
    Supplier:
      description: Information about the supplier / seller (BG-4).
      properties:
        electronic_address:
          allOf:
          - $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
        supplier_id:
          title: Supplier Id
          type: integer
        private_id:
          nullable: true
          type: string
        supplier_bank_account_code:
          nullable: true
          type: integer
        supplier_service_id:
          nullable: true
          type: integer
        name:
          nullable: true
          type: string
        trading_business_name:
          nullable: true
          type: string
        legal_description:
          nullable: true
          type: string
        siren:
          nullable: true
          type: string
        siret:
          nullable: true
          type: string
        vat_number:
          nullable: true
          type: string
        iban:
          nullable: true
          type: string
        bic:
          nullable: true
          type: string
        bank_account_name:
          nullable: true
          type: string
        proprietaryId:
          nullable: true
          type: string
        postal_address:
          allOf:
          - $ref: "#/components/schemas/PostalAddress"
          nullable: true
        contact:
          allOf:
          - $ref: "#/components/schemas/Contact"
          nullable: true
        global_ids:
          items:
            $ref: "#/components/schemas/ElectronicAddress"
          nullable: true
          type: array
      required:
      - electronic_address
      - supplier_id
      title: Supplier
    TaxRepresentative:
      description: |-
        Seller tax representative (BG-11).

        The tax representative is required when the seller is not established
        in the country where VAT is due.
      properties:
        name:
          description: Tax representative name (BT-62).
          title: Name
          type: string
        vat_number:
          description: Tax representative VAT identifier (BT-63).
          title: Vat Number
          type: string
        postal_address:
          allOf:
          - $ref: "#/components/schemas/PostalAddress"
          description: Tax representative postal address (BG-12).
      required:
      - name
      - postal_address
      - vat_number
      title: TaxRepresentative
    UnitOfMeasure:
      description: Enumeration of invoicing units of measure.
      enum:
      - PIECE
      - HEURE
      - JOUR
      - KILOGRAMME
      - LITRE
      - FORFAIT
      title: UnitOfMeasure
      type: string
    VATAccountingCode:
      description: VAT accounting regime.
      enum:
      - TVA_SUR_DEBIT
      - TVA_SUR_ENCAISSEMENT
      - EXONERATION
      - SANS_TVA
      title: VATAccountingCode
      type: string
    VATCategory:
      description: |-
        Standardized VAT categories for Factur-X (EN 16931 standard).

        **Possible values:**
        - `S`: STANDARD - Standard VAT rate
        - `Z`: ZERO - Zero VAT rate
        - `E`: EXEMPT - VAT exemption
        - `AE`: REVERSE_CHARGE - Reverse charge (auto-liquidation)
        - `K`: INTRA_COMMUNITY - Intra-community supply
        - `G`: EXPORT - Export outside EU
        - `O`: OUT_OF_SCOPE - Outside VAT scope
        - `L`: CANARY_ISLANDS - Canary Islands VAT
        - `M`: CEUTA_MELILLA - Ceuta/Melilla VAT
      enum:
      - S
      - Z
      - E
      - AE
      - K
      - G
      - O
      - L
      - M
      title: VATCategory
      type: string
    VATLine:
      description: |-
        Represents a VAT breakdown line by rate (BG-23).

        For exemptions (categories E, AE, K, G, O), the fields
        `exemption_reason` and `vatex_code` are required per EN16931.
      properties:
        taxable_amount:
          $ref: "#/components/schemas/TaxableAmount"
        vat_amount:
          $ref: "#/components/schemas/VATAmount"
        rate:
          nullable: true
          type: string
        manual_rate:
          $ref: "#/components/schemas/Manual_Rate"
        category:
          allOf:
          - $ref: "#/components/schemas/VATCategory"
          nullable: true
        due_date_type_code:
          allOf:
          - $ref: "#/components/schemas/VATPointDateCode"
          nullable: true
        exemption_reason:
          nullable: true
          type: string
        vatex_code:
          nullable: true
          type: string
      required:
      - taxable_amount
      - vat_amount
      title: VATLine
    VATPointDateCode:
      description: |-
        VAT point date code (BT-8) - When VAT becomes due.

        UNTDID 2005 subset used in EN16931.
      enum:
      - "5"
      - "29"
      - "72"
      title: VATPointDateCode
      type: string
    FacturXInvoice:
      description: Data model for an invoice to be converted to Factur-X.
      example:
        invoiceNumber: FACT-2025-001
        invoiceDate: 2025-10-27
        paymentDueDate: 2025-11-27
        submissionMode: DEPOT_PDF_API
        recipient:
          name: Client Test SAS
          electronicAddress:
            identifier: "12345678901234"
            schemeId: "0225"
          postalAddress:
            lineOne: 456 Avenue des Champs
            postalCode: "69001"
            city: Lyon
            countryCode: FR
          executingServiceCode: SERVICE01
        supplier:
          name: Ma Soci√©t√© SAS
          supplierId: 12345
          siret: "12345678900001"
          vatNumber: FR12345678900
          iban: FR7630006000011234567890189
          electronicAddress:
            identifier: "12345678900001"
            schemeId: "0225"
          postalAddress:
            lineOne: 123 Rue de la R√©publique
            lineTwo: B√¢timent A
            postalCode: "75001"
            city: Paris
            countryCode: FR
        invoicingFramework:
          invoicingFrameworkCode: A1_FACTURE_FOURNISSEUR
        references:
          invoiceType: FACTURE
          vatAccountingCode: TVA_SUR_DEBIT
          paymentMeans: VIREMENT
          invoiceCurrency: EUR
          purchaseOrderReference: CMD-2025-042
        invoiceLines:
        - lineNumber: 1
          itemName: Prestation de conseil
          quantity: "5.00"
          unit: HEURE
          unitNetPrice: "200.00"
          lineNetAmount: "1000.00"
          manualVatRate: "20.00"
          vatCategory: S
          reference: REF-CONSEIL-001
        - lineNumber: 2
          itemName: Formation d√©veloppeurs
          quantity: "3.00"
          unit: JOUR
          unitNetPrice: "500.00"
          lineNetAmount: "1500.00"
          vatCategory: S
          manualVatRate: "20.00"
          reference: REF-FORM-002
        vatLines:
        - taxableAmount: "2500.00"
          vatAmount: "500.00"
          manualRate: "20.00"
          category: S
        totals:
          totalNetAmount: "2500.00"
          vatAmount: "500.00"
          totalGrossAmount: "3000.00"
          amountDue: "3000.00"
        comment: Invoice for October 2025 services
      properties:
        invoice_number:
          title: Invoice Number
          type: string
        payment_due_date:
          title: Payment Due Date
          type: string
        invoice_date:
          title: Invoice Date
          type: string
        submission_mode:
          $ref: "#/components/schemas/SubmissionMode"
        recipient:
          $ref: "#/components/schemas/Recipient"
        supplier:
          $ref: "#/components/schemas/Supplier"
        invoicing_framework:
          $ref: "#/components/schemas/InvoicingFramework"
        references:
          $ref: "#/components/schemas/InvoiceReferences"
        totals:
          $ref: "#/components/schemas/InvoiceTotals"
        invoice_lines:
          items:
            $ref: "#/components/schemas/InvoiceLine"
          title: Invoice Lines
          type: array
        vat_lines:
          items:
            $ref: "#/components/schemas/VATLine"
          title: Vat Lines
          type: array
        notes:
          items:
            $ref: "#/components/schemas/InvoiceNote"
          title: Notes
          type: array
        comment:
          nullable: true
          type: string
        current_user_id:
          nullable: true
          type: integer
        supplementary_attachments:
          items:
            $ref: "#/components/schemas/SupplementaryAttachment"
          nullable: true
          type: array
        payee:
          allOf:
          - $ref: "#/components/schemas/Payee"
          nullable: true
        delivery_party:
          allOf:
          - $ref: "#/components/schemas/DeliveryParty"
          nullable: true
        tax_representative:
          allOf:
          - $ref: "#/components/schemas/TaxRepresentative"
          nullable: true
        delivery_date:
          nullable: true
          type: string
        billing_period_start:
          nullable: true
          type: string
        billing_period_end:
          nullable: true
          type: string
        payment_reference:
          nullable: true
          type: string
        creditor_reference_id:
          nullable: true
          type: string
        direct_debit_mandate_id:
          nullable: true
          type: string
        debtor_iban:
          nullable: true
          type: string
        payment_terms:
          nullable: true
          type: string
        allowances_charges:
          items:
            $ref: "#/components/schemas/AllowanceCharge"
          nullable: true
          type: array
        additional_documents:
          items:
            $ref: "#/components/schemas/AdditionalDocument"
          nullable: true
          type: array
        buyer_accounting_reference:
          nullable: true
          type: string
        payment_card:
          allOf:
          - $ref: "#/components/schemas/PaymentCard"
          nullable: true
      required:
      - invoice_number
      - invoicing_framework
      - payment_due_date
      - recipient
      - references
      - submission_mode
      - supplier
      - totals
      title: FacturXInvoice
    FlowProfile:
      description: Supported flow profiles.
      enum:
      - Basic
      - CIUS
      - Extended-CTC-FR
      title: FlowProfile
      type: string
    SubmitFlowRequest:
      description: Request to submit an invoice to a PDP/PA via AFNOR.
      example:
        flowName: Invoice 2025-001
        flowProfile: CIUS
        flowSyntax: CII
        trackingId: TRACK-2025-001
      properties:
        flowName:
          description: "Flow name (e.g., 'Invoice 2025-001')"
          example: Invoice 2025-001
          title: Flowname
          type: string
        flowSyntax:
          allOf:
          - $ref: "#/components/schemas/FlowSyntax"
          default: CII
          description: Flow syntax (CII for Factur-X)
        flowProfile:
          allOf:
          - $ref: "#/components/schemas/FlowProfile"
          nullable: true
        trackingId:
          nullable: true
          type: string
        requestId:
          nullable: true
          type: string
        pdpCredentials:
          allOf:
          - $ref: "#/components/schemas/PDPCredentials"
          nullable: true
      required:
      - flowName
      title: SubmitFlowRequest
    AcknowledgmentStatus:
      description: Flow acknowledgment status.
      enum:
      - Pending
      - Ok
      - Error
      title: AcknowledgmentStatus
      type: string
    FlowDirection:
      description: Flow direction.
      enum:
      - In
      - Out
      title: FlowDirection
      type: string
    FlowType:
      description: |-
        AFNOR XP Z12-013 FlowType enum.

        Values from swagger specification v1.1.0:
        - Invoice flows (factures)
        - Lifecycle flows (cycle de vie)
        - E-reporting flows (transactions/paiements)
      enum:
      - CustomerInvoice
      - SupplierInvoice
      - StateInvoice
      - CustomerInvoiceLC
      - SupplierInvoiceLC
      - StateCustomerInvoiceLC
      - StateSupplierInvoiceLC
      - UnitaryCustomerTransactionReport
      - AggregatedCustomerTransactionReport
      - UnitarySupplierTransactionReport
      - UnitaryCustomerPaymentReport
      - AggregatedCustomerPaymentReport
      - MultiFlowReport
      title: FlowType
      type: string
    SearchFlowRequest:
      description: Request to search submitted flows.
      example:
        acknowledgmentStatus: Ok
        flowDirections:
        - Out
        flowTypes:
        - SupplierInvoice
        limit: 10
      properties:
        updatedAfter:
          format: date-time
          nullable: true
          type: string
        updatedBefore:
          format: date-time
          nullable: true
          type: string
        flowTypes:
          items:
            $ref: "#/components/schemas/FlowType"
          nullable: true
          type: array
        flowDirections:
          items:
            $ref: "#/components/schemas/FlowDirection"
          nullable: true
          type: array
        trackingId:
          nullable: true
          type: string
        flowId:
          nullable: true
          type: string
        acknowledgmentStatus:
          allOf:
          - $ref: "#/components/schemas/AcknowledgmentStatus"
          nullable: true
        offset:
          default: 0
          description: Offset for pagination
          minimum: 0
          title: Offset
          type: integer
        limit:
          default: 25
          description: Maximum number of results (max 100)
          maximum: 100
          minimum: 1
          title: Limit
          type: integer
      title: SearchFlowRequest
    SubmitFlowResponse:
      description: Response after submitting a flow.
      example:
        flowId: 550e8400-e29b-41d4-a716-446655440000
        flowProfile: CIUS
        flowSyntax: CII
        message: ‚úì Invoice successfully submitted to PDP/PA
        name: Invoice 2025-001
        sha256: a3c5f1...
        trackingId: TRACK-2025-001
      properties:
        flow_id:
          description: Unique flow identifier generated by the PDP
          title: Flow Id
          type: string
        tracking_id:
          nullable: true
          type: string
        name:
          description: Flow name
          title: Name
          type: string
        flow_syntax:
          description: "Flow syntax (CII, UBL, etc.)"
          title: Flow Syntax
          type: string
        flow_profile:
          nullable: true
          type: string
        sha256:
          description: SHA256 hash of the submitted file
          title: Sha256
          type: string
        message:
          description: Confirmation message
          title: Message
          type: string
      required:
      - flow_id
      - flow_syntax
      - message
      - name
      - sha256
      title: SubmitFlowResponse
    FlowSummary:
      description: Summary of a flow in search results.
      properties:
        flow_id:
          description: Unique flow identifier
          title: Flow Id
          type: string
        tracking_id:
          nullable: true
          type: string
        name:
          description: Flow name
          title: Name
          type: string
        flow_type:
          nullable: true
          type: string
        flow_direction:
          nullable: true
          type: string
        acknowledgment_status:
          nullable: true
          type: string
        created_at:
          nullable: true
          type: string
        updated_at:
          nullable: true
          type: string
      required:
      - flow_id
      - name
      title: FlowSummary
    SearchFlowResponse:
      description: Response from a flow search.
      example:
        limit: 25
        offset: 0
        results:
        - acknowledgmentStatus: Ok
          flowDirection: Out
          flowId: 550e8400-e29b-41d4-a716-446655440000
          flowType: SupplierInvoice
          name: Invoice 2025-001
          trackingId: TRACK-2025-001
        total: 42
      properties:
        total:
          description: Total number of results
          title: Total
          type: integer
        offset:
          description: Applied offset
          title: Offset
          type: integer
        limit:
          description: Results limit
          title: Limit
          type: integer
        results:
          description: List of found flows
          items:
            $ref: "#/components/schemas/FlowSummary"
          title: Results
          type: array
      required:
      - limit
      - offset
      - results
      - total
      title: SearchFlowResponse
    AFNORHealthCheckResponse:
      description: Response from AFNOR services healthcheck.
      example:
        directoryServiceOk: true
        flowServiceOk: true
        message: ‚úì AFNOR services operational
      properties:
        flow_service_ok:
          description: Flow Service API status
          title: Flow Service Ok
          type: boolean
        directory_service_ok:
          description: Directory Service API status
          title: Directory Service Ok
          type: boolean
        message:
          description: Descriptive status message
          title: Message
          type: string
      required:
      - directory_service_ok
      - flow_service_ok
      - message
      title: AFNORHealthCheckResponse
    AFNOR_NotOnlyUuid:
      description: "Unique identifier supporting UUID but not only, for flexibility\
        \ purpose"
      maxLength: 36
      type: string
    AFNOR_ProcessingRule:
      description: |
        - B2B                 : e-invoicing
        - B2BInt              : International B2B e-reporting
        - B2C                 : B2C e-reporting
        - OutOfScope          : Out of scope (not regulated flow)
        - ArchiveOnly         : Archive only, no transmission
        - NotApplicable       : Not Applicable
      enum:
      - B2B
      - B2BInt
      - B2C
      - OutOfScope
      - ArchiveOnly
      - NotApplicable
      type: string
    AFNOR_FlowSyntax:
      description: Syntax of the original file belonging to a flow
      enum:
      - CII
      - UBL
      - Factur-X
      - CDAR
      - FRR
      example: CII
      type: string
    AFNOR_FlowProfile:
      enum:
      - Basic
      - CIUS
      - Extended-CTC-FR
      type: string
    AFNOR_FlowType:
      description: |
        - `CustomerInvoice`: a non-self-billed outgoing invoice or a self-billed incoming invoice
        - `SupplierInvoice`: a non-self-billed incoming invoice or self-billed outgoing invoice
        - `StateInvoice`: an invoice Flow sent to DFH
        - `CustomerInvoiceLC`: a lifecycle (CDAR) related to a customer invoice
        - `SupplierInvoiceLC`: a lifecycle (CDAR) related to supplier invoice
        - `StateCustomerInvoiceLC`: a customer invoice LC sent to DFH
        - `StateSupplierInvoiceLC`: a supplier invoice LC sent to DFH
        - `AggregatedCustomerTransactionReport` : a transaction E-Reporting flow containing aggregated B2C sales (FRR 10.3)
        - `IndividualCustomerTransactionReport`: a transaction E-Reporting flow containing international B2B sales or a B2C transaction flow reported individually (FRR 10.1)
        - `AggregatedCustomerPaymentReport` : a E-Reporting of collections flow containing collections linked to B2C sales (FRR 10.4)
        - `UnitaryCustomerPaymentReport` : an E-Reporting of collections flow containing collections linked to unit international B2B sales or B2C sales (FRR 10.2)
        - `UnitarySupplierTransactionReport`: a transaction E-Reporting flow containing international B2B purchases (FRR 10.1)
        - `MultiFlowReport`: an E-Reporting flow which contains at least 2 different flow types (FRR 10)
      enum:
      - CustomerInvoice
      - SupplierInvoice
      - StateInvoice
      - CustomerInvoiceLC
      - SupplierInvoiceLC
      - StateCustomerInvoiceLC
      - StateSupplierInvoiceLC
      - AggregatedCustomerTransactionReport
      - UnitaryCustomerTransactionReport
      - AggregatedCustomerPaymentReport
      - UnitaryCustomerPaymentReport
      - UnitarySupplierTransactionReport
      - MultiFlowReport
      example: SupplierInvoice
      type: string
    AFNOR_FlowDirection:
      description: |
        Direction of the flow:
          - `In`:  Incoming flow, from the PDP to the OD
          - `Out`: Outgoing flow, from the OD to the PDP
      enum:
      - In
      - Out
      example: Out
      type: string
    AFNOR_FlowAckStatus:
      description: |
        - `Ok`: the following checks have passed:
          - Anti virus
          - Integrity checks
          - Technical rules checks
          - Unicity checks
        - `Error`: one of the previous test has failed
        - `Pending` : the flow is not yet integrated
      enum:
      - Pending
      - Ok
      - Error
      type: string
    AFNOR_ReasonCode:
      description: A predefined set of reason code values + ability to extend this
        set
      oneOf:
      - $ref: "#/components/schemas/AFNOR_ReasonCodeEnum"
      - type: string
    AFNOR_ReasonCodeEnum:
      description: |
        - `EmptyAttachement`      : One or more attachments are empty. (ie IRR_VID_PJ)
        - `AttachmentTypeError`   : The type and/or extension of one or more attachments is not compliant. (ie IRR_EXT_DOC)
        - `EmptyFlow`             : The binary flow is empty. (ie IRR_VID_F)
        - `OtherTechnicalError`   : Other technical error. (ie AUTRE)
        - `InvalidSchema`         : Invalid XML schema. (ie IRR_SYNTAX)
        - `FileSizeExceeded`      : File size limit reached. (ie IRR_TAILLE_F)
        - `FlowTypeError`         : The flow type and/or extension are not compliant. (ie IRR_TYPE_F)
        - `AlreadyExistingFlow`   : The flow has already been sent and received. (ie N/A)
        - `VirusFound`            : Presence of a virus. (ie IRR_ANTIVIRUS)
        - `ChecksumMismatch`      : Checksum provided is different from computed one
        - `InvoiceLCInvalidStatus`: One or more statuses are inconsistent
        - `InvoiceLCStatusError`  : One or more statuses are incorrect or not allowed
        - `InvoiceLCRuleError`    : One or more rules are not matched
        - `InvoiceLCAccessDenied` : One of the request is not authorized and requests permissions
        - `InvoiceLCAmountError`  : One or more amounts are not consistent in regards to the VAT
      enum:
      - EmptyAttachement
      - AttachmentTypeError
      - EmptyFlow
      - OtherTechnicalError
      - InvalidSchema
      - FileSizeExceeded
      - FlowTypeError
      - AlreadyExistingFlow
      - VirusFound
      - ChecksumMismatch
      - InvoiceLCInvalidStatus
      - InvoiceLCStatusError
      - InvoiceLCRuleError
      - InvoiceLCAccessDenied
      - InvoiceLCAmountError
      type: string
    AFNOR_Algorithm:
      enum:
      - RSA
      - ECDSA
      - RSA_PSS
      - EDDSA_25519
      - EDDSA_448
      type: string
    AFNOR_FlowInfo:
      description: |
        Signaling of the flow:
        - The tracking id is an external identifier and is used to track the flow by the sender
        - The sha256 is the fingerprint of the attached file:
          - if provided in the request: it should be checked once received
          - if not provided in the request: it should be computed and returned in the response
      properties:
        trackingId:
          description: "Unique identifier supporting UUID but not only, for flexibility\
            \ purpose"
          maxLength: 36
          type: string
        name:
          description: Name of the file
          maxLength: 255
          type: string
        processingRule:
          $ref: "#/components/schemas/AFNOR_ProcessingRule"
        flowSyntax:
          $ref: "#/components/schemas/AFNOR_FlowSyntax"
        flowProfile:
          $ref: "#/components/schemas/AFNOR_FlowProfile"
        sha256:
          pattern: "^[a-f0-9]{64}$"
          type: string
      required:
      - flowSyntax
    AFNOR_SearchFlowParams:
      properties:
        limit:
          default: 25
          description: Maximum number of results that may be returned
          maximum: 100
          type: integer
        where:
          $ref: "#/components/schemas/AFNOR_SearchFlowFilters"
      required:
      - where
    AFNOR_SearchFlowFilters:
      description: "Filtering criteria, at least one is required"
      example:
        updatedBefore: 2000-01-23T04:56:07.000+00:00
        updatedAfter: 2000-01-23T04:56:07.000+00:00
        processingRule:
        - B2B
        - B2B
        flowDirection:
        - Out
        - Out
        ackStatus: Pending
        flowType:
        - SupplierInvoice
        - SupplierInvoice
        trackingId: trackingId
      properties:
        updatedAfter:
          format: date-time
          type: string
        updatedBefore:
          format: date-time
          type: string
        processingRule:
          items:
            $ref: "#/components/schemas/AFNOR_ProcessingRule"
          type: array
        flowType:
          items:
            $ref: "#/components/schemas/AFNOR_FlowType"
          type: array
        flowDirection:
          items:
            $ref: "#/components/schemas/AFNOR_FlowDirection"
          type: array
        trackingId:
          description: "Unique identifier supporting UUID but not only, for flexibility\
            \ purpose"
          maxLength: 36
          type: string
        ackStatus:
          $ref: "#/components/schemas/AFNOR_FlowAckStatus"
    AFNOR_FullFlowInfo:
      allOf:
      - properties:
          flowId:
            $ref: "#/components/schemas/AFNOR_NotOnlyUuid"
          submittedAt:
            description: |
              The flow submission date and time (the date and time when the flow was created on the system)
              This property should be used by the API consumer as a time reference to avoid clock synchronization issues
            format: date-time
            type: string
      - $ref: "#/components/schemas/AFNOR_FlowInfo"
      description: "Identified Flow info: flow info + id + timestamp"
      example:
        flowProfile: Basic
        processingRule: B2B
        sha256: sha256
        name: name
        flowSyntax: CII
        submittedAt: 2000-01-23T04:56:07.000+00:00
        flowId: null
        trackingId: trackingId
    AFNOR_AcknowledgementDetail:
      example:
        item: item
        level: Error
        reasonMessage: reasonMessage
        reasonCode: EmptyAttachement
      properties:
        level:
          enum:
          - Error
          - Warning
          type: string
        item:
          description: Item on which the error refers
          type: string
        reasonCode:
          $ref: "#/components/schemas/AFNOR_ReasonCode"
        reasonMessage:
          type: string
      required:
      - item
      - level
      - reasonCode
      - reasonMessage
    AFNOR_AcknowledgementDetails:
      items:
        $ref: "#/components/schemas/AFNOR_AcknowledgementDetail"
      minItems: 1
      type: array
    AFNOR_Acknowledgement:
      example:
        details:
        - item: item
          level: Error
          reasonMessage: reasonMessage
          reasonCode: EmptyAttachement
        - item: item
          level: Error
          reasonMessage: reasonMessage
          reasonCode: EmptyAttachement
        status: null
      properties:
        status:
          $ref: "#/components/schemas/AFNOR_FlowAckStatus"
        details:
          items:
            $ref: "#/components/schemas/AFNOR_AcknowledgementDetail"
          minItems: 1
          type: array
      required:
      - status
    AFNOR_Flow:
      description: The properties of a Flow resource
      example:
        processingRuleSource: Input
        flowProfile: Basic
        processingRule: null
        acknowledgement:
          details:
          - item: item
            level: Error
            reasonMessage: reasonMessage
            reasonCode: EmptyAttachement
          - item: item
            level: Error
            reasonMessage: reasonMessage
            reasonCode: EmptyAttachement
          status: null
        flowDirection: Out
        flowSyntax: CII
        submittedAt: 2000-01-23T04:56:07.000+00:00
        flowId: flowId
        updatedAt: 2000-01-23T04:56:07.000+00:00
        trackingId: trackingId
        flowType: SupplierInvoice
      properties:
        submittedAt:
          description: |
            The flow submission date and time (the date and time when the flow was created on the system)
          format: date-time
          type: string
        updatedAt:
          description: |
            The last update date and time of the flow. When the flow is submitted updatedAt is equal to submittedAt.
            When the flow acknowledgment status is changed updatedAt date and time is updated.
          format: date-time
          type: string
        flowId:
          description: "Unique identifier supporting UUID but not only, for flexibility\
            \ purpose"
          maxLength: 36
          type: string
        trackingId:
          description: "Unique identifier supporting UUID but not only, for flexibility\
            \ purpose"
          maxLength: 36
          type: string
        flowType:
          $ref: "#/components/schemas/AFNOR_FlowType"
        processingRule:
          $ref: "#/components/schemas/AFNOR_ProcessingRule"
        processingRuleSource:
          description: Says whether the processing rule has been computed or the processing
            rule was an input parameter
          enum:
          - Input
          - Computed
          type: string
        flowDirection:
          $ref: "#/components/schemas/AFNOR_FlowDirection"
        flowSyntax:
          $ref: "#/components/schemas/AFNOR_FlowSyntax"
        flowProfile:
          $ref: "#/components/schemas/AFNOR_FlowProfile"
        acknowledgement:
          $ref: "#/components/schemas/AFNOR_Acknowledgement"
    AFNOR_SearchFlowContent:
      description: "A set of flows matching criterias, provided into the request"
      example:
        limit: 0
        filters:
          updatedBefore: 2000-01-23T04:56:07.000+00:00
          updatedAfter: 2000-01-23T04:56:07.000+00:00
          processingRule:
          - B2B
          - B2B
          flowDirection:
          - Out
          - Out
          ackStatus: Pending
          flowType:
          - SupplierInvoice
          - SupplierInvoice
          trackingId: trackingId
        results:
        - processingRuleSource: Input
          flowProfile: Basic
          processingRule: null
          acknowledgement:
            details:
            - item: item
              level: Error
              reasonMessage: reasonMessage
              reasonCode: EmptyAttachement
            - item: item
              level: Error
              reasonMessage: reasonMessage
              reasonCode: EmptyAttachement
            status: null
          flowDirection: Out
          flowSyntax: CII
          submittedAt: 2000-01-23T04:56:07.000+00:00
          flowId: flowId
          updatedAt: 2000-01-23T04:56:07.000+00:00
          trackingId: trackingId
          flowType: SupplierInvoice
        - processingRuleSource: Input
          flowProfile: Basic
          processingRule: null
          acknowledgement:
            details:
            - item: item
              level: Error
              reasonMessage: reasonMessage
              reasonCode: EmptyAttachement
            - item: item
              level: Error
              reasonMessage: reasonMessage
              reasonCode: EmptyAttachement
            status: null
          flowDirection: Out
          flowSyntax: CII
          submittedAt: 2000-01-23T04:56:07.000+00:00
          flowId: flowId
          updatedAt: 2000-01-23T04:56:07.000+00:00
          trackingId: trackingId
          flowType: SupplierInvoice
      properties:
        limit:
          type: integer
        filters:
          $ref: "#/components/schemas/AFNOR_SearchFlowFilters"
        results:
          items:
            $ref: "#/components/schemas/AFNOR_Flow"
          type: array
    AFNOR_Error:
      description: Error code
      example:
        errorMessage: Invalid request format
        errorCode: MISSING_REQUIRED_FIELD
      properties:
        errorCode:
          description: Short numerical or alphanumerical code that identifies precisely
            a unique error.
          example: MISSING_REQUIRED_FIELD
          type: string
        errorMessage:
          description: "Contains information on the error. Not intended to be displayed\
            \ to an end user. For security reasons, a tradeoff between clarity & security\
            \ shall be found."
          example: Invalid request format
          type: string
      required:
      - errorCode
    AFNOR_WebhookCallbackContent:
      description: ""
      properties:
        flowInfo:
          $ref: "#/components/schemas/AFNOR_Flow"
    AFNOR_searchSiren:
      example:
        sorting:
        - field: siren
          order: ascending
        - field: administrativeStatus
          order: descending
        limit: 50
        ignore: 20
        filters:
          siren:
            op: contains
            value: "702042755"
          administrativeStatus:
            op: strict
            value: A
          entityType:
            op: strict
            value: Public
          businessName:
            op: contains
            value: Boulangerie Pascale
        fields:
        - siren
        - businessName
        - entityType
        - administrativeStatus
        - idInstance
      properties:
        filters:
          $ref: "#/components/schemas/AFNOR_searchSirenFilters"
        sorting:
          description: Sorting criteria on a field and an order (ascending or descending).
          example:
          - field: siren
            order: ascending
          - field: administrativeStatus
            order: descending
          items:
            $ref: "#/components/schemas/AFNOR_searchSirenSortingInner"
          type: array
        fields:
          description: Allows you to filter the desired fields in the response.
          example:
          - siren
          - businessName
          - entityType
          - administrativeStatus
          - idInstance
          items:
            $ref: "#/components/schemas/AFNOR_sirenField"
          type: array
        limit:
          description: Maximum number of results
          example: 50
          format: int32
          type: integer
        ignore:
          description: Number of results to skip
          example: 20
          format: int32
          type: integer
      title: searchSiren
    AFNOR_totalNumberOfResults:
      description: The total number of results
      example: 1500
      format: int32
      type: integer
    AFNOR_legalUnitPayloadHistory:
      example:
        siren: "702042755"
        administrativeStatus: A
        entityType: Public
        businessName: Boulangerie Pascale
      properties:
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        businessName:
          description: Business name
          example: Boulangerie Pascale
          maxLength: 150
          type: string
        entityType:
          $ref: "#/components/schemas/AFNOR_entityType"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_legalUnitAdministrativeStatus"
      title: legalUnitPayloadHistory
    AFNOR_error:
      properties:
        type:
          default: about:blank
          example: /path/reference-url
          format: uri-reference
          type: string
        message:
          example: Error message
          type: string
        status:
          description: |
            The HTTP status code generated by the origin server for this occurrence of the problem.
          format: int32
          maximum: 600
          minimum: 100
          type: integer
        details:
          example: Error detailed description
          type: string
        instance:
          example: /chemin/url-de-reference#instance-du-contexte
          format: uri-reference
          type: string
    AFNOR_sirenField:
      description: Fields of the Siren resource.
      enum:
      - siren
      - businessName
      - entityType
      - administrativeStatus
      - idInstance
      example: siren
      type: string
    AFNOR_searchSiret:
      example:
        include:
        - siren
        sorting:
        - champ: siret
          order: ascending
        - champ: name
          order: descending
        limit: 50
        ignore: 20
        filters:
          siren:
            op: contains
            value: "702042755"
          facilityType:
            op: contains
            value: P
          administrativeStatus:
            op: strict
            value: A
          postalCode:
            op: contains
            value: "38100"
          name:
            op: contains
            value: Boulangerie Pascale
          locality:
            op: contains
            value: Grenoble
          addressLines:
            op: contains
            value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
          siret:
            op: contains
            value: "70204275500000"
          countrySubdivision:
            op: contains
            value: Bretagne
        fields:
        - siret
        - siren
        - name
        - facilityType
        - address
        - diffusible
        - administrativeStatus
        - pmStatus
        - pmOnly
        - managesPaymentStatus
        - managesLegalCommitment
        - managesLegalCommitmentOrService
        - serviceCodeStatus
        - idInstance
      properties:
        filters:
          $ref: "#/components/schemas/AFNOR_searchSiretFilters"
        sorting:
          description: Sorting criteria on a field and an order (ascending or descending).
          example:
          - champ: siret
            order: ascending
          - champ: name
            order: descending
          items:
            $ref: "#/components/schemas/AFNOR_searchSiretSortingInner"
          type: array
        fields:
          description: Allows you to filter the desired fields in the response.
          example:
          - siret
          - siren
          - name
          - facilityType
          - address
          - diffusible
          - administrativeStatus
          - pmStatus
          - pmOnly
          - managesPaymentStatus
          - managesLegalCommitment
          - managesLegalCommitmentOrService
          - serviceCodeStatus
          - idInstance
          items:
            $ref: "#/components/schemas/AFNOR_siretField"
          type: array
        include:
          example:
          - siren
          items:
            enum:
            - siren
            type: string
          type: array
        limit:
          description: Maximum number of results
          example: 50
          format: int32
          type: integer
        ignore:
          description: Number of results to skip
          example: 20
          format: int32
          type: integer
      title: searchSiret
    AFNOR_facilityPayloadHistory:
      example:
        siren: "702042755"
        address:
          countryCode: FR
          postalCode: "38100"
          locality: Grenoble
          addressLine1: 16 BIS RUE HENRI BARBUSSE
          addressLine2: CEDEX 1
          addressLine3: B√¢timent le Callipso
          countryName: France
          countrySubdivision: Bretagne
        diffusible: O
        facilityType: P
        administrativeStatus: A
        b2gAdditionalData:
          managesPaymentStatus: true
          managesLegalCommitmentOrServiceCode: true
          managesLegalCommitmentCode: true
          pm: true
          pmOnly: true
          serviceCodeStatus: true
        name: Boulangerie Pascale
        legalUnit:
          administrativeStatus: A
          entityType: Public
          businessName: Boulangerie Pascale
        siret: "70204275500240"
      properties:
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        name:
          description: business name
          example: Boulangerie Pascale
          maxLength: 100
          type: string
        facilityType:
          $ref: "#/components/schemas/AFNOR_facilityType"
        diffusible:
          $ref: "#/components/schemas/AFNOR_diffusionStatus"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_facilityAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressRead"
        b2gAdditionalData:
          $ref: "#/components/schemas/AFNOR_facilityPayloadHistoryUleB2gAdditionalData"
        legalUnit:
          $ref: "#/components/schemas/AFNOR_legalUnitPayloadIncludedNoSiren"
      title: facilityPayloadHistory
    AFNOR_siretField:
      description: Fields of the Siret resource.
      enum:
      - siret
      - siren
      - name
      - facilityType
      - address
      - diffusible
      - administrativeStatus
      - pmStatus
      - pmOnly
      - managesPaymentStatus
      - managesLegalCommitment
      - managesLegalCommitmentOrService
      - serviceCodeStatus
      - idInstance
      example: siret
      type: string
    AFNOR_createRoutingCodeBody:
      additionalProperties: {}
      properties:
        facilityNature:
          $ref: "#/components/schemas/AFNOR_facilityNature"
        routingIdentifier:
          description: Routing identifier od a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
          type: string
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        routingIdentifierType:
          description: Routing Identifier type.
          example: "0224"
          maxLength: 4
          pattern: ^(?!\s*$).+
          type: string
        routingCodeName:
          description: Name of the directory line routing code. This attribute is
            only returned if the directory line is defined at the SIREN / SIRET /
            Routing code mesh.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        managesLegalCommitmentCode:
          description: Indicates whether the public structure requires a legal commitment
            number. This attribute is only returned if the directory line is defined
            for a public structure at the SIREN / SIRET or SIREN / SIRET / Routing
            code level.
          example: true
          type: boolean
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressEdit"
      required:
      - administrativeStatus
      - facilityNature
      - routingCodeName
      - routingIdentifier
      - siret
      title: CreateRoutingCodeBody
    AFNOR_idInstance:
      description: Platform instance identifier in the directory
      example: 120
      type: integer
    AFNOR_siret:
      description: SIRET Number
      example: "70204275500240"
      maxLength: 14
      pattern: "^([0-9]{14})$"
      type: string
    AFNOR_routingIdentifier:
      description: Routing identifier od a routing code.
      example: dcsc456sdcsdcs556
      maxLength: 100
      pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
      type: string
    AFNOR_routingCodeSearch:
      example:
        include:
        - siren
        - siret
        sorting:
        - field: siret
          order: ascendant
        - field: routingIdentifier
          order: ascendant
        limit: 50
        ignore: 20
        filters:
          routingIdentifier:
            op: contains
            value: dcsc456sdcsdcs556
          administrativeStatus:
            op: strict
            value: A
          postalCode:
            op: contains
            value: "38100"
          locality:
            op: contains
            value: Grenoble
          addressLines:
            op: contains
            value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
          siret:
            op: contains
            value: "70204275500000"
          routingCodeName:
            op: contains
            value: Libell√© Code routage
        fields:
        - siret
        - routingIdentifierType
        - routingCodeName
        - routingIdentifier
        - managesLegalCommitmentCode
        - administrativeStatus
        - address
        - idInstance
      properties:
        filters:
          $ref: "#/components/schemas/AFNOR_routingCodeSearchFilters"
        sorting:
          description: Sorting criteria on a field and an order (ascending or descending).
          example:
          - field: siret
            order: ascendant
          - field: routingIdentifier
            order: ascendant
          items:
            $ref: "#/components/schemas/AFNOR_routingCodeSearchSortingInner"
          type: array
        fields:
          description: Allows you to filter the desired fields in the response.
          example:
          - siret
          - routingIdentifierType
          - routingCodeName
          - routingIdentifier
          - managesLegalCommitmentCode
          - administrativeStatus
          - address
          - idInstance
          items:
            $ref: "#/components/schemas/AFNOR_routingCodeField"
          type: array
        include:
          example:
          - siren
          - siret
          items:
            enum:
            - siren
            - siret
            type: string
          type: array
        limit:
          description: Maximum number of results
          example: 50
          format: int32
          type: integer
        ignore:
          description: Number of results to skip
          example: 20
          format: int32
          type: integer
      title: routingCodeSearch
    AFNOR_routingCodePayloadHistoryLegalUnitFacility:
      example:
        routingIdentifier: dcsc456sdcsdcs556
        address:
          countryCode: FR
          postalCode: "38100"
          locality: Grenoble
          addressLine1: 16 BIS RUE HENRI BARBUSSE
          addressLine2: CEDEX 1
          addressLine3: B√¢timent le Callipso
          countryName: France
          countrySubdivision: Bretagne
        administrativeStatus: A
        managesLegalCommitmentCode: true
        legalUnit:
          siren: "702042755"
          administrativeStatus: A
          entityType: Public
          businessName: Boulangerie Pascale
        routingIdentifierType: "0224"
        siret: "70204275500240"
        facility:
          siren: "702042755"
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          diffusible: O
          facilityType: P
          administrativeStatus: A
          b2gAdditionalData:
            managesPaymentStatus: true
            managesLegalCommitmentOrServiceCode: true
            managesLegalCommitmentCode: true
            pm: true
            pmOnly: true
            serviceCodeStatus: true
          name: Boulangerie Pascale
          siret: "70204275500240"
        routingCodeName: Libell√© Code routage
      properties:
        routingIdentifier:
          description: Routing identifier od a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
          type: string
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        routingIdentifierType:
          description: Routing Identifier type.
          example: "0224"
          maxLength: 4
          pattern: ^(?!\s*$).+
          type: string
        routingCodeName:
          description: Name of the directory line routing code. This attribute is
            only returned if the directory line is defined at the SIREN / SIRET /
            Routing code mesh.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        managesLegalCommitmentCode:
          description: Indicates whether the public structure requires a legal commitment
            number. This attribute is only returned if the directory line is defined
            for a public structure at the SIREN / SIRET or SIREN / SIRET / Routing
            code level.
          example: true
          type: boolean
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressRead"
        legalUnit:
          $ref: "#/components/schemas/AFNOR_legalUnitPayloadIncluded"
        facility:
          $ref: "#/components/schemas/AFNOR_facilityPayloadIncluded"
      title: routingCodePayloadHistoryLegalUnitFacility
    AFNOR_routingCodeField:
      description: Fields of the routing code resource.
      enum:
      - siret
      - routingIdentifierType
      - routingCodeName
      - routingIdentifier
      - managesLegalCommitmentCode
      - administrativeStatus
      - address
      - idInstance
      example: siret
      type: string
    AFNOR_updatePutRoutingCodeBody:
      properties:
        routingIdentifierType:
          description: Routing Identifier type.
          example: "0224"
          maxLength: 4
          pattern: ^(?!\s*$).+
          type: string
        routingCodeName:
          description: Name of the directory line routing code. This attribute is
            only returned if the directory line is defined at the SIREN / SIRET /
            Routing code mesh.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressPut"
      required:
      - administrativeStatus
      - routingCodeName
      - routingIdentifierType
      title: updatePutRoutingCodeBody
    AFNOR_updatePatchRoutingCodeBody:
      properties:
        routingIdentifierType:
          description: Routing Identifier type.
          example: "0224"
          maxLength: 4
          pattern: ^(?!\s*$).+
          type: string
        routingCodeName:
          description: Name of the directory line routing code. This attribute is
            only returned if the directory line is defined at the SIREN / SIRET /
            Routing code mesh.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressPatch"
      title: updatePatchRoutingCodeBody
    AFNOR_searchDirectoryLine:
      example:
        sorting:
        - champ: addressingIdentifier
          order: ascending
        limit: 50
        ignore: 20
        filters:
          addressingSuffix:
            op: strict
            value: dcsc456sdcsdcs556
          siren:
            op: contains
            value: "702042755"
          routingIdentifier:
            op: contains
            value: dcsc456sdcsdcs556
          addressingIdentifier:
            op: contains
            value: dcsc456sdcsdcs556
          siret:
            op: contains
            value: "70204275500000"
        fields:
        - addressingIdentifier
        - siren
        - siret
        - addressingSuffix
        - idInstance
      properties:
        filters:
          $ref: "#/components/schemas/AFNOR_searchDirectoryLineFilters"
        sorting:
          description: Sorting criteria on a field and an order (ascending or descending).
          example:
          - champ: addressingIdentifier
            order: ascending
          items:
            $ref: "#/components/schemas/AFNOR_searchDirectoryLineSortingInner"
          type: array
        fields:
          description: Allows you to filter the desired fields in the response.
          example:
          - addressingIdentifier
          - siren
          - siret
          - addressingSuffix
          - idInstance
          items:
            $ref: "#/components/schemas/AFNOR_directoryLineField"
          type: array
        limit:
          description: Maximum number of results
          example: 50
          format: int32
          type: integer
        ignore:
          description: Number of results to skip
          example: 20
          format: int32
          type: integer
      title: searchDirectoryLine
    AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCode:
      example:
        addressingSuffix: dcsc456sdcsdcs556
        siren: "702042755"
        addressingIdentifier: dcsc456sdcsdcs556
        legalUnit:
          administrativeStatus: A
          entityType: Public
          businessName: Boulangerie Pascale
        siret: "70204275500240"
        facility:
          siren: "702042755"
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          diffusible: O
          facilityType: P
          administrativeStatus: A
          b2gAdditionalData:
            managesPaymentStatus: true
            managesLegalCommitmentOrServiceCode: true
            managesLegalCommitmentCode: true
            pm: true
            pmOnly: true
            serviceCodeStatus: true
          name: Boulangerie Pascale
          siret: "70204275500240"
        routingCode:
          managesLegalCommitment: true
          routingIdentifier: dcsc456sdcsdcs556
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          administrativeStatus: A
          routingIdentifierType: "0224"
          routingCodeName: Libell√© Code routage
        platform:
          platformType: WK
          platformStatus: Enabled
      properties:
        addressingIdentifier:
          description: Addressing identifier of the directory line.
          example: dcsc456sdcsdcs556
          maxLength: 125
          type: string
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        addressingSuffix:
          description: suffix of the directory line which defines an address mesh
            not attached to a facility
          example: dcsc456sdcsdcs556
          maxLength: 100
          type: string
        routingCode:
          $ref: "#/components/schemas/AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCodeRoutingCode"
        platform:
          $ref: "#/components/schemas/AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCodePlatform"
        legalUnit:
          $ref: "#/components/schemas/AFNOR_legalUnitPayloadIncludedNoSiren"
        facility:
          $ref: "#/components/schemas/AFNOR_facilityPayloadIncluded"
      title: directoryLinePayloadHistoryLegalUnitFacilityRoutingCode
    AFNOR_createDirectoryLineBody:
      properties:
        period:
          $ref: "#/components/schemas/AFNOR_createDirectoryLineBodyPeriod"
        addressingInformation:
          $ref: "#/components/schemas/AFNOR_createDirectoryLineBodyAddressingInformation"
      title: CreateDirectoryLineBody
    AFNOR_addressingIdentifier:
      description: Addressing identifier of the directory line.
      example: dcsc456sdcsdcs556
      maxLength: 125
      type: string
    AFNOR_dateFrom:
      description: Effective start date of the directory line..
      example: 2023-01-01
      format: date
      type: string
    AFNOR_directoryLineField:
      description: Fields of the directory line resource
      enum:
      - addressingIdentifier
      - siren
      - siret
      - routingIdentifier
      - addressingSuffix
      - idInstance
      example: siren
      type: string
    AFNOR_updatePatchDirectoryLineBody:
      properties:
        dateTo:
          description: Effective end date of the directory line.
          example: 2023-01-31
          format: date
          type: string
      title: updatePatchDirectoryLineBody
    AFNOR_containsOperator:
      description: \"contains\" comparison operator
      enum:
      - contains
      example: contains
      title: opContient
      type: string
    AFNOR_sirenSearch:
      description: SIREN number to search for.
      example: "702042755"
      maxLength: 9
      pattern: "[0-9]*"
      type: string
    AFNOR_recipientBusinessName:
      description: Business name
      example: Boulangerie Pascale
      maxLength: 150
      type: string
    AFNOR_strictOperator:
      description: \"strict\" comparison operator
      enum:
      - strict
      example: strict
      title: opStrict
      type: string
    AFNOR_entityType:
      description: Business structure type
      enum:
      - Public
      - PrivateVatRegistered
      example: Public
      maxLength: 20
      type: string
    AFNOR_legalUnitAdministrativeStatus:
      description: "Refers to the administrative status of the legal unit [A - Active\
        \ , C - Closed]"
      enum:
      - A
      - C
      example: A
      maxLength: 1
      type: string
    AFNOR_sortingOrder:
      description: Sorting order (ascending or descending)
      enum:
      - ascending
      - descending
      example: ascending
      title: sortingOrder
      type: string
    AFNOR_limit:
      description: Maximum number of results
      example: 50
      format: int32
      type: integer
    AFNOR_ignore:
      description: Number of results to skip
      example: 20
      format: int32
      type: integer
    AFNOR_siren:
      description: SIREN number
      example: "702042755"
      maxLength: 9
      pattern: "^([0-9]{9})$"
      type: string
    AFNOR_siretSearch:
      description: SIRET number to search for.
      example: "70204275500000"
      maxLength: 14
      pattern: "[0-9]*"
      type: string
    AFNOR_facilityType:
      description: "Indicates whether the facility is listed as the main facility\
        \ or not [P - Main facility , S - Secondary facility]"
      enum:
      - P
      - S
      example: P
      maxLength: 1
      type: string
    AFNOR_name:
      description: business name
      example: Boulangerie Pascale
      maxLength: 100
      type: string
    AFNOR_addressLines:
      description: address lines of the recipient structure having defined the directory
        line(s).
      example: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
      maxLength: 600
      type: string
    AFNOR_postalCode:
      description: Service postal code
      example: "38100"
      maxLength: 5
      pattern: "[0-9]*"
      type: string
    AFNOR_countrySubdivision:
      description: Subdivision of the country
      example: Bretagne
      maxLength: 255
      type: string
    AFNOR_locality:
      description: Municipality of the recipient structure having defined the directory
        line(s).
      example: Grenoble
      maxLength: 100
      type: string
    AFNOR_facilityAdministrativeStatus:
      description: "Facility administrative status [A - Active , C - Closed]"
      enum:
      - A
      - C
      example: A
      maxLength: 1
      type: string
    AFNOR_diffusionStatus:
      description: "Diffusion status of the structure [O - Yes, P - Partially diffusible]"
      enum:
      - O
      - P
      example: O
      maxLength: 1
      type: string
    AFNOR_addressRead:
      description: Wrapper for postal addresses
      example:
        countryCode: FR
        postalCode: "38100"
        locality: Grenoble
        addressLine1: 16 BIS RUE HENRI BARBUSSE
        addressLine2: CEDEX 1
        addressLine3: B√¢timent le Callipso
        countryName: France
        countrySubdivision: Bretagne
      properties:
        addressLine1:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: 16 BIS RUE HENRI BARBUSSE
          maxLength: 255
          type: string
        addressLine2:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: CEDEX 1
          maxLength: 255
          type: string
        addressLine3:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: B√¢timent le Callipso
          maxLength: 255
          type: string
        postalCode:
          description: Service postal code
          example: "38100"
          maxLength: 5
          pattern: "[0-9]*"
          type: string
        countrySubdivision:
          description: Subdivision of the country
          example: Bretagne
          maxLength: 255
          type: string
        locality:
          description: Municipality of the recipient structure having defined the
            directory line(s).
          example: Grenoble
          maxLength: 100
          type: string
        countryCode:
          description: Corresponds to the country of the recipient structure.
          example: FR
          maxLength: 2
          type: string
        countryName:
          description: Corresponds to the country of the recipient structure having
            defined the directory line(s).
          example: France
          maxLength: 100
          type: string
    AFNOR_addressEdit:
      description: Wrapper for postal addresses without country name.
      properties:
        ligneAdresse1:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: 16 BIS RUE HENRI BARBUSSE
          maxLength: 255
          type: string
        ligneAdresse2:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: CEDEX 1
          maxLength: 255
          type: string
        ligneAdresse3:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: B√¢timent le Callipso
          maxLength: 255
          type: string
        postalCode:
          description: Service postal code
          example: "38100"
          maxLength: 5
          pattern: "[0-9]*"
          type: string
        countrySubdivision:
          description: Subdivision of the country
          example: Bretagne
          maxLength: 255
          type: string
        locality:
          description: Municipality of the recipient structure having defined the
            directory line(s).
          example: Grenoble
          maxLength: 100
          type: string
        codePays:
          description: Corresponds to the country of the recipient structure.
          example: FR
          maxLength: 2
          type: string
    AFNOR_addressPut:
      description: Wrapper for postal addresses
      properties:
        ligneAdresse1:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: 16 BIS RUE HENRI BARBUSSE
          maxLength: 200
          pattern: ^(?!\s*$).+
          type: string
        ligneAdresse2:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: CEDEX 1
          maxLength: 255
          type: string
        ligneAdresse3:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: B√¢timent le Callipso
          maxLength: 255
          type: string
        postalCode:
          description: Service postal code
          example: "38100"
          maxLength: 5
          pattern: "[0-9]*"
          type: string
        countrySubdivision:
          description: Subdivision of the country
          example: Bretagne
          maxLength: 255
          type: string
        locality:
          description: Corresponds to the municipality of the recipient structure
            having defined the directory line(s).
          example: Grenoble
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        codePays:
          description: Corresponds to the country code of the recipient structure
          example: FR
          maxLength: 2
          pattern: ^(?!\s*$).+
          type: string
      required:
      - codePays
      - countrySubdivision
      - ligneAdresse1
      - ligneAdresse2
      - ligneAdresse3
      - locality
      - postalCode
    AFNOR_addressPatch:
      description: Wrapper for postal addresses
      properties:
        ligneAdresse1:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: 16 BIS RUE HENRI BARBUSSE
          maxLength: 200
          pattern: ^(?!\s*$).+
          type: string
        ligneAdresse2:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: CEDEX 1
          maxLength: 255
          type: string
        ligneAdresse3:
          description: Corresponds to the address of the recipient structure having
            defined the directory line(s).
          example: B√¢timent le Callipso
          maxLength: 255
          type: string
        postalCode:
          description: Service postal code
          example: "38100"
          maxLength: 5
          pattern: "[0-9]*"
          type: string
        countrySubdivision:
          description: Subdivision of the country
          example: Bretagne
          maxLength: 255
          type: string
        locality:
          description: Corresponds to the municipality of the recipient structure
            having defined the directory line(s).
          example: Grenoble
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        codePays:
          description: Corresponds to the country code of the recipient structure
          example: FR
          maxLength: 2
          pattern: ^(?!\s*$).+
          type: string
    AFNOR_pmStatus:
      description: Indicates whether the public structure acts as project manager
        for work invoices in addition to receiving simple invoices. This attribute
        is only returned if the directory line is defined for a public structure at
        the SIREN / SIRET or SIREN / SIRET / Routing code level.
      example: true
      type: boolean
    AFNOR_pmOnly:
      description: "Indicates whether the public structure only acts as a project\
        \ manager; if so, it can only receive invoices for work. This attribute is\
        \ only returned if the directory line is defined for a public structure at\
        \ the SIREN/SIRET or SIREN/SIRET/Routing code level."
      example: true
      type: boolean
    AFNOR_managesPaymentStatus:
      description: Indicates whether the public structure manages the payment status
        of invoices. This attribute is only returned if the directory line is defined
        for a public structure at the SIREN / SIRET or SIREN / SIRET / Routing code
        level.
      example: true
      type: boolean
    AFNOR_managesLegalCommitmentCode:
      description: Indicates whether the public structure requires a legal commitment
        number. This attribute is only returned if the directory line is defined for
        a public structure at the SIREN / SIRET or SIREN / SIRET / Routing code level.
      example: true
      type: boolean
    AFNOR_managesLegalCommitmentOrServiceCode:
      description: Indicates whether the public structure requires a service code
        or a commitment code in its exchanges. This attribute is only returned if
        the directory line is defined for a public structure at the SIREN / SIRET
        or SIREN / SIRET / Routing code level.
      example: true
      type: boolean
    AFNOR_serviceCodeStatus:
      description: Indicates whether the structure requires a service code. This attribute
        is only returned if the directory line is defined for a public structure at
        the SIREN / SIRET or SIREN / SIRET / Routing code level.
      example: true
      type: boolean
    AFNOR_legalUnitPayloadIncludedNoSiren:
      example:
        administrativeStatus: A
        entityType: Public
        businessName: Boulangerie Pascale
      properties:
        businessName:
          description: Business name
          example: Boulangerie Pascale
          maxLength: 150
          type: string
        entityType:
          $ref: "#/components/schemas/AFNOR_entityType"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_legalUnitAdministrativeStatus"
      title: legalUnitPayloadIncluded
    AFNOR_facilityNature:
      description: facility nature (public ou private).
      enum:
      - Private
      - Public
      example: Priv√©e
      maxLength: 5
      type: string
    AFNOR_routingIdentifierType:
      description: Routing Identifier type.
      example: "0224"
      maxLength: 4
      pattern: ^(?!\s*$).+
      type: string
    AFNOR_recipientRoutingCodeName:
      description: Name of the directory line routing code. This attribute is only
        returned if the directory line is defined at the SIREN / SIRET / Routing code
        mesh.
      example: Libell√© Code routage
      maxLength: 100
      pattern: ^(?!\s*$).+
      type: string
    AFNOR_routingCodeAdministrativeStatus:
      description: "Administrative status of the routing code [A - Active , C - Closed]"
      enum:
      - A
      - C
      example: A
      maxLength: 1
      type: string
    AFNOR_routingIdentifierSearch:
      description: Routing identifier for a routing code.
      example: dcsc456sdcsdcs556
      maxLength: 100
      pattern: ^$|^(?!\s*$).+
      type: string
    AFNOR_routingCodeNameSearch:
      description: Name of the routing code.
      example: Libell√© Code routage
      maxLength: 100
      pattern: ^$|^(?!\s*$).+
      type: string
    AFNOR_legalUnitPayloadIncluded:
      example:
        siren: "702042755"
        administrativeStatus: A
        entityType: Public
        businessName: Boulangerie Pascale
      properties:
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        businessName:
          description: Business name
          example: Boulangerie Pascale
          maxLength: 150
          type: string
        entityType:
          $ref: "#/components/schemas/AFNOR_entityType"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_legalUnitAdministrativeStatus"
      title: legalUnitPayloadIncluded
    AFNOR_facilityPayloadIncluded:
      example:
        siren: "702042755"
        address:
          countryCode: FR
          postalCode: "38100"
          locality: Grenoble
          addressLine1: 16 BIS RUE HENRI BARBUSSE
          addressLine2: CEDEX 1
          addressLine3: B√¢timent le Callipso
          countryName: France
          countrySubdivision: Bretagne
        diffusible: O
        facilityType: P
        administrativeStatus: A
        b2gAdditionalData:
          managesPaymentStatus: true
          managesLegalCommitmentOrServiceCode: true
          managesLegalCommitmentCode: true
          pm: true
          pmOnly: true
          serviceCodeStatus: true
        name: Boulangerie Pascale
        siret: "70204275500240"
      properties:
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        name:
          description: business name
          example: Boulangerie Pascale
          maxLength: 100
          type: string
        facilityType:
          $ref: "#/components/schemas/AFNOR_facilityType"
        diffusible:
          $ref: "#/components/schemas/AFNOR_diffusionStatus"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_facilityAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressRead"
        b2gAdditionalData:
          $ref: "#/components/schemas/AFNOR_facilityPayloadHistoryUleB2gAdditionalData"
      title: facilityPayloadIncluded
    AFNOR_addressingSuffix:
      description: suffix of the directory line which defines an address mesh not
        attached to a facility
      example: dcsc456sdcsdcs556
      maxLength: 100
      type: string
    AFNOR_dateTo:
      description: Effective end date of the directory line.
      example: 2023-01-31
      format: date
      type: string
    AFNOR_recipientPlatformType:
      description: The type of platform for document reception
      enum:
      - WK
      - DFH
      example: WK
      maxLength: 3
      type: string
    AFNOR_platformStatus:
      description: Status of the platform
      enum:
      - Enabled
      - Disabled
      example: Enabled
      maxLength: 7
      type: string
    AFNOR_recipientAddressLine1:
      description: Corresponds to the address of the recipient structure having defined
        the directory line(s).
      example: 16 BIS RUE HENRI BARBUSSE
      maxLength: 255
      type: string
    AFNOR_recipientAddressLine2:
      description: Corresponds to the address of the recipient structure having defined
        the directory line(s).
      example: CEDEX 1
      maxLength: 255
      type: string
    AFNOR_recipientAddressLine3:
      description: Corresponds to the address of the recipient structure having defined
        the directory line(s).
      example: B√¢timent le Callipso
      maxLength: 255
      type: string
    AFNOR_recipientCountryCode:
      description: Corresponds to the country of the recipient structure.
      example: FR
      maxLength: 2
      type: string
    AFNOR_recipientCountryName:
      description: Corresponds to the country of the recipient structure having defined
        the directory line(s).
      example: France
      maxLength: 100
      type: string
    AFNOR_recipientAddressLine1Pattern:
      description: Corresponds to the address of the recipient structure having defined
        the directory line(s).
      example: 16 BIS RUE HENRI BARBUSSE
      maxLength: 200
      pattern: ^(?!\s*$).+
      type: string
    AFNOR_localityPattern:
      description: Corresponds to the municipality of the recipient structure having
        defined the directory line(s).
      example: Grenoble
      maxLength: 100
      pattern: ^(?!\s*$).+
      type: string
    AFNOR_recipientCountryCodePattern:
      description: Corresponds to the country code of the recipient structure
      example: FR
      maxLength: 2
      pattern: ^(?!\s*$).+
      type: string
    AFNOR_sirenSearchPost200Response:
      example:
        totalNumberOfResults: 1500
        search:
          sorting:
          - field: siren
            order: ascending
          - field: administrativeStatus
            order: descending
          limit: 50
          ignore: 20
          filters:
            siren:
              op: contains
              value: "702042755"
            administrativeStatus:
              op: strict
              value: A
            entityType:
              op: strict
              value: Public
            businessName:
              op: contains
              value: Boulangerie Pascale
          fields:
          - siren
          - businessName
          - entityType
          - administrativeStatus
          - idInstance
        results:
        - siren: "702042755"
          administrativeStatus: A
          entityType: Public
          businessName: Boulangerie Pascale
        - siren: "702042755"
          administrativeStatus: A
          entityType: Public
          businessName: Boulangerie Pascale
      properties:
        search:
          $ref: "#/components/schemas/AFNOR_searchSiren"
        totalNumberOfResults:
          description: The total number of results
          example: 1500
          format: int32
          type: integer
        results:
          items:
            $ref: "#/components/schemas/AFNOR_legalUnitPayloadHistory"
          type: array
    AFNOR_siretSearchPost200Response:
      example:
        totalNumberOfResults: 1500
        search:
          include:
          - siren
          sorting:
          - champ: siret
            order: ascending
          - champ: name
            order: descending
          limit: 50
          ignore: 20
          filters:
            siren:
              op: contains
              value: "702042755"
            facilityType:
              op: contains
              value: P
            administrativeStatus:
              op: strict
              value: A
            postalCode:
              op: contains
              value: "38100"
            name:
              op: contains
              value: Boulangerie Pascale
            locality:
              op: contains
              value: Grenoble
            addressLines:
              op: contains
              value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
            siret:
              op: contains
              value: "70204275500000"
            countrySubdivision:
              op: contains
              value: Bretagne
          fields:
          - siret
          - siren
          - name
          - facilityType
          - address
          - diffusible
          - administrativeStatus
          - pmStatus
          - pmOnly
          - managesPaymentStatus
          - managesLegalCommitment
          - managesLegalCommitmentOrService
          - serviceCodeStatus
          - idInstance
        results:
        - siren: "702042755"
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          diffusible: O
          facilityType: P
          administrativeStatus: A
          b2gAdditionalData:
            managesPaymentStatus: true
            managesLegalCommitmentOrServiceCode: true
            managesLegalCommitmentCode: true
            pm: true
            pmOnly: true
            serviceCodeStatus: true
          name: Boulangerie Pascale
          legalUnit:
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          siret: "70204275500240"
        - siren: "702042755"
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          diffusible: O
          facilityType: P
          administrativeStatus: A
          b2gAdditionalData:
            managesPaymentStatus: true
            managesLegalCommitmentOrServiceCode: true
            managesLegalCommitmentCode: true
            pm: true
            pmOnly: true
            serviceCodeStatus: true
          name: Boulangerie Pascale
          legalUnit:
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          siret: "70204275500240"
      properties:
        search:
          $ref: "#/components/schemas/AFNOR_searchSiret"
        totalNumberOfResults:
          description: The total number of results
          example: 1500
          format: int32
          type: integer
        results:
          items:
            $ref: "#/components/schemas/AFNOR_facilityPayloadHistory"
          type: array
    AFNOR_routingCodePost201Response:
      example:
        routingIdentifier: dcsc456sdcsdcs556
        idInstance: 120
        siret: "70204275500240"
      properties:
        idInstance:
          description: Platform instance identifier in the directory
          example: 120
          type: integer
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        routingIdentifier:
          description: Routing identifier od a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
          type: string
    AFNOR_routingCodeSearchPost200Response:
      example:
        totalNumberOfResults: 1500
        search:
          include:
          - siren
          - siret
          sorting:
          - field: siret
            order: ascendant
          - field: routingIdentifier
            order: ascendant
          limit: 50
          ignore: 20
          filters:
            routingIdentifier:
              op: contains
              value: dcsc456sdcsdcs556
            administrativeStatus:
              op: strict
              value: A
            postalCode:
              op: contains
              value: "38100"
            locality:
              op: contains
              value: Grenoble
            addressLines:
              op: contains
              value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
            siret:
              op: contains
              value: "70204275500000"
            routingCodeName:
              op: contains
              value: Libell√© Code routage
          fields:
          - siret
          - routingIdentifierType
          - routingCodeName
          - routingIdentifier
          - managesLegalCommitmentCode
          - administrativeStatus
          - address
          - idInstance
        results:
        - routingIdentifier: dcsc456sdcsdcs556
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          administrativeStatus: A
          managesLegalCommitmentCode: true
          legalUnit:
            siren: "702042755"
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          routingIdentifierType: "0224"
          siret: "70204275500240"
          facility:
            siren: "702042755"
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            diffusible: O
            facilityType: P
            administrativeStatus: A
            b2gAdditionalData:
              managesPaymentStatus: true
              managesLegalCommitmentOrServiceCode: true
              managesLegalCommitmentCode: true
              pm: true
              pmOnly: true
              serviceCodeStatus: true
            name: Boulangerie Pascale
            siret: "70204275500240"
          routingCodeName: Libell√© Code routage
        - routingIdentifier: dcsc456sdcsdcs556
          address:
            countryCode: FR
            postalCode: "38100"
            locality: Grenoble
            addressLine1: 16 BIS RUE HENRI BARBUSSE
            addressLine2: CEDEX 1
            addressLine3: B√¢timent le Callipso
            countryName: France
            countrySubdivision: Bretagne
          administrativeStatus: A
          managesLegalCommitmentCode: true
          legalUnit:
            siren: "702042755"
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          routingIdentifierType: "0224"
          siret: "70204275500240"
          facility:
            siren: "702042755"
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            diffusible: O
            facilityType: P
            administrativeStatus: A
            b2gAdditionalData:
              managesPaymentStatus: true
              managesLegalCommitmentOrServiceCode: true
              managesLegalCommitmentCode: true
              pm: true
              pmOnly: true
              serviceCodeStatus: true
            name: Boulangerie Pascale
            siret: "70204275500240"
          routingCodeName: Libell√© Code routage
      properties:
        search:
          $ref: "#/components/schemas/AFNOR_routingCodeSearch"
        totalNumberOfResults:
          description: The total number of results
          example: 1500
          format: int32
          type: integer
        results:
          items:
            $ref: "#/components/schemas/AFNOR_routingCodePayloadHistoryLegalUnitFacility"
          type: array
    AFNOR_directoryLineSearchPost200Response:
      example:
        totalNumberOfResults: 1500
        search:
          sorting:
          - champ: addressingIdentifier
            order: ascending
          limit: 50
          ignore: 20
          filters:
            addressingSuffix:
              op: strict
              value: dcsc456sdcsdcs556
            siren:
              op: contains
              value: "702042755"
            routingIdentifier:
              op: contains
              value: dcsc456sdcsdcs556
            addressingIdentifier:
              op: contains
              value: dcsc456sdcsdcs556
            siret:
              op: contains
              value: "70204275500000"
          fields:
          - addressingIdentifier
          - siren
          - siret
          - addressingSuffix
          - idInstance
        results:
        - addressingSuffix: dcsc456sdcsdcs556
          siren: "702042755"
          addressingIdentifier: dcsc456sdcsdcs556
          legalUnit:
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          siret: "70204275500240"
          facility:
            siren: "702042755"
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            diffusible: O
            facilityType: P
            administrativeStatus: A
            b2gAdditionalData:
              managesPaymentStatus: true
              managesLegalCommitmentOrServiceCode: true
              managesLegalCommitmentCode: true
              pm: true
              pmOnly: true
              serviceCodeStatus: true
            name: Boulangerie Pascale
            siret: "70204275500240"
          routingCode:
            managesLegalCommitment: true
            routingIdentifier: dcsc456sdcsdcs556
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            administrativeStatus: A
            routingIdentifierType: "0224"
            routingCodeName: Libell√© Code routage
          platform:
            platformType: WK
            platformStatus: Enabled
        - addressingSuffix: dcsc456sdcsdcs556
          siren: "702042755"
          addressingIdentifier: dcsc456sdcsdcs556
          legalUnit:
            administrativeStatus: A
            entityType: Public
            businessName: Boulangerie Pascale
          siret: "70204275500240"
          facility:
            siren: "702042755"
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            diffusible: O
            facilityType: P
            administrativeStatus: A
            b2gAdditionalData:
              managesPaymentStatus: true
              managesLegalCommitmentOrServiceCode: true
              managesLegalCommitmentCode: true
              pm: true
              pmOnly: true
              serviceCodeStatus: true
            name: Boulangerie Pascale
            siret: "70204275500240"
          routingCode:
            managesLegalCommitment: true
            routingIdentifier: dcsc456sdcsdcs556
            address:
              countryCode: FR
              postalCode: "38100"
              locality: Grenoble
              addressLine1: 16 BIS RUE HENRI BARBUSSE
              addressLine2: CEDEX 1
              addressLine3: B√¢timent le Callipso
              countryName: France
              countrySubdivision: Bretagne
            administrativeStatus: A
            routingIdentifierType: "0224"
            routingCodeName: Libell√© Code routage
          platform:
            platformType: WK
            platformStatus: Enabled
      properties:
        search:
          $ref: "#/components/schemas/AFNOR_searchDirectoryLine"
        totalNumberOfResults:
          description: The total number of results
          example: 1500
          format: int32
          type: integer
        results:
          items:
            $ref: "#/components/schemas/AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCode"
          type: array
    AFNOR_directoryLinePost201Response:
      example:
        addressingIdentifier: dcsc456sdcsdcs556
        idInstance: 120
        dateFrom: 2023-01-01
      properties:
        idInstance:
          description: Platform instance identifier in the directory
          example: 120
          type: integer
        addressingIdentifier:
          description: Addressing identifier of the directory line.
          example: dcsc456sdcsdcs556
          maxLength: 125
          type: string
        dateFrom:
          description: Effective start date of the directory line..
          example: 2023-01-01
          format: date
          type: string
    AFNOR_searchSirenFiltersSiren:
      example:
        op: contains
        value: "702042755"
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: SIREN number to search for.
          example: "702042755"
          maxLength: 9
          pattern: "[0-9]*"
          type: string
    AFNOR_searchSirenFiltersBusinessName:
      example:
        op: contains
        value: Boulangerie Pascale
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Business name
          example: Boulangerie Pascale
          maxLength: 150
          type: string
    AFNOR_searchSirenFiltersEntityType:
      example:
        op: strict
        value: Public
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_strictOperator"
        value:
          $ref: "#/components/schemas/AFNOR_entityType"
    AFNOR_searchSirenFiltersAdministrativeStatus:
      example:
        op: strict
        value: A
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_strictOperator"
        value:
          $ref: "#/components/schemas/AFNOR_legalUnitAdministrativeStatus"
    AFNOR_searchSirenFilters:
      example:
        siren:
          op: contains
          value: "702042755"
        administrativeStatus:
          op: strict
          value: A
        entityType:
          op: strict
          value: Public
        businessName:
          op: contains
          value: Boulangerie Pascale
      properties:
        siren:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersSiren"
        businessName:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersBusinessName"
        entityType:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersEntityType"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersAdministrativeStatus"
    AFNOR_searchSirenSortingInner:
      description: A sorting criteria composed of a field and an order (ascending
        or descending).
      example:
        champ: siren
        order: ascendant
      properties:
        field:
          $ref: "#/components/schemas/AFNOR_sirenField"
        sortingOrder:
          $ref: "#/components/schemas/AFNOR_sortingOrder"
    AFNOR_searchSiretFiltersSiret:
      example:
        op: contains
        value: "70204275500000"
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: SIRET number to search for.
          example: "70204275500000"
          maxLength: 14
          pattern: "[0-9]*"
          type: string
    AFNOR_searchSiretFiltersFacilityType:
      example:
        op: contains
        value: P
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          $ref: "#/components/schemas/AFNOR_facilityType"
    AFNOR_searchSiretFiltersName:
      example:
        op: contains
        value: Boulangerie Pascale
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: business name
          example: Boulangerie Pascale
          maxLength: 100
          type: string
    AFNOR_searchSiretFiltersAddressLines:
      example:
        op: contains
        value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: address lines of the recipient structure having defined the
            directory line(s).
          example: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
          maxLength: 600
          type: string
    AFNOR_searchSiretFiltersPostalCode:
      example:
        op: contains
        value: "38100"
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Service postal code
          example: "38100"
          maxLength: 5
          pattern: "[0-9]*"
          type: string
    AFNOR_searchSiretFiltersCountrySubdivision:
      example:
        op: contains
        value: Bretagne
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Subdivision of the country
          example: Bretagne
          maxLength: 255
          type: string
    AFNOR_searchSiretFiltersLocality:
      example:
        op: contains
        value: Grenoble
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Municipality of the recipient structure having defined the
            directory line(s).
          example: Grenoble
          maxLength: 100
          type: string
    AFNOR_searchSiretFiltersAdministrativeStatus:
      example:
        op: strict
        value: A
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_strictOperator"
        value:
          $ref: "#/components/schemas/AFNOR_facilityAdministrativeStatus"
    AFNOR_searchSiretFilters:
      example:
        siren:
          op: contains
          value: "702042755"
        facilityType:
          op: contains
          value: P
        administrativeStatus:
          op: strict
          value: A
        postalCode:
          op: contains
          value: "38100"
        name:
          op: contains
          value: Boulangerie Pascale
        locality:
          op: contains
          value: Grenoble
        addressLines:
          op: contains
          value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
        siret:
          op: contains
          value: "70204275500000"
        countrySubdivision:
          op: contains
          value: Bretagne
      properties:
        siret:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersSiret"
        siren:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersSiren"
        facilityType:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersFacilityType"
        name:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersName"
        addressLines:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersAddressLines"
        postalCode:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersPostalCode"
        countrySubdivision:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersCountrySubdivision"
        locality:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersLocality"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersAdministrativeStatus"
    AFNOR_searchSiretSortingInner:
      description: A sorting criteria composed of a field and an order (ascending
        or descending).
      example:
        field: siret
        sortingOrder: ascending
      properties:
        field:
          $ref: "#/components/schemas/AFNOR_siretField"
        sortingOrder:
          $ref: "#/components/schemas/AFNOR_sortingOrder"
    AFNOR_facilityPayloadHistoryUleB2gAdditionalData:
      example:
        managesPaymentStatus: true
        managesLegalCommitmentOrServiceCode: true
        managesLegalCommitmentCode: true
        pm: true
        pmOnly: true
        serviceCodeStatus: true
      properties:
        pm:
          description: Indicates whether the public structure acts as project manager
            for work invoices in addition to receiving simple invoices. This attribute
            is only returned if the directory line is defined for a public structure
            at the SIREN / SIRET or SIREN / SIRET / Routing code level.
          example: true
          type: boolean
        pmOnly:
          description: "Indicates whether the public structure only acts as a project\
            \ manager; if so, it can only receive invoices for work. This attribute\
            \ is only returned if the directory line is defined for a public structure\
            \ at the SIREN/SIRET or SIREN/SIRET/Routing code level."
          example: true
          type: boolean
        managesPaymentStatus:
          description: Indicates whether the public structure manages the payment
            status of invoices. This attribute is only returned if the directory line
            is defined for a public structure at the SIREN / SIRET or SIREN / SIRET
            / Routing code level.
          example: true
          type: boolean
        managesLegalCommitmentCode:
          description: Indicates whether the public structure requires a legal commitment
            number. This attribute is only returned if the directory line is defined
            for a public structure at the SIREN / SIRET or SIREN / SIRET / Routing
            code level.
          example: true
          type: boolean
        managesLegalCommitmentOrServiceCode:
          description: Indicates whether the public structure requires a service code
            or a commitment code in its exchanges. This attribute is only returned
            if the directory line is defined for a public structure at the SIREN /
            SIRET or SIREN / SIRET / Routing code level.
          example: true
          type: boolean
        serviceCodeStatus:
          description: Indicates whether the structure requires a service code. This
            attribute is only returned if the directory line is defined for a public
            structure at the SIREN / SIRET or SIREN / SIRET / Routing code level.
          example: true
          type: boolean
    AFNOR_routingCodeSearchFiltersRoutingIdentifier:
      example:
        op: contains
        value: dcsc456sdcsdcs556
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Routing identifier for a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: ^$|^(?!\s*$).+
          type: string
    AFNOR_routingCodeSearchFiltersRoutingCodeName:
      example:
        op: contains
        value: Libell√© Code routage
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Name of the routing code.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^$|^(?!\s*$).+
          type: string
    AFNOR_routingCodeSearchFiltersAdministrativeStatus:
      example:
        op: strict
        value: A
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_strictOperator"
        value:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
    AFNOR_routingCodeSearchFilters:
      example:
        routingIdentifier:
          op: contains
          value: dcsc456sdcsdcs556
        administrativeStatus:
          op: strict
          value: A
        postalCode:
          op: contains
          value: "38100"
        locality:
          op: contains
          value: Grenoble
        addressLines:
          op: contains
          value: 16 BIS RUE HENRI BARBUSSE - CEDEX 1 - B√¢timent le Callipso
        siret:
          op: contains
          value: "70204275500000"
        routingCodeName:
          op: contains
          value: Libell√© Code routage
      properties:
        routingIdentifier:
          $ref: "#/components/schemas/AFNOR_routingCodeSearchFiltersRoutingIdentifier"
        siret:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersSiret"
        routingCodeName:
          $ref: "#/components/schemas/AFNOR_routingCodeSearchFiltersRoutingCodeName"
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeSearchFiltersAdministrativeStatus"
        addressLines:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersAddressLines"
        postalCode:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersPostalCode"
        locality:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersLocality"
    AFNOR_routingCodeSearchSortingInner:
      description: A sort criteria composed of a field and an order (ascending or
        descending).
      example:
        field: siret
        order: descendant
      properties:
        field:
          $ref: "#/components/schemas/AFNOR_routingCodeField"
        order:
          $ref: "#/components/schemas/AFNOR_sortingOrder"
    AFNOR_searchDirectoryLineFiltersAddressingIdentifier:
      example:
        op: contains
        value: dcsc456sdcsdcs556
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_containsOperator"
        value:
          description: Addressing identifier of the directory line.
          example: dcsc456sdcsdcs556
          maxLength: 125
          type: string
    AFNOR_searchDirectoryLineFiltersAddressingSuffix:
      example:
        op: strict
        value: dcsc456sdcsdcs556
      properties:
        op:
          $ref: "#/components/schemas/AFNOR_strictOperator"
        value:
          description: suffix of the directory line which defines an address mesh
            not attached to a facility
          example: dcsc456sdcsdcs556
          maxLength: 100
          type: string
    AFNOR_searchDirectoryLineFilters:
      example:
        addressingSuffix:
          op: strict
          value: dcsc456sdcsdcs556
        siren:
          op: contains
          value: "702042755"
        routingIdentifier:
          op: contains
          value: dcsc456sdcsdcs556
        addressingIdentifier:
          op: contains
          value: dcsc456sdcsdcs556
        siret:
          op: contains
          value: "70204275500000"
      properties:
        addressingIdentifier:
          $ref: "#/components/schemas/AFNOR_searchDirectoryLineFiltersAddressingIdentifier"
        siren:
          $ref: "#/components/schemas/AFNOR_searchSirenFiltersSiren"
        siret:
          $ref: "#/components/schemas/AFNOR_searchSiretFiltersSiret"
        routingIdentifier:
          $ref: "#/components/schemas/AFNOR_routingCodeSearchFiltersRoutingIdentifier"
        addressingSuffix:
          $ref: "#/components/schemas/AFNOR_searchDirectoryLineFiltersAddressingSuffix"
    AFNOR_searchDirectoryLineSortingInner:
      description: A sort criteria composed of a field and an order (ascending or
        descending).
      example:
        champ: addressingIdentifier
        order: ascending
      properties:
        field:
          $ref: "#/components/schemas/AFNOR_directoryLineField"
        sortingOrder:
          $ref: "#/components/schemas/AFNOR_sortingOrder"
    AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCodeRoutingCode:
      example:
        managesLegalCommitment: true
        routingIdentifier: dcsc456sdcsdcs556
        address:
          countryCode: FR
          postalCode: "38100"
          locality: Grenoble
          addressLine1: 16 BIS RUE HENRI BARBUSSE
          addressLine2: CEDEX 1
          addressLine3: B√¢timent le Callipso
          countryName: France
          countrySubdivision: Bretagne
        administrativeStatus: A
        routingIdentifierType: "0224"
        routingCodeName: Libell√© Code routage
      properties:
        routingIdentifier:
          description: Routing identifier od a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
          type: string
        routingIdentifierType:
          description: Routing Identifier type.
          example: "0224"
          maxLength: 4
          pattern: ^(?!\s*$).+
          type: string
        routingCodeName:
          description: Name of the directory line routing code. This attribute is
            only returned if the directory line is defined at the SIREN / SIRET /
            Routing code mesh.
          example: Libell√© Code routage
          maxLength: 100
          pattern: ^(?!\s*$).+
          type: string
        managesLegalCommitment:
          description: Indicates whether the public structure requires a legal commitment
            number. This attribute is only returned if the directory line is defined
            for a public structure at the SIREN / SIRET or SIREN / SIRET / Routing
            code level.
          example: true
          type: boolean
        administrativeStatus:
          $ref: "#/components/schemas/AFNOR_routingCodeAdministrativeStatus"
        address:
          $ref: "#/components/schemas/AFNOR_addressRead"
    AFNOR_directoryLinePayloadHistoryLegalUnitFacilityRoutingCodePlatform:
      example:
        platformType: WK
        platformStatus: Enabled
      properties:
        platformType:
          $ref: "#/components/schemas/AFNOR_recipientPlatformType"
        platformStatus:
          $ref: "#/components/schemas/AFNOR_platformStatus"
    AFNOR_createDirectoryLineBodyPeriod:
      properties:
        dateFrom:
          description: Effective start date of the directory line..
          example: 2023-01-01
          format: date
          type: string
        dateTo:
          description: Effective end date of the directory line.
          example: 2023-01-31
          format: date
          type: string
      required:
      - dateFrom
    AFNOR_createDirectoryLineBodyAddressingInformation:
      additionalProperties: false
      properties:
        siren:
          description: SIREN number
          example: "702042755"
          maxLength: 9
          pattern: "^([0-9]{9})$"
          type: string
        siret:
          description: SIRET Number
          example: "70204275500240"
          maxLength: 14
          pattern: "^([0-9]{14})$"
          type: string
        routingIdentifier:
          description: Routing identifier od a routing code.
          example: dcsc456sdcsdcs556
          maxLength: 100
          pattern: "^(?!\\s+$)[\\-_/a-zA-Z0-9]{1,100}$"
          type: string
        addressingSuffix:
          description: suffix of the directory line which defines an address mesh
            not attached to a facility
          example: dcsc456sdcsdcs556
          maxLength: 100
          type: string
      required:
      - siren
    submit_flow_proxy_api_v1_afnor_flow_v1_flows_post_request:
      properties:
        flowInfo:
          $ref: "#/components/schemas/AFNOR_FlowInfo"
        file:
          description: Flow file (PDF/A-3 with embedded XML or XML)
          format: binary
          type: string
      required:
      - file
      - flowInfo
    Currency:
      anyOf:
      - $ref: "#/components/schemas/CurrencyCode"
      - type: string
      default: EUR
      description: Currency code (ISO 4217). See CurrencyCode enum for valid values.
      example: EUR
      title: Currency
    Taxexclusiveamount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Total amount excluding VAT
      example: "10000.00"
      title: Taxexclusiveamount
    Taxamount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Total VAT amount
      example: "2000.00"
      title: Taxamount
    Encaisseamount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Montant encaiss√© (requis pour statut 212)
      nullable: true
      title: Encaisseamount
    Sellercountry:
      anyOf:
      - $ref: "#/components/schemas/CountryCode"
      - type: string
      default: FR
      description: Seller country code (ISO 3166-1 alpha-2). See CountryCode enum
        for valid values.
      example: FR
      title: Sellercountry
    Buyercountry:
      anyOf:
      - $ref: "#/components/schemas/CountryCode"
      - type: string
      description: Buyer country code (ISO 3166-1 alpha-2). Must be different from
        FR for B2B int.
      example: DE
      title: Buyercountry
    Taxexclusiveamount_1:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Amount excluding VAT
      example: "50000.00"
      title: Taxexclusiveamount
    Taxamount_1:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: VAT amount
      example: "0.00"
      title: Taxamount
    Rate:
      anyOf:
      - maximum: 100.0
        minimum: 0.0
        type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: VAT rate
      example: "20.00"
      title: Rate
    Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Payment amount
      example: "12000.00"
      title: Amount
    Destination:
      description: Destination configuration (Chorus Pro or AFNOR)
      discriminator:
        mapping:
          afnor: "#/components/schemas/AFNORDestination"
          chorus_pro: "#/components/schemas/ChorusProDestination"
        propertyName: type
      oneOf:
      - $ref: "#/components/schemas/ChorusProDestination"
      - $ref: "#/components/schemas/AFNORDestination"
      title: Destination
    SubmitNetAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Total net amount
      title: SubmitNetAmount
    SubmitVatAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: VAT amount
      title: SubmitVatAmount
    SubmitGrossAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Total gross amount
      title: SubmitGrossAmount
    Rate_1:
      anyOf:
      - maximum: 100.0
        minimum: 0.0
        type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: "VAT rate (e.g., 20.00 for 20%)"
      example: "20.00"
      title: Rate
    Taxableamount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Taxable amount (base)
      example: "10000.00"
      title: Taxableamount
    Taxamount_2:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: VAT amount
      example: "2000.00"
      title: Taxamount
    Encaisseamount_1:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      nullable: true
      title: Encaisseamount
    Location_inner:
      anyOf:
      - type: string
      - type: integer
    Amount_1:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Allowance/charge amount (BT-92/99/136/141).
      title: Amount
    Base_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Base amount for percentage calculation (BT-93/100/137/142).
      nullable: true
      title: Base Amount
    Percentage:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Percentage applied to base amount (BT-94/101/138/143).
      nullable: true
      title: Percentage
    Vat_Rate:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: VAT rate applicable to this allowance/charge (BT-96/103).
      nullable: true
      title: Vat Rate
    Quantity:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Invoiced quantity (BT-129). Can be negative for correction invoices.
      title: Quantity
    Gross_Unit_Price:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Item gross price before line discount (BT-148).
      nullable: true
      title: Gross Unit Price
    UnitNetPrice:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Item net price after line discount (BT-146).
      title: UnitNetPrice
    Price_Basis_Quantity:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Item price base quantity (BT-149). Default is 1.
      nullable: true
      title: Price Basis Quantity
    Price_Allowance_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Item price discount amount (BT-147).
      nullable: true
      title: Price Allowance Amount
    LineNetAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,10}|(?=[\\d.]{1,13}0*$)\\d{0,10}\\\
          .\\d{0,2}0*$)"
        type: string
      description: Invoice line net amount (BT-131). Can be negative for correction
        invoices.
      nullable: true
      title: LineNetAmount
    InvoiceLine_allowanceAmount:
      anyOf:
      - minimum: 0.0
        type: number
      - pattern: "^-?\\d+(\\.\\d{1,4})?$"
        type: string
      description: "Simple line allowance amount (BT-136). (Accepte number, string\
        \ ou integer)"
      format: decimal
      nullable: true
    Manual_Vat_Rate:
      anyOf:
      - minimum: 0.0
        type: number
      - pattern: "^-?\\d+(\\.\\d{1,4})?$"
        type: string
      description: "Line VAT rate percentage (BT-152). (Accepte number, string ou\
        \ integer)"
      format: decimal
      title: Manual Vat Rate
    Line_Total_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Sum of all Invoice line net amounts (BT-106).
      nullable: true
      title: Line Total Amount
    Allowance_Total_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Sum of all allowances on document level (BT-107).
      nullable: true
      title: Allowance Total Amount
    Charge_Total_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Sum of all charges on document level (BT-108).
      nullable: true
      title: Charge Total Amount
    TotalNetAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Invoice total amount without VAT (BT-109). Can be negative for
        correction invoices.
      title: TotalNetAmount
    TotalVATAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Invoice total VAT amount (BT-110). Can be negative for correction
        invoices.
      title: TotalVATAmount
    TotalGrossAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Invoice total amount with VAT (BT-112). Can be negative for correction
        invoices.
      title: TotalGrossAmount
    InvoiceTotals_prepayment:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Sum of amounts already paid (BT-113). Can be negative for correction
        invoices.
      nullable: true
    Rounding_Amount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
        type: string
      description: Rounding amount added to total (BT-114).
      nullable: true
      title: Rounding Amount
    AmountDue:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: Amount due for payment (BT-115). Can be negative for correction
        invoices.
      title: AmountDue
    GlobalAllowanceAmount:
      anyOf:
      - minimum: 0.0
        type: number
      - pattern: "^-?\\d+(\\.\\d{1,4})?$"
        type: string
      description: "Global allowance amount (legacy - use allowance_total_amount).\
        \ (Accepte number, string ou integer)"
      format: decimal
      title: GlobalAllowanceAmount
    TaxableAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: VAT category taxable amount (BT-116). Can be negative for correction
        invoices.
      title: TaxableAmount
    VATAmount:
      anyOf:
      - type: number
      - pattern: "^(?!^[-+.]*$)[+-]?0*(?:\\d{0,8}|(?=[\\d.]{1,13}0*$)\\d{0,8}\\.\\\
          d{0,4}0*$)"
        type: string
      description: VAT category tax amount (BT-117). Can be negative for correction
        invoices.
      title: VATAmount
    Manual_Rate:
      anyOf:
      - minimum: 0.0
        type: number
      - pattern: "^-?\\d+(\\.\\d{1,4})?$"
        type: string
      description: "VAT category rate (BT-119). (Accepte number, string ou integer)"
      format: decimal
      title: Manual Rate
  securitySchemes:
    HTTPBearer:
      description: Token JWT Bearer. Voir la section **Authentication** ci-dessus
        pour les instructions d√©taill√©es.
      scheme: bearer
      type: http

